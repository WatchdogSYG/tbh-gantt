{"version":3,"file":"visual.js","mappings":"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;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,+DAAS;AACpB;AACA;;;;;;;;;;;;AChC8B;AACA;AACI;AACJ;AACI;AACN;AACK;AACS;AAC1C;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1EoE;AACnB;AACF;AACN;AACU;AACF;AACN;AACM;AACiC;AACtB;AACI;AAC3B;AACE;AACI;AACF;AACJ;AACI;AACI;AACE;AACN;AACF;AACM;AACR;AAC6B;AACjB;AACF;AACV;;;;;;;;;;AC1BR;AACQ;AACN;AACI;AACnC;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClDO;;;;;;;;;;;ACAuB;AACI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mFAAmF;AAC9H;AACA;AACA;AACA,2CAA2C,gCAAgC,8DAA8D;AACzI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,gCAAgC;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,yBAAyB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;ACxKgB;;;;;;;;;;;ACLqB;AACW;AACL;AAC2B;AAC9B;AACH;AACD;AACgB;AACpD;AACA,iBAAiB,aAAa;AAC9B,kBAAkB,cAAc;AAChC,mBAAmB,eAAe;AAClC,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,iEAAiE;AAC3F,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,0BAA0B,iEAAiE;AAC3F,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,wBAAwB,yCAAyC;AACjE,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,gBAAgB;AACvD;AACA;AACA;AACA;AACA,qCAAqC,oCAAoC;AACzE,sCAAsC,yBAAyB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iDAAiD;AAC3F,wDAAwD,iCAAiC;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,iHAAiH;AACpJ,mCAAmC,iGAAiG;AACpI,uCAAuC,wGAAwG;AAC/I,wCAAwC,wGAAwG;AAChJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,qBAAqB,QAAQ;AAC3E,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA,yCAAyC;AACzC,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA,oCAAoC;AACpC,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,sCAAsC;AACtC,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzkBoB;;;;;;;;;;ACLb;;;;;;;;;;;ACAwB;AACC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,iBAAiB,+BAA+B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACxHyC;AACE;;;;;;;;;;ACDpC;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACLuB;AACI;AACM;AACX;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtFuC;AACF;AACA;AACE;AACI;AACE;;;;;;;;;;;;;ACLtC;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,yEAAyE,8CAA8C;AACvH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,sBAAsB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,GAAG,EAAC;;;;;;;;;;AC1EK;AACxB;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,YAAY,kCAAkC,IAAI;AACjG,yDAAyD,+BAA+B;AACxF;AACA;AACA;AACA,8BAA8B,kDAAkD;AAChF,2BAA2B,4CAA4C;AACvE,+BAA+B,wDAAwD;AACvF,uBAAuB,cAAc,cAAc;AACnD,gCAAgC,mCAAmC,cAAc;AACjF,kCAAkC,oBAAoB,cAAc;AACpE,0BAA0B,YAAY;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACxE6C;AAC7C;AACA;AACA;AACA,YAAY,yEAAa;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,iDAAM;AACf;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,iBAAiB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAe,mDAAG,IAAC;;;;;;;;;;;;;;;ACtCwB;AAC3C;AACO;AACP;AACO;AACA;AACP;AACA;AACA;AACA;AACA,yBAAyB,IAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,+DAAM,WAAW,2DAAM;AACvB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAAM,WAAW,2DAAM;AACvB;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClXA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;;;;;;;;;;ACTA;AACA;AACO;;;;;;;;;;;ACF4D;AACrC;AACM;AACV;AACQ;AACA;AACR;AAC1B;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,+DAA+D;AAC/D;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,+DAA+D;AAC/D;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,QAAQ;AACR,iEAAiE;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1M8C;AAChB;AACM;AACF;AACA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,WAAW,mCAAmC,GAAG,mCAAmC;AACpF,WAAW,mCAAmC,GAAG,mCAAmC;AACpF,WAAW,mCAAmC,GAAG,mCAAmC;AACpF,WAAW,mCAAmC,GAAG,mCAAmC;AACpF,WAAW,mCAAmC,GAAG,mCAAmC;AACpF,WAAW,mCAAmC,GAAG,mCAAmC;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACpI+C;AACK;;;;;;;;;;;;ACDpD,YAAY;AACZ;AACA;AACA,8CAA8C,KAAK,OAAO;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,iBAAiB;AACjB;AACA;AACA,GAAG;AACH;AACA,mFAAmF,OAAO;AAC1F;AACA,gDAAgD,OAAO;AACvD,GAAG;AACH;AACA;AACA,oDAAoD,OAAO;AAC3D;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA,mCAAmC,4BAA4B;AAC/D;AACA;AACA;AACA,iEAAe,QAAQ,EAAC;;;;;;;;;;;;;ACnFjB;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;ACVgD;AACE;AACN;AACQ;AACJ;AACQ;AAClB;AACA;;;;;;;;;;ACPJ;AACJ;AACI;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,gBAAgB;AACtD,wDAAwD,OAAO;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACnHkC;AACJ;AACO;AACH;AAClC;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,OAAO;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACjHqC;AACH;AACH;AAC/B;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,gBAAgB;AACpC;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtJO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBiC;AACjC;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,yDAAK;AAChB;AACA;;;;;;;;;;;;;;;ACZqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACO;AACP;AACA,0CAA0C,iEAAQ;AAClD;AACA;AACA;AACe;AACf;AACA,4BAA4B,iEAAQ;AACpC;;;;;;;;;;;;AC5BA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;ACJA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACJyC;AACV;AACY;AACD;AAC1C;AACA,iEAAe;AACf,cAAc,0DAAK;AACnB;AACA;AACA,2BAA2B,uDAAQ,mBAAmB,uDAAQ;AAC9D;AACA;AACA,kBAAkB,+DAAO;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,IAAI,EAAC;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,cAAc,uDAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,yBAAyB,0DAAK;AAC9B,+BAA+B,gEAAW;;;;;;;;;;;;;ACtDhB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA,4BAA4B;AAC5B;AACA;AACA,yCAAyC;AACzC,4BAA4B;AAC5B;AACA,MAAM,OAAO;AACb;AACA,cAAc,SAAS,+DAAM,SAAS;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,OAAO;AACpC;AACA,SAAS;AACT;;;;;;;;;;;;;AC/DA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACzBkC;AACY;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,aAAa,+DAAM,SAAS,GAAG,aAAa,+DAAM,SAAS;AACzE,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,gCAAgC;AACjE,cAAc,sDAAsD,+DAAM,OAAO;AACjF,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,qDAAqD,+DAAM,OAAO;AAChF,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,aAAa,+DAAM,SAAS,GAAG,aAAa,+DAAM,SAAS;AACzE,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,mDAAmD,wDAAQ;AAC3D,mDAAmD,wDAAQ;;;;;;;;;;;;;;AC9Df;AACnD;AACA;AACA;AACA;AACA;AACA;AACO;AACP,+BAA+B,4DAAQ;AACvC;AACA;AACA;AACA;AACA;AACA,SAAS,kEAAS;AAClB;AACA;AACO;AACP,4BAA4B,4DAAQ;AACpC;AACA;AACA,iEAAiE,4DAAQ;AACzE;AACA,SAAS,kEAAS;AAClB;;;;;;;;;;;ACxB4C;AACR;AACpC;AACA,sEAAe;AACf;AACA,0BAA0B,yEAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;;;ACdlB,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;ACF4C;AAC5C;AACA,sEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;;;;;;ACZiC;AACF;AACM;AACR;AACQ;AACI;;;;;;;;;;;;;ACLf;AAC5C;AACA,iEAAe;AACf;AACA;AACA,+BAA+B,OAAO;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;;ACb0B;AACd;AAC9B;AACA,sEAAe;AACf;AACA,uBAAuB,sEAAa;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;;;;ACd0B;AAC5C;AACA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;AC3B0B;AAC5C;AACA,sEAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,EAAE,+DAAa,CAAC,EAAC;;;;;;;;;;AChBlB;AACA;AACO;AACA;;;;;;;;;;;;ACHoC;AACV;AACD;AAChC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,0BAA0B;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;ACnGgC;AACoE;AACjE;AACD;AACJ;AAC9B;AACA,WAAW,sDAAM;AACjB;AACO;AACP;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;;;;;;;;;;;;;;;;AC3HsC;AACE;AACL;AACL;AACI;AACC;AACN;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;AC1F4B;AACO;AACL;AAC9B;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;ACzBgB;AAChB;AAGoB;AACpB;AAGkB;AAClB;AAGe;AACf;AAGkB;AAClB;AAImB;AACnB;AAIe;AACf;AAGoB;AACpB;AAGoB;AACpB;AAGqB;AACrB;AAGgB;AAChB;AAGmB;AACnB;AAOsB;AACtB;AAG8B;AAC9B;AAOqB;AACrB;AAGsB;;;;;;;;;;;;;ACzEwB;AACU;AACvB;AACK;AACtC;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvE+B;AACE;AACP;AACqB;AACd;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,4BAA4B;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B,iCAAiC,UAAU;AAC3C;AACA;AACA;AACA;AACA;AACA,QAAQ,YAAY,OAAO;AAC3B,wCAAwC,QAAQ;AAChD;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,mCAAmC;AAC9D,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AChJkC;AACJ;AACG;AACjC;AACO,gBAAgB;AACvB;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC5CmC;AACsB;AACxB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;ACjDkE;AACpC;AACG;AACjC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACzDgC;AACF;AACK;AACF;AACjC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACxDsC;AACE;AACL;AACL;AACK;AACN;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;;;;;;;;;;;;AC9F2C;AACL;AACE;AACxC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,OAAO;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC7BmC;AACY;AACd;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClCgC;AACF;AACG;AACjC;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACvCkC;AAC+E;AACjH;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC5B4C;AACsE;AACxE;AACd;AAC4B;AACvB;AACP;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,cAAc;AACnD;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;ACtIgC;AACS;AACiE;AACzE;AACjC;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;ACPA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;;;ACJoC;AACD;AACnC;AACA;AACA;AACA;AACA;AACA,mBAAmB,uDAAK,8CAA8C,uDAAK;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB,iBAAiB,+DAAS;AAC1B;AACA;AACA;AACA;;;;;;;;;;;;;;;ACxB2C;AACE;AACJ;AACI;AACJ;AACQ;AACE;AACJ;AACJ;AACM;AACM;AACR;AACM;AACC;AACb;AACI;AACF;AACO;;;;;;;;;;;;ACjBlD,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;;ACJsC;AACtC;AACA,6BAAe,oCAAS;AACxB;AACA;AACA,SAAS,0FAAyB,YAAY,OAAO,4DAAU,uBAAuB;AACtF;;;;;;;;;;;;;ACNO;AACP;AACA,iEAAe;AACf;AACA;AACA;AACA;AACA;AACA,CAAC,EAAC;;;;;;;;;;;;;ACRgD;AAClD;AACA,6BAAe,oCAAS;AACxB;AACA,YAAY,iEAAS;AACrB,YAAY,iEAAS,eAAe,4DAAI;AACxC;;;;;;;;;;;;;ACNkD;AAClD;AACA,6BAAe,oCAAS;AACxB;AACA,YAAY,iEAAS;AACrB,YAAY,iEAAS,qCAAqC,4DAAI;AAC9D;;;;;;;;;;;;;ACNiC;AACjC;AACA,6BAAe,oCAAS;AACxB,mDAAmD,6DAAO;AAC1D;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;ACPqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB,iBAAiB,+DAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxDA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;;;;;;;;;;;;;;;ACZkC;AACA;AACC;AACnC;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,gBAAgB;AACzB;AACA;AACA;AACA,MAAM;AACN,qBAAqB,sDAAS;AAC9B;AACA;AACA;AACA;AACA,SAAS,iBAAiB;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,gBAAgB;AAC9B;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,qBAAqB,sDAAS;AAC9B;AACA;AACA;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA,4BAA4B,gBAAgB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,8DAAQ;AACnD;AACA,uGAAuG,OAAO;AAC9G;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,iBAAiB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uDAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;ACrHA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;;ACJoC;AACpC;AACA;AACA,eAAe,4DAAW;AAC1B;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;ACjCA,6BAAe,oCAAS;AACxB;AACA,4DAA4D,OAAO;AACnE,+DAA+D,OAAO;AACtE;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACTA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;;;;ACF8B;AACI;AAClC;AACA,6BAAe,sCAAW;AAC1B,aAAa,uDAAS,iCAAiC,wDAAM;AAC7D;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,sDAAsD;AACvF,wCAAwC,gDAAgD;AACxF,sCAAsC,8CAA8C;AACpF,yCAAyC;AACzC;;;;;;;;;;;;;;ACrB8B;AACI;AAClC;AACA,6BAAe,sCAAW;AAC1B,aAAa,uDAAS,gCAAgC,wDAAM;AAC5D;;;;;;;;;;;;;;ACLkC;AACD;AACjC;AACA,6BAAe,oCAAS;AACxB,2CAA2C,6DAAO;AAClD;AACA,sFAAsF,OAAO;AAC7F,6FAA6F,OAAO;AACpG;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,uDAAS;AACtB;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBwC;AACM;AACN;AACJ;AACE;AACF;AACA;AACE;AACA;AACF;AACA;AACE;AACF;AACA;AACE;AACF;AACA;AACE;AACM;AACF;AACN;AACA;AACE;AACA;AACE;AACA;AACA;AACF;AACA;AACN;AACY;AAC5C;AACO;AACP;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,wDAAgB;AAC1B,aAAa,2DAAmB;AAChC,UAAU,wDAAgB;AAC1B,QAAQ,sDAAc;AACtB,SAAS,uDAAe;AACxB,QAAQ,sDAAc;AACtB,QAAQ,sDAAc;AACtB,SAAS,uDAAe;AACxB,SAAS,uDAAe;AACxB,QAAQ,sDAAc;AACtB,QAAQ,uDAAc;AACtB,SAAS,wDAAe;AACxB,QAAQ,uDAAc;AACtB,QAAQ,uDAAc;AACtB,SAAS,wDAAe;AACxB,QAAQ,uDAAc;AACtB,QAAQ,uDAAc;AACtB,SAAS,wDAAe;AACxB,YAAY,2DAAkB;AAC9B,WAAW,0DAAiB;AAC5B,QAAQ,uDAAc;AACtB,QAAQ,uDAAc;AACtB,SAAS,wDAAe;AACxB,SAAS,wDAAe;AACxB,UAAU,yDAAgB;AAC1B,UAAU,yDAAgB;AAC1B,UAAU,yDAAgB;AAC1B,SAAS,wDAAe;AACxB,SAAS,wDAAe;AACxB,MAAM,sDAAY;AAClB,YAAY,2DAAkB;AAC9B;AACA;AACA,iEAAe,SAAS,EAAC;;;;;;;;;;;;;;AC9EQ;AACE;AACnC;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB,mDAAmD,6DAAO;AAC1D,uFAAuF,8DAAQ;AAC/F;AACA;AACA,GAAG;AACH;;;;;;;;;;;;ACbA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA,qCAAqC;AACrC;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;;ACNkC;AAClC;AACA,6BAAe,oCAAS;AACxB;AACA,+JAA+J,OAAO;AACtK,yHAAyH,OAAO;AAChI;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;AACA,aAAa,uDAAS;AACtB;;;;;;;;;;;;ACjBA,6BAAe,sCAAW;AAC1B;AACA,4DAA4D,OAAO;AACnE,yDAAyD,OAAO;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACVA,6BAAe,sCAAW;AAC1B;AACA,yBAAyB,oBAAoB;AAC7C;AACA;;;;;;;;;;;;;ACJA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA,8CAA8C,OAAO;AACrD,6BAA6B,OAAO;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;AC1GA,6BAAe,sCAAW;AAC1B;AACA,6DAA6D,QAAQ;AACrE,6EAA6E,SAAS;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;;;ACPkC;AACC;AACnC;AACA,6BAAe,oCAAS;AACxB,6CAA6C,8DAAQ;AACrD;AACA,sFAAsF,OAAO;AAC7F,gHAAgH,OAAO;AACvH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,uDAAS;AACtB;;;;;;;;;;;;;;AChBkC;AACO;AACzC;AACA,6BAAe,oCAAS;AACxB,6CAA6C,iEAAW;AACxD;AACA,0FAA0F,OAAO;AACjG,+DAA+D,OAAO;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,uDAAS;AACtB;;;;;;;;;;;;AChBA,6BAAe,sCAAW;AAC1B;AACA,yBAAyB,SAAS;AAClC;AACA;;;;;;;;;;;;;ACJkC;AAClC;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,OAAO;AAC9F,yGAAyG,OAAO;AAChH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,uDAAS;AACtB;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBA,6BAAe,oCAAS;AACxB;AACA;;;;;;;;;;;;;;ACFoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA,SAAS,4DAAW;AACpB;;;;;;;;;;;;AClCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACxBA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;;;;;;;;;;;;ACRA,6BAAe,oCAAS;AACxB;AACA;AACA,2BAA2B;AAC3B;;;;;;;;;;;;;ACJiC;AACjC;AACA,6BAAe,oCAAS;AACxB,cAAc,sDAAK;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;;;;;;;;;;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,MAAM,iBAAiB,MAAM,yBAAyB,MAAM,4BAA4B,MAAM,kBAAkB;AACtI;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP,SAAS;AACT,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,+BAA+B;AAC/B;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;;;;;;;;;;AC7GiD;AACE;AACnD;AACA,WAAW,sDAAM;AACjB;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACpB8B;AAC8B;AACd;AACM;;;;;;;;;;;;;ACHa;AACjE;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,eAAe;AAClE,8BAA8B,uEAAQ,qBAAqB,qEAAM;AACjE,qBAAqB,oEAAK;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvBuC;AACU;AACE;AACnD;AACA,sGAA6B,GAAG,8DAAmB;AACnD,wGAA8B,GAAG,+DAAoB;;;;;;;;;;;;;ACLb;AACxC;AACA,6BAAe,oCAAS;AACxB;AACA,IAAI,kEAAS;AACb,GAAG;AACH;;;;;;;;;;;;;;;;ACNyD;AACR;AACV;AACV;AAC7B;AACA;AACA;AACA;AACA;AACA,QAAQ,yDAAc;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,uDAAG;AACrC;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA,sBAAsB,sEAAU;AAChC;AACA,IAAI;AACJ,SAAS,qEAAK,oCAAoC,uDAAG;AACrD;AACA;AACA,4DAA4D,OAAO;AACnE,+DAA+D,OAAO;AACtE;AACA,QAAQ,6EAAQ;AAChB;AACA;AACA;AACA;AACA,aAAa,sEAAU;AACvB;;;;;;;;;;;;;;;;ACzC+E;AACxC;AACD;AACK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB,iBAAiB,iEAAS,uCAAuC,4EAAoB,GAAG,gEAAW;AACnG;AACA,sEAAsE,8DAAU;AAChF;AACA;AACA;;;;;;;;;;;;;AC7EuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA,iBAAiB,iEAAS;AAC1B;AACA;;;;;;;;;;;;;AC3CwC;AACxC;AACA;AACA;AACA,IAAI,4DAAI;AACR;AACA;AACA;AACA;AACA;AACA,IAAI,4DAAI;AACR;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2DAAG;AACX;;;;;;;;;;;;;ACtBuC;AACvC;AACA;AACA;AACA,IAAI,2DAAG;AACP;AACA;AACA;AACA;AACA;AACA,IAAI,2DAAG;AACP;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,2DAAG;AACX;;;;;;;;;;;;;ACtBuC;AACvC;AACA;AACA;AACA;AACA,IAAI,2DAAG;AACP;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA,QAAQ,2DAAG;AACX;;;;;;;;;;;;;ACfkC;AAClC;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA,kBAAkB,cAAc;AAChC,eAAe,oBAAoB;AACnC;AACA;AACA,qBAAqB,2DAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;;;;;;;;;;;;;;ACzBqC;AACC;AACtC;AACA,6BAAe,oCAAS;AACxB,2CAA2C,iEAAO;AAClD;AACA,sFAAsF,OAAO;AAC7F,6FAA6F,OAAO;AACpG;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAAU;AACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfuC;AACC;AACU;AACR;AACM;AACR;AACI;AACF;AACN;AACQ;AACA;AACM;AACA;AACR;AACU;AACZ;AACU;AACE;AACV;AACJ;AACtC;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACe;AACf,SAAS,mEAAS;AAClB;AACA;AACO;AACP;AACA;AACA;AACA,0BAA0B,mFAAmB;AAC7C;AACA;AACA;AACA,UAAU,2DAAiB;AAC3B,aAAa,+DAAoB;AACjC,UAAU,2DAAiB;AAC3B,SAAS,0DAAgB;AACzB,aAAa,+DAAoB;AACjC,cAAc,gEAAqB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,uDAAa;AACnB,QAAQ,yDAAe;AACvB,aAAa,8DAAoB;AACjC,SAAS,2DAAgB;AACzB,cAAc,gEAAqB;AACnC,QAAQ,0DAAe;AACvB,aAAa,+DAAoB;AACjC,UAAU,2DAAiB;AAC3B,SAAS,2DAAgB;AACzB,SAAS,0DAAgB;AACzB,YAAY,6DAAmB;AAC/B,QAAQ,yDAAe;AACvB,OAAO,yDAAc;AACrB;;;;;;;;;;;;;;;;ACnE+B;AACqD;AACpF;AACA,6BAAe,oCAAS;AACxB;AACA,kCAAkC,+DAAiB;AACnD,qBAAqB,0DAAK,GAAG,gEAAc;AAC3C,aAAa,8DAAK,eAAe,gEAAc;AAC/C,QAAQ,+DAAiB;AACzB;;;;;;;;;;;;;ACTsC;AACtC;AACA,6BAAe,oCAAS;AACxB;AACA;AACA,gKAAgK,OAAO;AACvK,yHAAyH,OAAO;AAChI;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,QAAQ;AACjB;AACA;AACA;AACA,aAAa,2DAAU;AACvB;;;;;;;;;;;;;AClB6C;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,oCAAoC,wDAAI,GAAG,uDAAG;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA,QAAQ,2DAAG;AACX;AACA;;;;;;;;;;;;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;;;;;;;;;;;ACVqC;AACG;AACxC;AACA,cAAc,gEAAQ;AACtB;AACA;AACO;AACA;AACA;AACA;AACA;AACA;AACA;AACP;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACO;AACP;AACA,2DAA2D;AAC3D;AACA;AACA;AACO;AACP;AACA,2DAA2D;AAC3D;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,yDAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,sCAAsC,6DAAO;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA,2DAA2D;AAC3D;AACA,IAAI,6DAAO;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,wBAAwB,OAAO;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;;;;;;;;;;;;;;;ACxJsC;AACA;AACM;AAC5C;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA,6CAA6C,iEAAQ;AACrD;AACA,sFAAsF,OAAO;AAC7F,gHAAgH,OAAO;AACvH;AACA;AACA;AACA,QAAQ,kEAAQ,qCAAqC,2DAAG;AACxD;AACA;AACA;AACA;AACA,aAAa,2DAAU;AACvB;;;;;;;;;;;;;;;ACrByC;AACH;AACM;AAC5C;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA,6CAA6C,iEAAW;AACxD;AACA,0FAA0F,OAAO;AACjG,+DAA+D,OAAO;AACtE;AACA,yFAAyF,2DAAG,wCAAwC,OAAO;AAC3I;AACA,YAAY,kEAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAAU;AACvB;;;;;;;;;;;;;ACzBuC;AACvC;AACA,gBAAgB,0GAA+B;AAC/C;AACA,6BAAe,sCAAW;AAC1B;AACA;;;;;;;;;;;;;;;;;ACN+E;AAC5C;AACD;AACI;AACK;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAK;AACvB,oDAAoD,iEAAK;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,iEAAK;AACvB;AACA;AACA,6EAA6E,iEAAK;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2DAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB,yCAAyC,4EAAoB,GAAG,gEAAW;AAC3E;AACA;AACA;AACA;AACA,+CAA+C,8DAAU;AACzD;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA,qBAAqB,8DAAU;AAC/B;AACA;;;;;;;;;;;;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvB6C;AACD;AAC5C;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA,YAAY,0DAAK;AACjB;AACA,4DAA4D,OAAO;AACnE,+DAA+D,OAAO;AACtE;AACA,sBAAsB,2DAAG;AACzB,QAAQ,kEAAQ;AAChB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa,2DAAU;AACvB;;;;;;;;;;;;;;ACvBuC;AACvC;AACA;AACA;AACA;AACA,mBAAmB,2DAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,2DAAG;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,yBAAyB,4BAA4B,OAAO;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,oCAAS;AACxB;AACA;AACA;AACA;AACA;AACA,gBAAgB,2DAAG;AACnB,yCAAyC,OAAO;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA,mBAAmB,2DAAG;AACtB,2CAA2C;AAC3C,GAAG;AACH;AACA;AACA,WAAW,2DAAG;AACd;AACA;;;;;;;;;;;;;;;;;;AChF4C;AACV;AACkB;AACN;AACH;AAC3C;AACA;AACA;AACA;AACA,EAAE,oEAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,+DAAY;AACd,EAAE,qEAAc;AAChB;AACA,EAAE,oEAAY;AACd;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,uDAAO;AAC9C,wCAAwC,uDAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,+DAAY;AACd;AACA;AACA;AACA,uCAAuC,uDAAO;AAC9C,wCAAwC,uDAAO;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,+DAAY;AACd;AACA;AACA;AACA,iBAAiB,cAAc;AAC/B;AACA;AACA,IAAI,2DAAU;AACd;AACA;AACA;AACA;AACA,cAAc,2DAAU;AACxB;AACA,EAAE,+DAAY;AACd,EAAE,+DAAY;AACd;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,2DAAS;AACtB;AACA;AACA;AACA,cAAc,uDAAO,iBAAiB;AACtC;AACA,gBAAgB,uDAAO;AACvB;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR,mBAAmB,uDAAO;AAC1B;AACA;AACA,UAAU,gBAAgB,uDAAO;AACjC;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,2DAAU;AACZ;AACA,EAAE,qEAAc;AAChB;AACA;AACA;AACA;AACA,IAAI,+DAAY;AAChB;AACA,IAAI,qEAAc;AAClB,8BAA8B,2DAAU;AACxC,IAAI,+DAAY;AAChB,IAAI,+DAAY;AAChB;AACA;AACA;AACA,eAAe;AACf,kBAAkB,2DAAU;AAC5B;AACA;AACA;AACA;AACA,EAAE,+DAAY;AACd,EAAE,+DAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,2DAAU;AACZ,gBAAgB,2DAAU;AAC1B,cAAc,2DAAU;AACxB,EAAE,+DAAY;AACd,EAAE,+DAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AChMwC;AACQ;AAChD;AACO;AACP,SAAS,qDAAK;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACO;AACP,sBAAsB,mEAAY,yBAAyB,OAAO;AAClE,gBAAgB,qDAAK;AACrB;AACA;AACA,kBAAkB,OAAO,sDAAsD,qDAAK;AACpF,kCAAkC,6BAA6B;AAC/D,kBAAkB,OAAO;AACzB,kBAAkB,OAAO;AACzB;AACA;AACA;AACA;AACO;AACP,eAAe,mEAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,gBAAgB;AAClC,eAAe,qDAAK;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,qDAAK;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,qDAAK;AACzC,wCAAwC,qDAAK;AAC7C,sCAAsC,uDAAO,8BAA8B,uDAAO;AAClF,yCAAyC,+DAAU,CAAC,iEAAgB;AACpE,oCAAoC,uDAAO,gBAAgB,uDAAO,gCAAgC,uDAAO;AACzG,sCAAsC,uDAAO,gBAAgB,uDAAO,4BAA4B,uDAAO;AACvG,sCAAsC,uDAAO,gBAAgB,uDAAO,gCAAgC,uDAAO;AAC3G,sCAAsC,uDAAO,gBAAgB,uDAAO,4BAA4B,uDAAO;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,gBAAgB;AAClD,iBAAiB,qDAAK;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,+DAAU,CAAC,iEAAgB;AACnC,QAAQ,+DAAU,CAAC,iEAAgB;AACnC,QAAQ,+DAAU,CAAC,iEAAgB;AACnC,QAAQ,+DAAU,CAAC,iEAAgB;AACnC;AACA;AACA;AACA;AACA,4CAA4C;AAC5C,kBAAkB,gBAAgB;AAClC,eAAe,qDAAK;AACpB;AACA,eAAe,qDAAK;AACpB;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7H4C;AACA;AAC5C;AACA;AACA;AACO;AACP;AACA;AACA,EAAE,oEAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,wDAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA,aAAa,2DAAS;AACtB;AACA;AACA;AACA;AACA,aAAa,iBAAiB;AAC9B,MAAM;AACN;AACA,aAAa,eAAe;AAC5B;AACA;AACA;AACA,EAAE,qEAAc;AAChB;AACA;AACA;AACO;AACP;AACA;AACA;AACA,IAAI,qEAAc;AAClB;AACA,IAAI,oEAAY;AAChB;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AC7E8C;AACyB;AAClC;AACJ;AACS;AAC1C;AACO;AACA;AACA;AACA;AACA;AACA;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,8DAAY;AAC5B,gBAAgB,8DAAY;AAC5B;AACA;AACA,aAAa,0DAAW;AACxB;AACA;AACA,QAAQ,yDAAQ;AAChB;AACA;AACA;AACA,MAAM;AACN,MAAM,4DAAW;AACjB,MAAM;AACN;AACA;AACA;AACA;AACA,EAAE,kEAAiB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAAS;AACb,IAAI,0DAAS;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,OAAO,kEAAiB,mBAAmB;AAChG;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AC7IgD;AAChD;AACO;AACP;AACA,cAAc,+DAAU;AACxB;AACA;AACA;AACA;AACA,EAAE,qDAAK;AACP,EAAE,qDAAK;AACP;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP,UAAU,mEAAY;AACtB;AACA;AACA;AACA,4BAA4B,qDAAK;AACjC;AACA,iDAAiD,uDAAO;AACxD,mDAAmD,uDAAO;AAC1D,aAAa,qDAAK;AAClB;AACA;AACA;;;;;;;;;;;;;ACvKA;AACA,iBAAiB;AACjB;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B,gBAAgB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAe,YAAY,EAAC;;;;;;;;;;AC5OiB;;;;;;;;;;ACAX;AACe;AACN;AAC3C;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC/C0C;AACwC;;;;;;;;;;ACD3E;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACe;AACf;AACA;AACA;;;;;;;;;;;AClDqC;AACW;AACD;AACuB;AAC9B;AACH;AACF;AACgB;AACC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAAe,sCAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,mCAAmC;AAC1E,oDAAoD,iCAAiC;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,mBAAmB,4BAA4B;AAC/C;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D,uBAAuB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AClaO;AACA;AACA;AACA,eAAe,kGAAkD;AACjE;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,kBAAkB;AAClB,YAAY,2EAA2B;AACvC,eAAe,+WAA+W,oBAAoB,sMAAsM,oBAAoB,sBAAsB,oBAAoB,MAAM,qBAAqB;AACjrB,uBAAuB;AACvB,oBAAoB;;;;;;;;;;;;;;;;;;;;;;;;;;;ACfe;AACjB;AACD;AACC;AACA;AACK;AACL;AACE;AACC;AACJ;AACD;AACC;AACC;AACA;AACC;AACH;AACM;AACE;AACP;AACG;AACC;AACF;AACD;AACU;AACN;AACJ;AACD;AACO;AACN;AACK;AACH;AACH;;;;;;;;;;;;;AC/BjB;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClBmD;AACnD;AACO;AACP;AACA;AACA;AACA,WAAW,8DAAuB;AAClC;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACnCqD;AAC9C;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,sEAA8B;AAC/F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;;;;ACjEA,eAAe,KAAoD,oBAAoB,CAA+G,CAAC,kBAAkB,aAAa,w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","sources":["webpack:///./src/activity.ts","webpack:///./src/configuration.ts","webpack:///./src/lib.ts","webpack:///./src/settings.ts","webpack:///./src/time.ts","webpack:///./src/timeline.ts","webpack:///./src/visual.ts","webpack:///./node_modules/d3-array/src/array.js","webpack:///./node_modules/d3-array/src/ascending.js","webpack:///./node_modules/d3-array/src/bisect.js","webpack:///./node_modules/d3-array/src/bisector.js","webpack:///./node_modules/d3-array/src/histogram.js","webpack:///./node_modules/d3-array/src/index.js","webpack:///./node_modules/d3-array/src/threshold/freedmanDiaconis.js","webpack:///./node_modules/d3-array/src/ticks.js","webpack:///./node_modules/d3-axis/src/array.js","webpack:///./node_modules/d3-axis/src/axis.js","webpack:///./node_modules/d3-axis/src/index.js","webpack:///./node_modules/d3-brush/src/brush.js","webpack:///./node_modules/d3-brush/src/index.js","webpack:///./node_modules/d3-chord/src/array.js","webpack:///./node_modules/d3-chord/src/chord.js","webpack:///./node_modules/d3-chord/src/index.js","webpack:///./node_modules/d3-chord/src/math.js","webpack:///./node_modules/d3-chord/src/ribbon.js","webpack:///./node_modules/d3-collection/src/index.js","webpack:///./node_modules/d3-collection/src/map.js","webpack:///./node_modules/d3-collection/src/nest.js","webpack:///./node_modules/d3-collection/src/set.js","webpack:///./node_modules/d3-color/src/color.js","webpack:///./node_modules/d3-color/src/define.js","webpack:///./node_modules/d3-contour/src/array.js","webpack:///./node_modules/d3-contour/src/contours.js","webpack:///./node_modules/d3-contour/src/density.js","webpack:///./node_modules/d3-contour/src/index.js","webpack:///./node_modules/d3-dispatch/src/dispatch.js","webpack:///./node_modules/d3-ease/src/cubic.js","webpack:///./node_modules/d3-force/src/index.js","webpack:///./node_modules/d3-force/src/link.js","webpack:///./node_modules/d3-force/src/manyBody.js","webpack:///./node_modules/d3-force/src/simulation.js","webpack:///./node_modules/d3-interpolate/src/basis.js","webpack:///./node_modules/d3-interpolate/src/basisClosed.js","webpack:///./node_modules/d3-interpolate/src/color.js","webpack:///./node_modules/d3-interpolate/src/constant.js","webpack:///./node_modules/d3-interpolate/src/number.js","webpack:///./node_modules/d3-interpolate/src/rgb.js","webpack:///./node_modules/d3-interpolate/src/string.js","webpack:///./node_modules/d3-interpolate/src/transform/decompose.js","webpack:///./node_modules/d3-interpolate/src/transform/index.js","webpack:///./node_modules/d3-interpolate/src/transform/parse.js","webpack:///./node_modules/d3-random/src/bates.js","webpack:///./node_modules/d3-random/src/defaultSource.js","webpack:///./node_modules/d3-random/src/exponential.js","webpack:///./node_modules/d3-random/src/index.js","webpack:///./node_modules/d3-random/src/irwinHall.js","webpack:///./node_modules/d3-random/src/logNormal.js","webpack:///./node_modules/d3-random/src/normal.js","webpack:///./node_modules/d3-random/src/uniform.js","webpack:///./node_modules/d3-scale/src/array.js","webpack:///./node_modules/d3-scale/src/band.js","webpack:///./node_modules/d3-scale/src/continuous.js","webpack:///./node_modules/d3-scale/src/diverging.js","webpack:///./node_modules/d3-scale/src/identity.js","webpack:///./node_modules/d3-scale/src/index.js","webpack:///./node_modules/d3-scale/src/linear.js","webpack:///./node_modules/d3-scale/src/log.js","webpack:///./node_modules/d3-scale/src/ordinal.js","webpack:///./node_modules/d3-scale/src/pow.js","webpack:///./node_modules/d3-scale/src/quantile.js","webpack:///./node_modules/d3-scale/src/quantize.js","webpack:///./node_modules/d3-scale/src/sequential.js","webpack:///./node_modules/d3-scale/src/sequentialQuantile.js","webpack:///./node_modules/d3-scale/src/symlog.js","webpack:///./node_modules/d3-scale/src/threshold.js","webpack:///./node_modules/d3-scale/src/tickFormat.js","webpack:///./node_modules/d3-scale/src/time.js","webpack:///./node_modules/d3-scale/src/utcTime.js","webpack:///./node_modules/d3-selection/src/constant.js","webpack:///./node_modules/d3-selection/src/creator.js","webpack:///./node_modules/d3-selection/src/index.js","webpack:///./node_modules/d3-selection/src/matcher.js","webpack:///./node_modules/d3-selection/src/namespace.js","webpack:///./node_modules/d3-selection/src/namespaces.js","webpack:///./node_modules/d3-selection/src/select.js","webpack:///./node_modules/d3-selection/src/selectAll.js","webpack:///./node_modules/d3-selection/src/selection/append.js","webpack:///./node_modules/d3-selection/src/selection/attr.js","webpack:///./node_modules/d3-selection/src/selection/call.js","webpack:///./node_modules/d3-selection/src/selection/classed.js","webpack:///./node_modules/d3-selection/src/selection/clone.js","webpack:///./node_modules/d3-selection/src/selection/data.js","webpack:///./node_modules/d3-selection/src/selection/datum.js","webpack:///./node_modules/d3-selection/src/selection/dispatch.js","webpack:///./node_modules/d3-selection/src/selection/each.js","webpack:///./node_modules/d3-selection/src/selection/empty.js","webpack:///./node_modules/d3-selection/src/selection/enter.js","webpack:///./node_modules/d3-selection/src/selection/exit.js","webpack:///./node_modules/d3-selection/src/selection/filter.js","webpack:///./node_modules/d3-selection/src/selection/html.js","webpack:///./node_modules/d3-selection/src/selection/index.js","webpack:///./node_modules/d3-selection/src/selection/insert.js","webpack:///./node_modules/d3-selection/src/selection/join.js","webpack:///./node_modules/d3-selection/src/selection/lower.js","webpack:///./node_modules/d3-selection/src/selection/merge.js","webpack:///./node_modules/d3-selection/src/selection/node.js","webpack:///./node_modules/d3-selection/src/selection/nodes.js","webpack:///./node_modules/d3-selection/src/selection/on.js","webpack:///./node_modules/d3-selection/src/selection/order.js","webpack:///./node_modules/d3-selection/src/selection/property.js","webpack:///./node_modules/d3-selection/src/selection/raise.js","webpack:///./node_modules/d3-selection/src/selection/remove.js","webpack:///./node_modules/d3-selection/src/selection/select.js","webpack:///./node_modules/d3-selection/src/selection/selectAll.js","webpack:///./node_modules/d3-selection/src/selection/size.js","webpack:///./node_modules/d3-selection/src/selection/sort.js","webpack:///./node_modules/d3-selection/src/selection/sparse.js","webpack:///./node_modules/d3-selection/src/selection/style.js","webpack:///./node_modules/d3-selection/src/selection/text.js","webpack:///./node_modules/d3-selection/src/selector.js","webpack:///./node_modules/d3-selection/src/selectorAll.js","webpack:///./node_modules/d3-selection/src/window.js","webpack:///./node_modules/d3-timer/src/timeout.js","webpack:///./node_modules/d3-timer/src/timer.js","webpack:///./node_modules/d3-transition/src/active.js","webpack:///./node_modules/d3-transition/src/index.js","webpack:///./node_modules/d3-transition/src/interrupt.js","webpack:///./node_modules/d3-transition/src/selection/index.js","webpack:///./node_modules/d3-transition/src/selection/interrupt.js","webpack:///./node_modules/d3-transition/src/selection/transition.js","webpack:///./node_modules/d3-transition/src/transition/attr.js","webpack:///./node_modules/d3-transition/src/transition/attrTween.js","webpack:///./node_modules/d3-transition/src/transition/delay.js","webpack:///./node_modules/d3-transition/src/transition/duration.js","webpack:///./node_modules/d3-transition/src/transition/ease.js","webpack:///./node_modules/d3-transition/src/transition/end.js","webpack:///./node_modules/d3-transition/src/transition/filter.js","webpack:///./node_modules/d3-transition/src/transition/index.js","webpack:///./node_modules/d3-transition/src/transition/interpolate.js","webpack:///./node_modules/d3-transition/src/transition/merge.js","webpack:///./node_modules/d3-transition/src/transition/on.js","webpack:///./node_modules/d3-transition/src/transition/remove.js","webpack:///./node_modules/d3-transition/src/transition/schedule.js","webpack:///./node_modules/d3-transition/src/transition/select.js","webpack:///./node_modules/d3-transition/src/transition/selectAll.js","webpack:///./node_modules/d3-transition/src/transition/selection.js","webpack:///./node_modules/d3-transition/src/transition/style.js","webpack:///./node_modules/d3-transition/src/transition/styleTween.js","webpack:///./node_modules/d3-transition/src/transition/text.js","webpack:///./node_modules/d3-transition/src/transition/textTween.js","webpack:///./node_modules/d3-transition/src/transition/transition.js","webpack:///./node_modules/d3-transition/src/transition/tween.js","webpack:///./node_modules/d3-voronoi/src/Beach.js","webpack:///./node_modules/d3-voronoi/src/Cell.js","webpack:///./node_modules/d3-voronoi/src/Circle.js","webpack:///./node_modules/d3-voronoi/src/Diagram.js","webpack:///./node_modules/d3-voronoi/src/Edge.js","webpack:///./node_modules/d3-voronoi/src/RedBlackTree.js","webpack:///./node_modules/d3-voronoi/src/index.js","webpack:///./node_modules/d3-voronoi/src/voronoi.js","webpack:///./node_modules/d3-zoom/src/index.js","webpack:///./node_modules/d3-zoom/src/transform.js","webpack:///./node_modules/d3-zoom/src/zoom.js","webpack:///./node_modules/d3/dist/package.js","webpack:///./node_modules/d3/index.js","webpack:///./node_modules/powerbi-visuals-utils-dataviewutils/lib/dataViewObject.js","webpack:///./node_modules/powerbi-visuals-utils-dataviewutils/lib/dataViewObjects.js","webpack:///./node_modules/powerbi-visuals-utils-dataviewutils/lib/dataViewObjectsParser.js","webpack:///../../../../node_modules/dayjs/dayjs.min.js","webpack:///external var \"Function('return this')()\"","webpack:///webpack/bootstrap","webpack:///webpack/runtime/compat get default export","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./.tmp/precompile/visualPlugin.ts"],"sourcesContent":["import * as dayjs from \"dayjs\";\r\n\r\nexport class Activity {\r\n\r\n    private name: string;\r\n    private level: number;\r\n    private start: dayjs.Dayjs;\r\n    private end: dayjs.Dayjs;\r\n    private globalStatus: dayjs.Dayjs;\r\n    private baselineStart: dayjs.Dayjs;\r\n    private baselineFinish: dayjs.Dayjs;\r\n\r\n    public getName(): string { return this.name; }\r\n    public getLevel(): number { return this.level; }\r\n    public getLevelString(): string { return 'indent'.concat(this.level.toString()); } //required for workaround, search for @indentTypeMismatch in visual.ts\r\n    public getStart(): dayjs.Dayjs { return this.start; }\r\n    public getEnd(): dayjs.Dayjs { return this.end; }\r\n    public getBaselineStart(): dayjs.Dayjs { return this.baselineStart; }\r\n    public getBaselineFinish(): dayjs.Dayjs { return this.baselineFinish; }\r\n    public getGlobalStatus(): dayjs.Dayjs { return this.globalStatus; }\r\n\r\n    public getTableText(): string[] { return [this.name, this.start.format('DD/MM/YY'), this.end.format('DD/MM/YY')]; }\r\n\r\n    public setLevel(level: number) { this.level = level; }\r\n    public setStart(date: dayjs.Dayjs) { this.start = date; }\r\n    public setEnd(date: dayjs.Dayjs) { this.end = date; }\r\n    public setBaselineStart(date: dayjs.Dayjs) { this.baselineStart = date };\r\n    public setBaselineFinish(date: dayjs.Dayjs) { this.baselineFinish = date };\r\n    public setGlobalStatus(date: dayjs.Dayjs) { this.globalStatus = date; }\r\n\r\n    constructor(name: string, level: number, start: dayjs.Dayjs, end: dayjs.Dayjs, globalStatus: dayjs.Dayjs) {\r\n        this.name = name;\r\n        this.level = level;\r\n        this.start = start;\r\n        this.end = end;\r\n        this.globalStatus = globalStatus;\r\n    }\r\n}\r\n\r\nexport class ActivityStyle {\r\n\r\n    //TODO: get the styles at runtime\r\n    private fillArray: string[] = [\r\n        '#2A588E',\r\n        '#3B6064',\r\n        '#55828B',\r\n        '#87BBA2',\r\n        '#A4E1C9',\r\n        'gray'\r\n    ];\r\n\r\n    constructor() {\r\n    }\r\n\r\n    public fill(level: number): string {\r\n        return this.fillArray[Math.min(Math.floor(level), this.fillArray.length)];\r\n    }\r\n}","//TODO\r\n\r\n/**\r\n * Handle when more fields than roles\r\n * \r\n */\r\n\r\nimport * as dayjs from \"dayjs\";\r\nimport powerbi from \"powerbi-visuals-api\";\r\n\r\nexport enum ValueFields {\r\n    //Ensure that the order of the ValueFields enums are the same as defined in the dataRoles array\r\n    //in the capabilities.json file.\r\n    START = 'Start',\r\n    END = 'Finish',\r\n    BASELINESTART = 'BaselineStart',\r\n    BASELINEFINISH = 'BaselineFinish',\r\n    ISMILESTONE = 'IsMilestone',\r\n    ISCRITICAL = 'IsCritical',\r\n    STATUSDATE = 'StatusDate'\r\n\r\n}\r\n\r\nexport class Configuration {\r\n\r\n    private verbose = false;\r\n\r\n    private bool_start: boolean; //start      \r\n    private bool_end: boolean; //end        \r\n    private bool_isMilestone: boolean; //isMilestone\r\n    private bool_isCritical: boolean; //isCritical \r\n    private bool_statusDate: boolean; //statusDate\r\n    private bool_baselineStart: boolean; //baselineStart  \r\n    private bool_baselineFinish: boolean; //baselineFinish\r\n\r\n    private valueMap: Map<ValueFields, number>;\r\n\r\n    private vs: powerbi.DataViewMetadataColumn[];\r\n\r\n    constructor() {\r\n        this.bool_start = false;\r\n        this.bool_end = false;\r\n        this.bool_isMilestone = false;\r\n        this.bool_isCritical = false;\r\n        this.bool_statusDate = false;\r\n        this.bool_baselineStart = false;\r\n        this.bool_baselineFinish = false;\r\n        this.vs = [];\r\n        this.valueMap = new Map<ValueFields, number>;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param field the ValueFields to check or set\r\n     * @param set if this variable is not null, set the corresponding boolean in the configuration\r\n     * @returns the boolean value associated with the ValueFields (singular) provided\r\n     */\r\n    public field(field: ValueFields, set?: boolean): boolean {\r\n        if (set != null) {\r\n            switch (field) {\r\n                case ValueFields.START: this.bool_start = set; break;\r\n                case ValueFields.END: this.bool_end = set; break;\r\n                case ValueFields.ISMILESTONE: this.bool_isMilestone = set; break;\r\n                case ValueFields.ISCRITICAL: this.bool_isCritical = set; break;\r\n                case ValueFields.STATUSDATE: this.bool_statusDate = set; break;\r\n                case ValueFields.BASELINESTART: this.bool_baselineStart = set; break;\r\n                case ValueFields.BASELINEFINISH: this.bool_baselineFinish = set; break;\r\n            }\r\n        }\r\n        switch (field) {\r\n            case ValueFields.START: return this.bool_start;\r\n            case ValueFields.END: return this.bool_end;\r\n            case ValueFields.ISMILESTONE: return this.bool_isMilestone;\r\n            case ValueFields.ISCRITICAL: return this.bool_isCritical;\r\n            case ValueFields.STATUSDATE: return this.bool_statusDate;\r\n            case ValueFields.BASELINESTART: return this.bool_baselineStart;\r\n            case ValueFields.BASELINEFINISH: return this.bool_baselineFinish;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * returns a Configuration object with members set based on the vs (valueSource of a DataView.matrix object).\r\n     * @param vs a powerbi.DataViewMetadataColumn array\r\n     * @returns a configured Configuration object\r\n     */\r\n    public checkRoles(vs: powerbi.DataViewMetadataColumn[]): Configuration {\r\n        this.vs = vs;\r\n\r\n        if (this.verbose) { console.log('LOG: number of valuesource items: ' + vs.length); }\r\n        let r: ValueFields[] = this.valueRoles();\r\n        let valueSourceIndex = 0;\r\n\r\n        for (let i = 0; (i < r.length) && (valueSourceIndex < vs.length); i++) {\r\n            console.log('vs[' + valueSourceIndex + '] = ' + vs[valueSourceIndex].roles + ', r[' + i + '] = ' + r[i]);\r\n            if (vs[valueSourceIndex].roles[r[i]] == true) {\r\n                this.field(r[i], true);\r\n                this.valueMap.set(r[valueSourceIndex], valueSourceIndex);\r\n                valueSourceIndex++;\r\n            } else {\r\n                this.field(r[i], false);//must explicitly set in case a field is removed\r\n            }\r\n\r\n            this.logConfig();\r\n\r\n        }\r\n\r\n        if (this.verbose) {\r\n            console.log(this.valueMap.get(ValueFields.START));\r\n            console.log(this.valueMap.get(ValueFields.END));\r\n            console.log(this.valueMap.get(ValueFields.BASELINESTART));\r\n            console.log(this.valueMap.get(ValueFields.BASELINEFINISH));\r\n            console.log(this.valueMap.get(ValueFields.ISCRITICAL));\r\n            console.log(this.valueMap.get(ValueFields.ISMILESTONE));\r\n            console.log(this.valueMap.get(ValueFields.STATUSDATE));\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public getValueMap(key: ValueFields): number {\r\n        return this.valueMap.get(key);\r\n    }\r\n\r\n    public printConfig(): string {\r\n        return ValueFields.START + ' = ' + this.bool_start + '\\n' +\r\n            ValueFields.END + ' = ' + this.bool_end + '\\n' +\r\n            ValueFields.BASELINESTART + ' = ' + this.bool_baselineStart + '\\n' +\r\n            ValueFields.BASELINEFINISH + ' = ' + this.bool_baselineFinish +\r\n            ValueFields.ISMILESTONE + ' = ' + this.bool_isMilestone + '\\n' +\r\n            ValueFields.ISCRITICAL + ' = ' + this.bool_isCritical + '\\n' +\r\n            ValueFields.STATUSDATE + ' = ' + this.bool_statusDate + '\\n';\r\n    }\r\n\r\n    public logConfig() {\r\n        console.log(this.printConfig());\r\n    }\r\n\r\n    public drawGraph(): boolean {\r\n        if (this.bool_start && this.bool_end) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public startFilter(start: dayjs.Dayjs): dayjs.Dayjs {\r\n        if (this.bool_start) { return start; } else { return null; }\r\n    }\r\n\r\n    public endFilter(end: dayjs.Dayjs): dayjs.Dayjs {\r\n        if (this.bool_end) { return end; } else { return null; }\r\n    }\r\n\r\n    public statusFilter(status: dayjs.Dayjs): dayjs.Dayjs {\r\n        if (this.bool_statusDate) { return status; } else { return null; }\r\n    }\r\n\r\n    public getDisplayNames(): string[] {\r\n        let s: string[] = ['Activity'];\r\n        if (this.vs.length == 0) {\r\n            console.log('WARN: No values provided to display.')\r\n        } else {\r\n            for (let i = 0; i < this.vs.length; i++) {\r\n                console.log(this.vs[i].displayName);\r\n                s.push(this.vs[i].displayName);\r\n            }\r\n        }\r\n        return s;\r\n    }\r\n\r\n    public valueRoles(): ValueFields[] {\r\n        return [\r\n            ValueFields.START,\r\n            ValueFields.END,\r\n            ValueFields.BASELINESTART,\r\n            ValueFields.BASELINEFINISH,\r\n            ValueFields.ISMILESTONE,\r\n            ValueFields.ISCRITICAL,\r\n            ValueFields.STATUSDATE,\r\n\r\n        ];\r\n    }\r\n\r\n    public configurationBooleans(): boolean[] {\r\n        return [\r\n            this.bool_start,\r\n            this.bool_end,\r\n            this.bool_baselineStart,\r\n            this.bool_baselineFinish,\r\n            this.bool_isMilestone,\r\n            this.bool_isCritical,\r\n            this.bool_statusDate,\r\n\r\n        ];\r\n    }\r\n}\r\n\r\n/**\r\n * 1\r\n * 2\r\n * 3\r\n * 4\r\n * 5\r\n * 6\r\n * \r\n * 1\r\n * 2\r\n * 4\r\n * 5\r\n * \r\n * 11Y\r\n * 22Y\r\n * 34N\r\n * 44Y\r\n * \r\n * Always tick the r index\r\n * Tick the valueSourcesIndex when match\r\n */","//library of helper functions\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  CSS STYLE HELPERS\r\n////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Converts a number into a string with the units 'px' suffixed on it.\r\n * @param pixels the number of pixels\r\n * @returns the string representation of the number with 'px' suffixed\r\n */\r\nexport function px(pixels: number): string {\r\n    return pixels.toString().concat('px');\r\n}\r\n\r\n/**\r\n * For now this doesnt work and because the return value never comes back... keep this in visual.ts for now\r\n * Returns the number representation of a CSS measurement with pixel units.\r\n * @param numberPx the string containing the number of pixels to extract eg. '40.2px'\r\n * @returns the number of pixels specified\r\n */\r\nexport function pxToNumber(numberPx: string): number {\r\n   //if there is only one instance of 'px' and its at the end\r\n   if ((numberPx.lastIndexOf('px') == numberPx.indexOf('px'))\r\n   && (numberPx.length - numberPx.lastIndexOf('px') == 2)) {\r\n   return +numberPx.substring(0, numberPx.length - 2);\r\n} else {\r\n   //otherwise return null since css can have negative, 0, or positive values\r\n   return null;\r\n}\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  UNUSED FUNCTIONS\r\n////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Returns a number rounded up, down, or not at all, to the nearest integer.\r\n * @param x The number to round.\r\n * @param round Rounds x to the nearest integer. Rounds up if > 0, does not round if == 0, rounds down otherwise.\r\n * @returns The number rounded as specified.\r\n */\r\nexport function roundOptions(x: number, round?: number):number{\r\n   if (round > 0) {\r\n      return Math.ceil(x);\r\n  } else if ((round == 0) || (round == undefined)) {\r\n      return x;\r\n  } else {\r\n      return Math.floor(x);\r\n  }\r\n}","/*\r\n *  Power BI Visualizations\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\n\r\n\"use strict\";\r\n\r\nimport { dataViewObjectsParser } from \"powerbi-visuals-utils-dataviewutils\";\r\nimport DataViewObjectsParser = dataViewObjectsParser.DataViewObjectsParser;\r\n\r\nexport class VisualSettings extends DataViewObjectsParser {\r\n      public userFormatting: userFormattingSettings = new userFormattingSettings();\r\n//      public dataColour: DataColourSettings = new DataColourSettings();\r\n//      public font: fontSettings = new fontSettings();\r\n      }\r\n\r\n    export class userFormattingSettings {\r\n     // Default color\r\n      public defaultColor: string = \"\";\r\n     // Show all\r\n      public showAllDataPoints: boolean = true;\r\n     // Fill\r\n      public fill: string = \"\";\r\n     // Color saturation\r\n      //public fillRule: string = \"\";\r\n     // Text Size\r\n      public fontSize: number = 12;\r\n     }\r\n/*\r\n     export class DataColourSettings {\r\n      public dataColour: string = \"white\";\r\n    }\r\n\r\n    export class fontSettings {\r\n      public fontSize: number = 12;\r\n    }\r\n  */\r\n\r\n","//A header lib for date and time fns\r\n\r\nimport * as dayjs from 'dayjs';\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  CONSTANTS\r\n////////////////////////////////////////////////////////////////\r\nexport const millisPerSecond: number = 1000;\r\nexport const secondsPerMinute: number = 60;\r\nexport const minutesPerHour: number = 60;\r\nexport const hoursPerDay: number = 24;\r\nexport const daysPerWeek: number = 7;\r\nexport const monthsPerYear: number = 12;\r\n/**\r\n * The number of days in a non-leap year.\r\n */\r\nexport const daysPerYear: number = 365;\r\n\r\nconst monthArray: string[] = [\r\n    'January',\r\n    'February',\r\n    'March',\r\n    'April',\r\n    'May',\r\n    'June',\r\n    'July',\r\n    'August',\r\n    'September',\r\n    'October',\r\n    'November',\r\n    'December'\r\n];\r\n\r\nexport const mmmArray: string[] = [\r\n    'Jan',\r\n    'Feb',\r\n    'Mar',\r\n    'Apr',\r\n    'May',\r\n    'Jun',\r\n    'Jul',\r\n    'Aug',\r\n    'Sep',\r\n    'Oct',\r\n    'Nov',\r\n    'Dec'\r\n];\r\n\r\nexport const mArray: string[] = [\r\n    'J',\r\n    'F',\r\n    'M',\r\n    'A',\r\n    'M',\r\n    'J',\r\n    'J',\r\n    'A',\r\n    'S',\r\n    'O',\r\n    'N',\r\n    'D'\r\n];\r\n\r\nconst daysPerMonth: number[] = [\r\n    31,\r\n    28,\r\n    31,\r\n    30,\r\n    31,\r\n    30,\r\n    31,\r\n    31,\r\n    30,\r\n    31,\r\n    30,\r\n    31\r\n];\r\n\r\n/**\r\n * Returns the month name given a month index.\r\n * @param month the month index (0 is Jan, 11 is Dec)\r\n * @returns the month string eg. 'January'\r\n */\r\nexport function month(month: number): string {\r\n    return monthArray[(Math.floor(month)) % 12];\r\n}\r\n\r\nexport function m(month: number): string {\r\n    return mArray[(Math.floor(month)) % 12];\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  CONVERSIONS\r\n////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Returns the number of days in the specified year accounting for leap years.\r\n * @param year the year to count the days.\r\n */\r\nexport function daysInYear(year: number): number {\r\n    if (isLeapYear(Math.floor(year))) { return 366; } else { return 365; }\r\n}\r\n\r\n/**\r\n * Returns the number of days in the specified month.\r\n * @param month the month index (0 is Jan, 11 is Dec)\r\n * @param year the year to consider for leap year purposes\r\n * @returns the number of days in the month\r\n */\r\nexport function daysInMonth(month: number, year: number): number {\r\n    if ((isLeapYear(year)) && (month == 1)) {//check leap Feb\r\n        return 29;\r\n    } else {\r\n        return daysPerMonth[(Math.floor(month)) % 12];\r\n    }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  ELAPSED AND REMAINING TIME UNITS\r\n////////////////////////////////////////////////////////////////\r\n\r\nexport function remainingDaysInYear(d: dayjs.Dayjs): number {\r\n    return dayjs(new Date(d.year() + 1, 0, 1)).diff(d, 'd', true);\r\n}\r\n\r\nexport function daysElapsedInYear(d: dayjs.Dayjs): number {\r\n    return d.diff(dayjs(new Date(d.year(), 0, 1)), 'd', true);\r\n}\r\n\r\nexport function remainingDaysInMonth(d: dayjs.Dayjs): number {\r\n    return dayjs(new Date(d.year(), d.month() + 1, 1)).diff(d, 'd', true);\r\n}\r\n\r\nexport function daysElapsedInMonth(d: dayjs.Dayjs): number {\r\n    return d.diff(dayjs(new Date(d.year(), d.month(), 1)), 'd', true);\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  DURATIONS AND SPANS\r\n////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * The number of different years the duration between start and end spans. \r\n * @param start the start date\r\n * @param end the end date\r\n */\r\nexport function spanYears(start: dayjs.Dayjs, end: dayjs.Dayjs): number {\r\n    if (start > end) {\r\n        return start.year() - end.year() + 1;\r\n    } else {\r\n        return end.year() - start.year() + 1;\r\n    }\r\n}\r\n\r\n/**\r\n * The number of different months the duration between start and end spans. \r\n * @param start the start date\r\n * @param end the end date\r\n */\r\nexport function spanMonths(start: dayjs.Dayjs, end: dayjs.Dayjs): number {\r\n\r\n    let d1: dayjs.Dayjs; let d2: dayjs.Dayjs;\r\n\r\n    if (start > end) { d1 = end; d2 = start; } else { d1 = start; d2 = end; }\r\n\r\n    if (d2.year() == d1.year()) {                //if they are in the same year, just do an index comparison\r\n        return d2.month() - d1.month() + 1;\r\n\r\n    } else if (d2.year() - d1.year() == 1) {     //if they are in consecutive years\r\n        return (monthsPerYear - d1.month()) + (d2.month() + 1);\r\n    } else {\r\n        //the number of months in the first year + \r\n        // the number of months in the middle year(s) + \r\n        // the number of months in the last year\r\n        return (monthsPerYear - d1.month()) + (monthsPerYear * (spanYears(d2, d1) - 2)) + (d2.month() + 1);\r\n\r\n    }\r\n\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  SUPPORT FUNCTIONS\r\n////////////////////////////////////////////////////////////////\r\n\r\n/**\r\n * Returns a Date at an epoch (POSIX) time of 0;\r\n * @returns a Date corresponding to midnight 1 January 1970;\r\n */\r\nexport function epoch0(): Date {\r\n    return new Date(1970, 1, 1);\r\n}\r\n\r\n/**\r\n * Is the year an ISO leap year?\r\n * @param year Gregorian and prolaptic Gregorian BCE calendar with defined 0 year.\r\n * @returns If the year is a leap year.\r\n */\r\nexport function isLeapYear(year: number): boolean {\r\n    return (Math.abs(year) % 4 == 0 && Math.abs(year) % 100 !== 0) || (Math.abs(year) % 400 == 0);\r\n}\r\n\r\n/**\r\n * Day.js MinMax wasn't working. Made my own ones in the meantime.\r\n * @param d An array of Dayjs objects\r\n * @returns the earliest one\r\n */\r\nexport function minDayjs(d: dayjs.Dayjs[]): dayjs.Dayjs {\r\n    let t: number[] = [];\r\n    for (let i = 0; i < d.length; i++) {\r\n        t.push(d[i].valueOf());\r\n    }    \r\n    return dayjs(Math.min(...t));\r\n}\r\n\r\n/**\r\n * Day.js MinMax wasn't working. Made my own ones in the meantime.\r\n * @param d An array of Dayjs objects\r\n * @returns the latest one\r\n */\r\nexport function maxDayjs(d: dayjs.Dayjs[]): dayjs.Dayjs {\r\n    let t: number[] = [];\r\n    for (let i = 0; i < d.length; i++) {\r\n        t.push(d[i].valueOf())\r\n    }\r\n    return dayjs(Math.max(...t));\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  UNUSED FUNCTIONS\r\n////////////////////////////////////////////////////////////////\r\n\r\n//dssdfsdf\r\n\r\n// /**\r\n//  * Returns the number of days in the epoch timeline between two dates.\r\n//  * @param start The start date.\r\n//  * @param end The end date.\r\n//  * @param round Rounds the number of days to the nearest integer. Rounds up if >0, does not round if == 0, rounds down otherwise.\r\n//  * @returns the number of days between the two dates rounded down.\r\n//  */\r\n// export function daysBetween(start: Date, end: Date, round?: number): number {\r\n//     if (round > 0) {\r\n//         return Math.ceil((end.valueOf() - start.valueOf()) / (\r\n//             millisPerSecond *\r\n//             secondsPerMinute *\r\n//             minutesPerHour *\r\n//             hoursPerDay));\r\n//     } else if ((round == 0) || (round == undefined)) {\r\n//         return (end.valueOf() - start.valueOf()) / (\r\n//             millisPerSecond *\r\n//             secondsPerMinute *\r\n//             minutesPerHour *\r\n//             hoursPerDay);\r\n//     } else {\r\n//         return Math.floor((end.valueOf() - start.valueOf()) / (\r\n//             millisPerSecond *\r\n//             secondsPerMinute *\r\n//             minutesPerHour *\r\n//             hoursPerDay));\r\n//     }\r\n\r\n// }\r\n\r\n// /**\r\n//  * Returns the number of months between two dates. TODO ROUND OPTIONS\r\n//  * @param start The start date.\r\n//  * @param end The end date.\r\n//  * @param round Rounds the number of months to the nearest integer. Rounds up if >0, does not round if == 0, rounds down otherwise.\r\n//  * @returns the number of days between the two dates rounded down.\r\n//  */\r\n// export function monthsBetween(start: Date, end: Date, round?: number): number {\r\n//     //let t: number = end.valueOf() - start.valueOf();\r\n//     let m: number[] = [start.getMonth(), end.getMonth()];\r\n\r\n//     //if they are in the same month\r\n//     if (m[0] == m[1]) {\r\n//         if (isLeapYear(start.getFullYear()) && m[0] == 1) { //we are in a leap february\r\n//             return roundOptions(\r\n//                 (daysPerMonth[m[0]] + 1) *\r\n//                 ((end.valueOf() - start.valueOf()) /\r\n//                     (millisPerSecond * secondsPerMinute * minutesPerHour * hoursPerDay))\r\n//                 , round);\r\n//         } else {\r\n//             return roundOptions(daysPerMonth[m[0]] *\r\n//                 ((end.valueOf() - start.valueOf()) /\r\n//                     (millisPerSecond * secondsPerMinute * minutesPerHour * hoursPerDay))\r\n//                 , round);\r\n//         }\r\n//     }\r\n\r\n//     //if they are in the same year\r\n//     if (yearsBetween(start, end, 0) < 1) {\r\n//         //proportion of first month\r\n//         let t: number = monthsBetween(start, new Date(start.getFullYear(),\r\n//             start.getMonth() + 1, 1, 0, 0, 0, 0), 0);\r\n\r\n//         //guard clause check that our for loop will run more then once\r\n//         if (m[1] - m[0] == 1) {//we only have one more month left, add the proportion of the second month\r\n//             return roundOptions(t + monthsBetween(end, new Date(end.getFullYear(),\r\n//                 end.getMonth() + 1, 1, 0, 0, 0, 0), 0), round);\r\n//         }\r\n\r\n//         //there are more than 2 months left\r\n//         //sum from the second month onwards to the second to last month\r\n//         for (let i = m[0] + 1; i < m[1] - 1; i++) {\r\n//             t += daysPerMonth[i];\r\n//         }\r\n\r\n//         //return and add the last proportion of the last month\r\n//         return roundOptions(t + monthsBetween(new Date(end.getFullYear(),\r\n//             end.getMonth() + 1, 1, 0, 0, 0, 0), end, 0), round);\r\n//     }\r\n\r\n//     //they are not in the same year\r\n//     //get the year number difference and proceed like with the above if statement\r\n\r\n//     //the months between now and the end of the year\r\n//     let t: number = monthsBetween(start, new Date(start.getFullYear() + 1, 0, 1, 0, 0, 0, 0));\r\n//     let y: number[] = [end.getFullYear(), start.getFullYear()]\r\n\r\n//     //if there are only 2 years spanned\r\n//     if (y[1] - y[0] == 1) {\r\n//         //add the time between the start of the last year and the end date\r\n//         return roundOptions(t + monthsBetween(new Date(end.getFullYear(), 0, 1, 0, 0, 0, 0), end, 0)\r\n//             , round);\r\n//     }\r\n\r\n//     //there are more than 2 years left\r\n//     t += ((m[1] - m[0]) - 2) * 12; //ignore the start and end years\r\n\r\n//     //return and add the proportion of the last year\r\n//     return roundOptions(t + monthsBetween(new Date(end.getFullYear(), 0, 1, 0, 0, 0, 0), end, 0)\r\n//         , round);\r\n// }\r\n\r\n// /**\r\n//  * Returns the number of years between two dates. NOT FULLY IMPLEMENTED\r\n//  * @param start The start date.\r\n//  * @param end The end date.\r\n//  * @param round Rounds the number of years to the nearest integer. Rounds up if >0, does not round if == 0, rounds down otherwise.\r\n//  * @returns the number of days between the two dates rounded down.\r\n//  */\r\n// export function yearsBetween(start: Date, end: Date, round?: number): number {\r\n//     //TODO get partial years\r\n//     return roundOptions(end.getFullYear() - start.getFullYear(), round);\r\n// }\r\n\r\n\r\n// export function numberOfLeapYearsBetween(startDay: number, endDay: number): number {\r\n//     //todo\r\n//     return 0;\r\n// }\r\n\r\n//BADLY NAMED\r\n// export function date(dayIndex: number): string {\r\n//     return '0000-00-00T00:00:00';\r\n// }\r\n\r\n// export function year(dayIndex: number): number {\r\n//     var deltaYears = Math.floor(dayIndex / totalDaysPerYear(2001));\r\n\r\n//     return 1970 + Math.floor(dayIndex / totalDaysPerYear(2001));\r\n// }\r\n\r\n// export function month(dayIndex: number): string {\r\n//     return '0000-00-00T00:00:00';\r\n// }\r\n\r\n// export function day(dayIndex: number): string {\r\n//     return '0000-00-00T00:00:00';\r\n// }\r\n//","//Class that contains properties and functions that deal with timeline and Offset\r\n//FUNCTIONALITY\r\n// Year support\r\n// Month support\r\n\r\n//TODO status and data datae lines?\r\n\r\nimport { min } from 'd3';\r\nimport * as dayjs from 'dayjs';\r\nimport * as Lib from './../src/lib';\r\nimport * as Time from './../src/time';\r\n\r\nexport class Timeline {\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Define members\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    //--------DEV--------//\r\n    verbose: boolean = false;\r\n    rightScrollbarWidth:number = 20; //TODO get rid of this hardcoded value!!\r\n\r\n    private d1: dayjs.Dayjs;\r\n    private d2: dayjs.Dayjs;\r\n    private status: dayjs.Dayjs;\r\n    private n_days: number;\r\n    private n_months: number;\r\n    private n_years: number;\r\n    private span_days: number;\r\n    private span_months: number;\r\n    private span_years: number;\r\n\r\n    //--------SCALE--------//\r\n    private dayScale: number;\r\n    private weekScale: number;\r\n    private yearScale: number;\r\n    private monthScale: number[];\r\n    private quarterScale: number[];\r\n\r\n    private width: number;\r\n    private height: number;\r\n\r\n    private ts: TimeScale;\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Get/Set\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    //simple getters and setters\r\n    public getStart(): dayjs.Dayjs { return this.d1; }\r\n    public getEnd(): dayjs.Dayjs { return this.d2; }\r\n    public getStatus(): dayjs.Dayjs { return this.status; }\r\n    public getDays(): number { return this.n_days; }\r\n    public getDayScale(): number { return this.dayScale; }\r\n    public getMonths(): number { return this.n_months; }\r\n    public getYears(): number { return this.n_years; }\r\n    public getTimeScale(): TimeScale { return this.ts; }\r\n    public getYearPadding(): number { return this.yearPadding; }\r\n    public getMonthPadding(): number { return this.monthPadding; }\r\n\r\n    public getWidth(): number { return this.width; }\r\n\r\n    //getters and setters with updates\r\n    public setYearPadding(padding: number) {\r\n\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  SVG Style\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    private yearPadding: number;\r\n    private monthPadding: number;\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Constructor\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    constructor(start: dayjs.Dayjs, end: dayjs.Dayjs, status: dayjs.Dayjs, minWidth: number) {\r\n        if (this.verbose) { console.log('LOG: Constructing Timeline Object'); }\r\n        this.defineTimeline(start, end, status, minWidth);\r\n    }\r\n\r\n    public defineTimeline(start: dayjs.Dayjs, end: dayjs.Dayjs, status: dayjs.Dayjs, minWidth: number) {\r\n        //check which date is larger and round to nearest day\r\n        if (start > end) {\r\n            this.d1 = end.startOf('d');\r\n            this.d2 = start.endOf('d');\r\n        } else {\r\n            this.d1 = start.startOf('d');\r\n            this.d2 = end.endOf('d');\r\n        }\r\n\r\n        this.status = status;\r\n\r\n        this.n_days = this.d2.diff(this.d1, 'd', true);\r\n        this.dayScale = 2;//default\r\n        this.width = Math.ceil(this.getDays() * this.getDayScale());\r\n\r\n        if (Math.ceil(this.n_days * this.dayScale) < minWidth) {//its going to be smaller than min\r\n            //set width to minWidth\r\n            this.width = minWidth - this.rightScrollbarWidth;\r\n            //set dayscale to match\r\n            this.dayScale =(minWidth-this.rightScrollbarWidth)/this.n_days;\r\n        }\r\n\r\n        this.n_years = this.d2.diff(this.d1, 'y', true);\r\n        this.n_months = this.d2.diff(this.d1, 'M', true);\r\n        // this.span_days;\r\n        this.span_months = Time.spanMonths(start, end);\r\n        this.span_years = Time.spanYears(start, end);\r\n\r\n        this.yearPadding = 5;\r\n        this.updateScaleFactors();\r\n        if (this.verbose) {\r\n            console.log('LOG: Timeline created from ' +\r\n                this.d1.toISOString() + ' to ' +\r\n                this.d2.toISOString() +\r\n                ' spanning ' +\r\n                this.n_days.toString() +\r\n                ' days.');\r\n\r\n            console.log('LOG: ' +\r\n                this.n_years + ' years or ' +\r\n                this.n_months + ' months or ' +\r\n                this.n_days + ' days.');\r\n\r\n            console.log('LOG: Timeline scale = ' + this.dayScale.toString());\r\n        }\r\n\r\n        this.ts = new TimeScale();\r\n        if (this.verbose) { console.log('LOG: Created TimeScale ts'); }\r\n\r\n        this.ts.yearScale = this.generateYears();\r\n        this.ts.monthScale = this.generateMonths();\r\n\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Timeline Manipulation Functions\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    /**\r\n     * Not yet implemented\r\n     * @param daysPerPixel the desired scale factor \r\n     */\r\n    public setDayScale(daysPerPixel: number) {\r\n        console.log(\"WARNING: Timeline.setDayScale(daysPerPixel: number) Not yet implemented.\")\r\n        this.dayScale = daysPerPixel;\r\n        this.updateScaleFactors()\r\n    }\r\n\r\n    public setDayScaleByContainerWidth(containerWidth: number) {\r\n\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Timeline Style Functions\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    /**\r\n     * Returns an array of YearSeparators based on the start and finish dates of the timeline.\r\n     * The text is currently left aligned only. (text-align: start;)\r\n     * TODO: consider if there needs to be start and end date arguments or if it should just read the member variables.\r\n     * \r\n     * @returns an array of YearSeparators which determine the content and positioning of Year \r\n     * display elements in the timeline based on the start and finish dates.\r\n     */\r\n    private generateYears(): YearSeparator[] {\r\n        if (this.verbose) { console.log('LOG: Generating YearSeparator array for timeline.'); }\r\n\r\n        //console.log(document.body.clientHeight);\r\n        let result: YearSeparator[];\r\n        let cumulativeOffset: number = 0;\r\n        let proportion: number;\r\n\r\n        //If the dates are in the same year, the loop will not return the correct value. Handle it here.      \r\n        if (this.span_years == 0) { //same year, return year\r\n            result = [new YearSeparator(this.d1.year().toString(), 0, this.yearPadding)];\r\n            if (this.verbose) {\r\n                console.log(result);\r\n                console.log('LOG: YearScale generation complete.');\r\n            }\r\n            return result;\r\n        }\r\n\r\n        //the dates are not in the same year, run this loop\r\n        result = [];\r\n        for (let i = 0; i < this.span_years; i++) {\r\n            if (this.verbose) { console.log('LOG: year index = ' + i); }\r\n\r\n            //check if we are considering the first or last year and calc the proportion of the section we want\r\n            if (i == 0) {//this is the first year, take the portion of that year and create the offset. TODO check if the text will overlap\r\n\r\n                proportion = Time.remainingDaysInYear(this.d1);\r\n                proportion = proportion / Time.daysInYear(this.d1.year());\r\n                if (this.verbose) { console.log('LOG: proportion = ' + Time.remainingDaysInYear(this.d1) + '/' + Time.daysInYear(this.d1.year()) + ' = ' + proportion); }\r\n\r\n            } else if (i == (this.span_years - 1)) { //this is the last year, take the last proportion to the beginning of the year. Same todo as above\r\n\r\n                proportion = Time.daysElapsedInYear(this.d2);\r\n                proportion = proportion / Time.daysInYear(this.d2.year());\r\n                if (this.verbose) { console.log('LOG: proportion = ' + Time.daysElapsedInYear(this.d2) + '/' + Time.daysInYear(this.d2.year()) + ' = ' + proportion); }\r\n\r\n            } else { //somewhere in the middle\r\n\r\n                proportion = 1;\r\n                if (this.verbose) { console.log('LOG: proportion = ' + proportion); }\r\n\r\n            }\r\n\r\n            result[i] = new YearSeparator((\r\n                this.d1.year() + i).toString(),\r\n                cumulativeOffset,\r\n                this.yearPadding\r\n            );\r\n            if (this.verbose) { console.log('LOG: created new YearSeparator(' + (this.d1.year() + i) + ', ' + cumulativeOffset + ') at this.ts.yearScale[' + i + ']'); }\r\n\r\n            cumulativeOffset += Time.daysInYear(this.d1.year() + i) * this.dayScale * proportion;\r\n        }\r\n\r\n        if (this.verbose) {\r\n            console.log(result);\r\n            console.log('LOG: YearScale generation complete.');\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n * Returns an array of MonthSeparators based on the start and finish dates of the timeline. \r\n * The text is currently middle aligned only. (text-align: middle;)\r\n * TODO: consider if there needs to be start and end date arguments or if it should just read the member variables.\r\n * \r\n * @returns an array of MonthSeparators which determine the content and positioning of Month \r\n * display elements in the timeline based on the start and finish dates.\r\n */\r\n    private generateMonths(): MonthSeparator[] {\r\n        if (this.verbose) { console.log('LOG: Generating MonthSeparator array for timeline.'); }\r\n\r\n        let result: MonthSeparator[];\r\n        let cumulativeOffset: number = 0;\r\n        let proportion: number;\r\n\r\n        //If the dates are in the same year, the loop will not return the correct value. Handle it here.      \r\n        if (this.span_months == 0) { //same month, return month\r\n            result = [new MonthSeparator(Time.month(this.d1.month()), 0, Time.daysInMonth(this.d1.month(), this.d1.year()) / 2)];\r\n            if (this.verbose) {\r\n                console.log(result);\r\n                console.log('LOG: MonthSeparator array generation complete.');\r\n            }\r\n            return result;\r\n        }\r\n\r\n        //the dates are not in the same month, run this loop\r\n        result = [];\r\n        for (let i = 0; i < this.span_months; i++) {\r\n\r\n            //check if we are considering the first or last month and calc the proportion of the section we want\r\n            if (i == 0) {//this is the first month, take the portion of that month and create the offset. TODO check if the text will overlap\r\n\r\n                proportion = Time.remainingDaysInMonth(this.d1);\r\n                proportion = proportion / Time.daysInMonth(this.d1.month(), this.d1.year());\r\n                if (this.verbose) { console.log('LOG: first proportion = ' + Time.remainingDaysInMonth(this.d1) + '/' + Time.daysInMonth(this.d1.month(), this.d1.year()) + ' = ' + proportion); }\r\n\r\n            } else if (i == (this.span_months - 1)) { //this is the last year, take the last proportion to the beginning of the year. Same todo as above\r\n\r\n                proportion = Time.daysElapsedInMonth(this.d2);\r\n                proportion = proportion / Time.daysInMonth(this.d2.month(), this.d2.year());\r\n                if (this.verbose) { console.log('LOG: last proportion = ' + Time.daysElapsedInMonth(this.d2) + '/' + Time.daysInMonth(this.d2.month(), this.d2.year()) + ' = ' + proportion); }\r\n\r\n            } else { //somewhere in the middle\r\n\r\n                proportion = 1;\r\n                if (this.verbose) { console.log('LOG: proportion = ' + proportion); }\r\n\r\n            }\r\n\r\n            let d: dayjs.Dayjs = this.d1.add(i, 'month');\r\n\r\n            result[i] = new MonthSeparator(\r\n                Time.m(d.month()),\r\n                cumulativeOffset,\r\n                Time.daysInMonth(d.month() + i, d.year()) / 2\r\n            );\r\n            if (this.verbose) { console.log('LOG: created new MonthSeparator(' + Time.month(d.month()) + ', ' + cumulativeOffset + ') at this.ts.monthScale[' + i + '] with dOffset ' + (Time.daysInMonth(d.month() + i, d.year()) * this.dayScale * proportion) + 'px'); }\r\n\r\n            cumulativeOffset += Time.daysInMonth(d.month(), d.year()) * this.dayScale * proportion;\r\n        }\r\n\r\n        //check small month dimension\r\n        if (result[1].offset < (0.75 * this.dayScale * Time.daysInMonth(this.d1.month() + 1, this.d1.year()))) {\r\n            result[0].text = '';\r\n        }\r\n\r\n        if (this.verbose) {\r\n            console.log(result);\r\n            console.log('LOG: MonthSeparator array generation complete.');\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Support Functions\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    /**\r\n     * Updates the weekScale, quarterScale, and yearScale member variables based on the dayScale member variable.\r\n     */\r\n    private updateScaleFactors() {\r\n        this.weekScale = this.dayScale * 7;\r\n        this.yearScale = this.dayScale * 365;\r\n        this.monthScale = [];\r\n        for (let i = 0; i < 12; i++) { this.monthScale[i] = this.dayScale[i] * Time.daysInMonth[i]; }\r\n        this.quarterScale = [];\r\n        this.quarterScale[0] = this.monthScale[0] + this.monthScale[1] + this.monthScale[2];\r\n        this.quarterScale[1] = this.monthScale[3] + this.monthScale[4] + this.monthScale[5];\r\n        this.quarterScale[2] = this.monthScale[6] + this.monthScale[7] + this.monthScale[8];\r\n        this.quarterScale[3] = this.monthScale[9] + this.monthScale[10] + this.monthScale[11];\r\n    }\r\n\r\n    /**\r\n     * Converts a Day.js date to a horizontal offset on the chart based on the Timeline scale.\r\n     * @param date the date to convert\r\n     * @returns the location from the left edge of the chart the input date corresponds to\r\n     */\r\n    public dateLocation(date: dayjs.Dayjs): number {\r\n        return date.diff(this.d1, 'd', true) * this.dayScale;\r\n    }\r\n\r\n    /**\r\n     * Converts the status date to a horizontal offset on the chart based on the Timeline scale. Similar to Timeline.dateLocation(date: dayjs.Dayjs).\r\n     * @returns The location from the left edge of the chart the current status date corresponds to\r\n     */\r\n    public statusDateTranslationPx(): string {\r\n        console.log('status',this.status);\r\n        return 'translate(' + this.dateLocation(this.status) + ')';\r\n    }\r\n\r\n    /**\r\n     * EXPERIMENTAL\r\n     */\r\n    public setStatus(status: dayjs.Dayjs) {\r\n        this.status = status;\r\n    }\r\n}\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  Support Classes and Interfaces\r\n////////////////////////////////////////////////////////////////\r\n\r\nexport interface ISeparator {\r\n    text: string;\r\n    offset: number;\r\n    textAnchorOffset: number;\r\n}\r\n\r\nexport class YearSeparator implements ISeparator {\r\n    text: string;\r\n    offset: number;\r\n    textAnchorOffset: number;\r\n\r\n    constructor(yearText: string, yearOffset: number, textAnchorOffset: number) {\r\n        this.text = yearText;\r\n        this.offset = yearOffset;\r\n        this.textAnchorOffset = textAnchorOffset;\r\n    }\r\n}\r\n\r\nexport class MonthSeparator implements ISeparator {\r\n    text: string;\r\n    offset: number;\r\n    textAnchorOffset: number;\r\n    constructor(monthText: string, monthOffset: number, textAnchorOffset: number) {\r\n        this.text = monthText;\r\n        this.offset = monthOffset;\r\n        this.textAnchorOffset = textAnchorOffset;\r\n\r\n    }\r\n}\r\n\r\nexport class TimeScale {\r\n    yearScale: YearSeparator[];\r\n    monthScale: MonthSeparator[];\r\n\r\n    constructor() {\r\n        this.yearScale = [];\r\n        this.monthScale = [];\r\n    }\r\n}","/*\r\n*  Power BI Visual CLI\r\n*\r\n*  Copyright (c) Microsoft Corporation\r\n*  All rights reserved.\r\n*  MIT License\r\n*\r\n*  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n*  of this software and associated documentation files (the ''Software''), to deal\r\n*  in the Software without restriction, including without limitation the rights\r\n*  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n*  copies of the Software, and to permit persons to whom the Software is\r\n*  furnished to do so, subject to the following conditions:\r\n*\r\n*  The above copyright notice and this permission notice shall be included in\r\n*  all copies or substantial portions of the Software.\r\n*\r\n*  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n*  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n*  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n*  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n*  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n*  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n*  THE SOFTWARE.\r\n*/\r\n\r\n//Feature TODO list:\r\n\r\n// sortable dataview + ids\r\n// Legend\r\n// \r\n// statusdate is today if none provided?\r\n//\r\n//tell the user if key fields are not valid\r\n//\r\n//dont draw the first year or month separator line if it is up against the table-chart separator\r\n//\r\n//lock scrolling to discrete steps (row height)\r\n//\r\n//dont draw the year if the start date is around december\r\n//\r\n//if the timeilne is to be shorter than the div width, scale it so it fits the whole div width\r\n//\r\n//handle missing value fields by determining values index\r\n//\r\n//\r\n//\r\n//\r\n//\r\n// MVP COMPLETE FOR INNOVATION SUBMISSION\r\n//\r\n//\r\n//\r\n\r\n'use strict';\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  Imports\r\n////////////////////////////////////////////////////////////////\r\n\r\nimport './../style/visual.less';\r\nimport powerbi from 'powerbi-visuals-api';\r\nimport VisualConstructorOptions = powerbi.extensibility.visual.VisualConstructorOptions;\r\nimport VisualUpdateOptions = powerbi.extensibility.visual.VisualUpdateOptions;\r\nimport IVisual = powerbi.extensibility.visual.IVisual;\r\nimport DataView = powerbi.DataView;\r\n\r\nimport { VisualSettings } from './settings';\r\n\r\nimport EnumerateVisualObjectInstancesOptions = powerbi.EnumerateVisualObjectInstancesOptions;\r\nimport VisualObjectInstance = powerbi.VisualObjectInstance;\r\nimport VisualObjectInstanceEnumeration = powerbi.VisualObjectInstanceEnumeration;\r\nimport VisualObjectInstanceEnumerationObject = powerbi.VisualObjectInstanceEnumerationObject;\r\n\r\nimport IVisualHost = powerbi.extensibility.IVisualHost;\r\nimport * as d3 from 'd3';\r\nimport { DSVRowAny, schemeSet3, style, text } from 'd3';\r\ntype Selection<T extends d3.BaseType> = d3.Selection<T, any, any, any>;\r\n\r\nimport * as Lib from './../src/lib';\r\nimport * as Time from './../src/time';\r\nimport { Timeline, TimeScale } from './../src/timeline';\r\nimport { Activity, ActivityStyle } from './../src/activity';\r\nimport { Configuration, ValueFields } from './../src/configuration';\r\n\r\nimport * as dayjs from 'dayjs';\r\n\r\n//UNIT TESTS\r\nimport * as jsUnit from './../tests/globalTests';\r\nimport { validationHelper } from 'powerbi-visuals-utils-dataviewutils';\r\nimport { CLIENT_RENEG_WINDOW } from 'tls';\r\n\r\n////////////////////////////////////////////////////////////////\r\n//  Begin class definition\r\n////////////////////////////////////////////////////////////////\r\n\r\nexport class Visual implements IVisual {\r\n\r\n    //////////////////////////////////////////////////////////////// Define members\r\n\r\n    private host: IVisualHost;\r\n    private body: Selection<any>;\r\n\r\n    //divs\r\n    private divHeader: Selection<HTMLDivElement>;\r\n    private divContent: Selection<HTMLDivElement>;\r\n    private content: Selection<HTMLDivElement>;\r\n    private divActivities: Selection<HTMLDivElement>;\r\n    private divActivityHeader: Selection<HTMLDivElement>;\r\n    private divActivityBody: Selection<HTMLDivElement>;\r\n    private divChartHeader: Selection<HTMLDivElement>;\r\n    private divChartBody: Selection<HTMLDivElement>;\r\n    private divChartContainer: Selection<HTMLDivElement>;\r\n\r\n    //tables\r\n\r\n    private activityTable: Selection<any>;\r\n\r\n    //svgs\r\n\r\n    private timelineSVG: Selection<SVGSVGElement>;\r\n    private ganttSVG: Selection<SVGSVGElement>;\r\n    //text\r\n\r\n    private bars: Selection<SVGSVGElement>;\r\n\r\n    ////////////////DEV VARS\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\r\n    private verbose: boolean = false; //verbose logging\r\n\r\n    private style: CSSStyleDeclaration;//should be a CSSStyleDeclaration\r\n\r\n    private timeline: Timeline;\r\n    private configuration: Configuration;\r\n\r\n    private start: dayjs.Dayjs;\r\n    private end: dayjs.Dayjs;\r\n    private status: dayjs.Dayjs;\r\n\r\n    private tlWidth: number;\r\n    private tlHeight: number;\r\n    private rowHeight: number;\r\n    private barHeight: number;\r\n    private barPadding: number;\r\n    private baselineHeightProportion: number;\r\n    private chartHeight: number;\r\n\r\n    private gMonths: Selection<SVGGElement>;\r\n    private gYears: Selection<SVGGElement>;\r\n\r\n    private maxDepth: number;\r\n\r\n    private settings: VisualSettings;\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  Constructor\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    constructor(options: VisualConstructorOptions) {\r\n        if (this.verbose) { console.log('LOG: Constructing Visual Object', options); }\r\n\r\n        //jsUnit.allTests();\r\n\r\n        this.maxDepth = 0;\r\n        this.style = getComputedStyle(document.querySelector(':root'));\r\n        this.setDefaultTimelineParams();\r\n        this.generateBody(options);\r\n        this.configuration = new Configuration();\r\n\r\n        //     this.target = options.element;\r\n        //     this.updateCount = 0;\r\n        //     if (document) {\r\n        //         const new_p: HTMLElement = document.createElement('p');\r\n        //         new_p.appendChild(document.createTextNode('Update count:'));\r\n        //         const new_em: HTMLElement = document.createElement('em');\r\n        //         this.textNode = document.createTextNode(this.updateCount.toString());\r\n        //         new_em.appendChild(this.textNode);\r\n        //         new_p.appendChild(new_em);\r\n        //         this.target.appendChild(new_p);\r\n        //      }\r\n    }\r\n\r\n    /**\r\n     * Sets the member variables start, end, and status to the beginning of this year, the end of this year, and now, respectively.\r\n     */\r\n    private setDefaultTimelineParams() {\r\n        let now: dayjs.Dayjs = dayjs(new Date());\r\n        this.start = now.startOf('year');\r\n        this.end = now.endOf('year');\r\n        this.status = now;\r\n    }\r\n\r\n    private generateBody(options: VisualConstructorOptions) {\r\n        //////////////////////////////////////////////////////////////// Create body level child elements\r\n        // help from lines 377 onwards at \r\n        //https://github.com/microsoft/powerbi-visuals-gantt/blob/master/src/gantt.ts\r\n\r\n        //the header including title, logos etc\r\n        this.divHeader = d3.select(options.element)\r\n            .append('div')\r\n            .attr('id', 'div-header')\r\n            .append('h4')\r\n            .text('TBH Gantt Chart Visual v0.2 (in development)');\r\n\r\n        //structure of the content below the header\r\n        this.content = d3.select(options.element)\r\n            .append('div')\r\n            .attr('id', 'div-content');\r\n\r\n        //////////////////////////////////////////////////////////////// Create elements under the header\r\n\r\n        var _this = this;\r\n\r\n        //div to hold the activity data in a table\r\n        this.divActivities = this.content\r\n            .append('div')\r\n            .attr('id', 'div-activities');\r\n\r\n        this.divActivityHeader = this.divActivities\r\n            .append('div')\r\n            .classed('div-content-header', true);\r\n\r\n        this.divActivityBody = this.divActivities\r\n            .append('div')\r\n            .classed('div-content-body', true)\r\n            .attr('id', 'div-activityTable')\r\n            .on('scroll', function () { _this.syncScroll('div-activityTable'); });\r\n        // .on('scroll', function () { _this.syncScrollTimelineTop('div-activityTable', false) })\r\n        // .on('wheel', function () { _this.syncScrollTimelineTop('div-activityTable', true) });\r\n\r\n        //div to hold the chart elements including background, bars, text, controls\r\n        this.divChartContainer = this.content\r\n            .append('div')\r\n            .attr('id', 'div-chart');\r\n\r\n        this.divChartHeader = this.divChartContainer\r\n            .append('div')\r\n            .attr('id', 'div-timeline')\r\n            .classed('div-content-header', true)\r\n            .on('scroll', function () { _this.syncScroll('div-content-header'); });\r\n        // .on('scroll', function () { _this.syncScrollTimelineLeft('div-timeline', false) })\r\n        // .on('wheel', function () { _this.syncScrollTimelineLeft('div-timeline', true) });\r\n\r\n        this.divChartBody = this.divChartContainer\r\n            .append('div')\r\n            .classed('div-content-body', true)\r\n            .attr('id', 'div-ganttChart')\r\n            .on('scroll', function () { _this.syncScroll('div-ganttChart'); });\r\n        // .on('scroll', function () { _this.syncScrollTimelineTop('div-ganttChart', false); })\r\n        // .on('wheel', function () { _this.syncScrollTimelineTop('div-ganttChart', true); })\r\n        // .on('scroll', function () { _this.syncScrollTimelineLeft('div-ganttChart', false); })\r\n        // .on('wheel', function () { _this.syncScrollTimelineLeft('div-ganttChart', true); });\r\n\r\n        //////////////////////////////////////////////////////////////// Create svg timeline\r\n\r\n        this.timeline = new Timeline(this.start, this.end, this.status, this.divChartHeader.node().getBoundingClientRect().width);\r\n\r\n        this.tlWidth = Math.ceil(this.timeline.getDays() * this.timeline.getDayScale());//cannot be less than div width!\r\n        this.tlHeight = Lib.pxToNumber(this.style.getPropertyValue('--timelineHeight'));\r\n        this.rowHeight = Lib.pxToNumber(this.style.getPropertyValue('--rowHeight'));\r\n        this.barPadding = 2;\r\n        this.barHeight = this.rowHeight - 2* this.barPadding;\r\n        this.baselineHeightProportion = 0.5;\r\n\r\n        this.timelineSVG = this.divChartHeader\r\n            .append('svg')\r\n            .attr('height', Lib.px(this.tlHeight))\r\n            .attr('width', Lib.px(this.tlWidth))\r\n            .attr('id', 'svg-tl');\r\n\r\n        this.gMonths = this.timelineSVG.append('g')\r\n            .classed('g-tl', true);\r\n\r\n        this.gYears = this.timelineSVG.append('g')\r\n            .classed('g-tl', true);\r\n\r\n        this.bars = this.divChartBody\r\n            .append('g')\r\n            .append('svg')\r\n            .attr('id', 'svg-bars');\r\n\r\n        //////////////////////////////////////////////////////////////// Create activities table\r\n\r\n        this.divActivityHeader\r\n            .append('table')\r\n            .attr('id', 'table-activityHeader')\r\n            .append('tr');\r\n\r\n        this.divActivityBody\r\n            .append('table')\r\n            .attr('id', 'table-activities');\r\n    }\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  UPDATE VISUAL ON REFRESH\r\n    ////////////////////////////////////////////////////////////////\r\n\r\n    public update(options: VisualUpdateOptions) {\r\n        //////////////////////////////////////////////////////////////// Setup Update loop\r\n        this.settings = Visual.parseSettings(options && options.dataViews && options.dataViews[0]);\r\n\r\n        if (this.verbose) { console.log('Visual update()', options); }\r\n        let dataView: DataView = options.dataViews[0];\r\n        //manually destroy unjoin()ed items (i know its not the best way to do it ...)\r\n        if (document.getElementById('statusLine-tl') != null) { document.getElementById('statusLine-tl').remove(); }\r\n        if (document.getElementById('statusLine-chart') != null) { document.getElementById('statusLine-chart').remove(); }\r\n\r\n        //////////////////////////////////////////////////////////////// Get a default timeline\r\n        this.status = dayjs(new Date(2022, 6, 25));\r\n        let acts: Activity[] = this.checkConfiguration(dataView);\r\n        let ts: TimeScale = this.drawTimeline();\r\n\r\n        //////////////////////////////////////////////////////////////// choose to draw the chart based on config\r\n        this.configuration.logConfig();\r\n        if (this.configuration.field(ValueFields.START) && this.configuration.field(ValueFields.END)) {\r\n            this.drawChart(acts, ts, this.timelineSVG);\r\n        } else {\r\n            this.divChartBody.html(null);\r\n        }\r\n\r\n        //////////////////////////////////////////////////////////////// draw table\r\n        this.drawTable(acts);\r\n\r\n        //////////////////////////////////////////////////////////////// unused capabilities object enumeration\r\n        // let ops : EnumerateVisualObjectInstancesOptions = new EnumerateVisualObjectInstancesOptions('subTotals')\r\n        // let o: VisualObjectInstanceEnumeration = this.enumerateObjectInstances(EnumerateVisualObjectInstancesOptions);\r\n    }\r\n\r\n    /**\r\n     * Returns the configuration of the desired graph to determine which elements to render based on the data in dataView.\r\n     * @param dataView The DataView object to configure the visual against.\r\n     */\r\n    private checkConfiguration(dataView: DataView): Activity[] {\r\n\r\n        console.log('LOG: Checking Configuration');\r\n\r\n        if (this.verbose) {\r\n            console.log('LOG: DATAVIEW CONFIGURATION');\r\n            console.log('LOG: number of heirachy levels: ' + dataView.matrix.rows.levels.length);\r\n        }\r\n\r\n        this.configuration.checkRoles(dataView.matrix.valueSources);\r\n        // this.configuration.logConfig();\r\n\r\n        //check verbose\r\n        console.log('dataView.matrix.rows.root', dataView.matrix.rows.root);\r\n        let acts: Activity[] = [];\r\n        this.dfsPreorder(acts, dataView.matrix.rows.root.children[0]);\r\n\r\n        //console.log('LOG: DFS: ',acts);\r\n        \r\n        acts = this.trimHeirarchy(acts);\r\n\r\n        //console.log('LOG: Trimmed: ',acts);\r\n\r\n        if (this.configuration.field(ValueFields.START) && this.configuration.field(ValueFields.END)) {\r\n            let dt: dayjs.Dayjs[] = this.summariseDates(acts, dataView);\r\n            this.start = dt[0];\r\n            this.end = dt[1];\r\n            this.status = dt[2];//WARNING: assuming all statuses are the same!!\r\n        } else {\r\n            this.setDefaultTimelineParams();\r\n        }\r\n\r\n        // if(this.configuration.field(ValueFields.STATUSDATE)){ this.status =  };\r\n\r\n        //console.log('Activity array', acts);\r\n        console.log('LOG: DONE Checking Configuration');\r\n        return acts;\r\n    }\r\n\r\n    /**\r\n     * Summarises the higher level matrix elements by taking its childrens' minimum start dates and maximum end dates.\r\n     * TODO: abstract this to take any number of custom fields.\r\n     * \r\n     * @param acts the the DFS-derived Activity array to summarise\r\n     * @returns the earliest start date and the latest finish date of the schedule\r\n     */\r\n    private summariseDates(acts: Activity[], dataView: DataView): dayjs.Dayjs[] {\r\n\r\n        \r\n        let aggregateBuffer: dayjs.Dayjs[][] = [];\r\n        let currentLevel: number = acts[acts.length - 1].getLevel();\r\n        let globalStart: dayjs.Dayjs[] = [];\r\n        let globalEnd: dayjs.Dayjs[] = [];\r\n        let globalStatus: dayjs.Dayjs[] = [];\r\n        // console.log(this.resetAggregateBuffer(dataView));\r\n\r\n        //////////////////////////////////////////////////////////////// start\r\n       \r\n        aggregateBuffer = this.resetAggregateBuffer(dataView);\r\n        for (let i = 0; i < acts.length; i++) {\r\n            let l: number = acts[acts.length - i - 1].getLevel();\r\n            if (l < currentLevel) {// going up indents, summarise, add self to higher buffer\r\n                acts[acts.length - i - 1].setStart(Time.minDayjs(aggregateBuffer[l + 1]));\r\n                //console.log(l, aggregateBuffer[l + 1]);\r\n                //console.log(l, 'Summarise Start', Time.minDayjs(aggregateBuffer[l + 1]).format('DD/MM/YY'));\r\n                aggregateBuffer[l].push(acts[acts.length - i - 1].getStart());\r\n                currentLevel = l;\r\n            } else if (l > currentLevel) {//going down indents, clear buffer, add self\r\n                currentLevel = l;\r\n                aggregateBuffer[l] = [(acts[acts.length - i - 1].getStart())];\r\n            } else {//same indent, add to buffer\r\n                aggregateBuffer[l].push(acts[acts.length - i - 1].getStart());\r\n            }\r\n            if (l == 0) {\r\n                globalStart.push(acts[acts.length - i - 1].getStart());\r\n            }\r\n            //console.log(aggregateBuffer[l]);\r\n            //console.log(acts[acts.length - i - 1].getLevel(), acts[acts.length - i - 1].getName(), acts.length - i - 1, aggregateBuffer);\r\n        }\r\n        \r\n        //////////////////////////////////////////////////////////////// end\r\n\r\n        currentLevel = acts[acts.length - 1].getLevel();\r\n        aggregateBuffer = this.resetAggregateBuffer(dataView);\r\n        for (let i = 0; i < acts.length; i++) {\r\n            let l: number = acts[acts.length - i - 1].getLevel();\r\n\r\n            if (l < currentLevel) {// going up indents, summarise, add self to higher buffer\r\n                acts[acts.length - i - 1].setEnd(Time.maxDayjs(aggregateBuffer[l + 1]));\r\n                //console.log(l, 'Summarise End', Time.maxDayjs(aggregateBuffer[l + 1]).format('DD/MM/YY'));\r\n                aggregateBuffer[l].push(acts[acts.length - i - 1].getEnd());\r\n                currentLevel = l;\r\n            } else if (l > currentLevel) {//going down indents, clear buffer, add self\r\n                currentLevel = l;\r\n                aggregateBuffer[l] = [(acts[acts.length - i - 1].getEnd())];\r\n            } else {//same indent, add to buffer\r\n                aggregateBuffer[l].push(acts[acts.length - i - 1].getEnd());\r\n            }\r\n            if (l == 0) {\r\n                globalEnd.push(acts[acts.length - i - 1].getEnd());\r\n            }\r\n            //console.log(aggregateBuffer[l]);\r\n            //console.log(acts[acts.length - i - 1].getLevel(), acts[acts.length - i - 1].getName(), acts.length - i - 1, aggregateBuffer);\r\n        }\r\n\r\n        //////////////////////////////////////////////////////////////// status\r\n        if (this.configuration.field(ValueFields.STATUSDATE)) {\r\n            currentLevel = acts[acts.length - 1].getLevel();\r\n            aggregateBuffer = this.resetAggregateBuffer(dataView);\r\n            for (let i = 0; i < acts.length; i++) {\r\n                let l: number = acts[acts.length - i - 1].getLevel();\r\n\r\n                if (l < currentLevel) {// going up indents, summarise, add self to higher buffer\r\n                    acts[acts.length - i - 1].setGlobalStatus(Time.minDayjs(aggregateBuffer[l + 1]));\r\n                    //console.log(l, 'Summarise End', Time.maxDayjs(aggregateBuffer[l + 1]).format('DD/MM/YY'));                \r\n                    aggregateBuffer[l].push(acts[acts.length - i - 1].getGlobalStatus());\r\n                    currentLevel = l;\r\n                } else if (l > currentLevel) {//going down indents, clear buffer, add self\r\n                    currentLevel = l;\r\n                aggregateBuffer[l] = [(acts[acts.length - i - 1].getGlobalStatus())];\r\n            } else {//same indent, add to buffer\r\n                aggregateBuffer[l].push(acts[acts.length - i - 1].getGlobalStatus());\r\n            }\r\n            if (l == 0) {\r\n                globalStatus.push(acts[acts.length - i - 1].getGlobalStatus());\r\n            }\r\n            //console.log(aggregateBuffer[l]);\r\n            //console.log(acts[acts.length - i - 1].getLevel(), acts[acts.length - i - 1].getName(), acts.length - i - 1, aggregateBuffer);\r\n        }\r\n    }\r\n        //console.log(globalStart);\r\n        //console.log(globalEnd);\r\n\r\n        return [Time.minDayjs(globalStart), Time.minDayjs(globalEnd), Time.minDayjs(globalStatus)];\r\n    }\r\n\r\n    /**\r\n     * Returns an array of empty arrays. The number of empty arrays is equal to the 1-indexed depth of the DataView tree.\r\n     * @param dataView the examinable DataView\r\n     * @returns a 2D array of size depth x 0\r\n     */\r\n    private resetAggregateBuffer(dataView: DataView): dayjs.Dayjs[][] {\r\n        let x: dayjs.Dayjs[][] = [];\r\n        for (let i = 0; i <= this.maxDepth; i++) { x[i] = []; }\r\n        return x;\r\n    }\r\n\r\n    /**\r\n     * This function takes the Activity array derived from a Depth-First Search of the DataView matrix data structure (tree) \r\n     * and moves deeper elements to the branch position of the first element on the branch with an empty name string.\r\n     * \r\n     * Use this function to reduce a tree when the leaf activity is always at a certain depth, regardless of what its true \r\n     * WBS Outline Level is.\r\n     * \r\n     * @param acts the DFS-derived Activity array to reduce\r\n     * @returns the reduced Activity array\r\n     */\r\n    private reduceHeirarchy(acts: Activity[]): Activity[] {\r\n        console.log(\"LOG: Reducing heiracrchy\");\r\n        let a: Activity[] = [];\r\n        let l: number;\r\n        let target: number;\r\n\r\n        for (let i = 0; i < acts.length; i++) {\r\n            l = acts[i].getLevel();\r\n\r\n            // console.log('LOG: i=' + i + ', level = ' + l +\r\n            //     ', target = ' + target +\r\n            //     ', name? = ' + (acts[i].getName() != '') +\r\n            //     ', target? = ' + (target != null) +\r\n            //     ', name = ' + acts[i].getName());\r\n\r\n            //no target, no name\r\n            if ((target == null) && (acts[i].getName() == '')) {\r\n                target = acts[i].getLevel();\r\n            }\r\n\r\n            //has target, has name\r\n            if ((target != null) && (acts[i].getName() != '')) {\r\n                acts[i].setLevel(target);\r\n                target = null;\r\n            }\r\n\r\n            if (acts[i].getName() != '') {\r\n                a.push(acts[i]);\r\n            }\r\n        }\r\n\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * This function takes the Activity array derived from a Depth-First Search of the DataView matrix data structure (tree) \r\n     * and trims invalid branches. An invalid branch is defined as a branch of the tree with a relative root node that has an empty\r\n     * name string.\r\n     * \r\n     * Use this function to rim branches off the tree and eliminate anything under a blank WBS heading, and eliminate empty activities.\r\n     * \r\n     * @param acts the DFS-derived Activity array to trim\r\n     * @returns the reduced Activity array\r\n     */\r\n    private trimHeirarchy(acts: Activity[]): Activity[] {\r\n        console.log(\"LOG: Trimming heiracrchy\");\r\n        let a: Activity[] = [];\r\n        let onInvalidBranch: boolean = false;\r\n        let target: number;\r\n\r\n        for (let i = 0; i < acts.length; i++) {\r\n            // console.log('LOG: i=' + i + ', level = ' + acts[i].getLevel() +\r\n            //     ', target = ' + onInvalidBranch +\r\n            //     ', name? = ' + (acts[i].getName() != '') +\r\n            //     ', onInvalidBranch? = ' + onInvalidBranch +\r\n            //     ', name = ' + acts[i].getName());\r\n\r\n            //we have reached another node of the same level as the faulty node\r\n            if (onInvalidBranch && (acts[i].getLevel() <= target)) { onInvalidBranch = false; }\r\n\r\n            if (acts[i].getName() == '') { //we have an invalid node. trim the branch by ignoring everything until we reach a node of the same level\r\n                onInvalidBranch = true;\r\n                target = acts[i].getLevel();\r\n            }\r\n\r\n            if (!onInvalidBranch) {\r\n                a.push(acts[i]);\r\n            }\r\n        }\r\n        return a;\r\n    }\r\n\r\n    /**\r\n     * Performs a Pre-order Depth-First Search of the DataViewMatrixNode tree structure assuming a general tree structure.\r\n     * The nodes are arranged into a linear array based on the DFS traversal algorithm, mimicking the view observed in a Gantt chart\r\n     * and in other Scheduling software.\r\n     * @param activities The Activity array to output the list of nodes in\r\n     * @param node the DataViewMatrixNode to consider as the root node of the tree\r\n     */\r\n    private dfsPreorder(activities: Activity[], node: powerbi.DataViewMatrixNode) {\r\n        this.updateMaxDepth(node.level);\r\n\r\n        if (node.children == null) {\r\n\r\n            //mandatory fields\r\n            let start: dayjs.Dayjs = null;\r\n            let end: dayjs.Dayjs = null;\r\n            let status: dayjs.Dayjs = null;\r\n\r\n            //check if safe to access .value\r\n            if(this.configuration.field(ValueFields.START)){ start = dayjs(node.values[this.configuration.getValueMap(ValueFields.START)].value as Date);}\r\n            if(this.configuration.field(ValueFields.END)){ end = dayjs(node.values[this.configuration.getValueMap(ValueFields.END)].value as Date);}\r\n            if(this.configuration.field(ValueFields.STATUSDATE)){ status = dayjs(node.values[this.configuration.getValueMap(ValueFields.STATUSDATE)].value as Date);}\r\n           \r\n            //create activity with mandatory fields\r\n            //console.log(\"LOG: RECURSION: level = \" + node.level + ', name = ' + this.nodeName(node) + ', start = ' + node.values[0].value);\r\n            let a: Activity = new Activity(\r\n                this.nodeName(node),\r\n                node.level,\r\n                start,\r\n                end,\r\n                status);\r\n\r\n            //add optional fields\r\n            if(this.configuration.field(ValueFields.BASELINESTART)){ \r\n                a.setBaselineStart(dayjs(node.values[this.configuration.getValueMap(ValueFields.BASELINESTART)].value as Date));\r\n            }\r\n            if(this.configuration.field(ValueFields.BASELINEFINISH)){ \r\n                a.setBaselineFinish(dayjs(node.values[this.configuration.getValueMap(ValueFields.BASELINEFINISH)].value as Date));\r\n            }\r\n\r\n            //push Activity\r\n            activities.push(a);\r\n\r\n        } else {\r\n            activities.push(new Activity(\r\n                this.nodeName(node),\r\n                node.level,\r\n                null,\r\n                null,\r\n                null\r\n                ));\r\n            for (let i = 0; i < node.children.length; i++) {\r\n                this.dfsPreorder(activities, node.children[i]);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Updates the variable this.maxDepth to the specified number.\r\n     * @param d the new depth\r\n     */\r\n    private updateMaxDepth(d: number) {\r\n        if (d > this.maxDepth) { this.maxDepth = d };\r\n    }\r\n\r\n    /**\r\n     * Returns the node's name if it is not null, and returns an empty string otherwise.\r\n     * @param node the node to extract the name from\r\n     * @returns an empty string if the node's value member is null, and the string representation of node.value if it is not null.\r\n     */\r\n    private nodeName(node: powerbi.DataViewMatrixNode): string {\r\n        if (node.value == null) {\r\n            return '';\r\n        } else {\r\n            return node.value.toString();\r\n        }\r\n    }\r\n\r\n    private drawTimeline(): TimeScale {\r\n        console.log('LOG: Drawing Timeline from ' + this.start.format('DD/MM/YY') + ' to ' + this.end.format('DD/MM/YY'));\r\n\r\n        this.timeline.defineTimeline(this.start, this.end, this.status, this.divChartHeader.node().getBoundingClientRect().width);\r\n    \r\n        // todo reduce duplicate code vvv\r\n        \r\n        this.tlWidth = this.timeline.getWidth();\r\n\r\n        let ts: TimeScale = this.timeline.getTimeScale();\r\n\r\n        this.timelineSVG\r\n            .attr('height', Lib.px(this.tlHeight))\r\n            .attr('width', Lib.px(this.tlWidth));\r\n\r\n        //////////////////////////////////////////////////////////////// YearText\r\n        this.gYears.selectAll('text')\r\n            .data(ts.yearScale)\r\n            .join('text')\r\n            .attr('x', function (d) {\r\n                return Lib.px(d.offset + d.textAnchorOffset);\r\n            })\r\n            .attr('y', '0px')\r\n            .text(function (d) { return d.text; })\r\n            .attr('text-anchor', 'top')\r\n            .attr('alignment-baseline', 'hanging')\r\n            .classed('yearText', true);\r\n\r\n        //////////////////////////////////////////////////////////////// YearLine\r\n        this.gYears.selectAll('line')\r\n            .data(ts.yearScale)\r\n            .join('line')\r\n            .attr('x1', function (d) { return Lib.px(d.offset); })\r\n            .attr('y1', '0px')\r\n            .attr('x2', function (d) { return Lib.px(d.offset); })\r\n            .attr('y2', this.tlHeight)\r\n            .attr('stroke-width', '2px')\r\n            .attr('style', 'stroke:black');\r\n\r\n        //////////////////////////////////////////////////////////////// MonthText\r\n        this.gMonths.selectAll('text')\r\n            .data(ts.monthScale)\r\n            .join('text')\r\n            .attr('x', function (d) { return Lib.px(d.offset + d.textAnchorOffset); })\r\n            .attr('y', Lib.px(this.tlHeight / 2))\r\n            .text(function (d) { return d.text; })\r\n            .attr('text-anchor', 'top')\r\n            .attr('alignment-baseline', 'hanging')\r\n            .attr('text-anchor', 'middle')\r\n            .classed('monthText', true);\r\n\r\n        //////////////////////////////////////////////////////////////// YMonthLine\r\n        this.gMonths.selectAll('line')\r\n            .data(ts.monthScale)\r\n            .join('line')\r\n            .attr('x1', function (d) { return Lib.px(d.offset); })\r\n            .attr('y1', Lib.px(this.tlHeight / 2))\r\n            .attr('x2', function (d) { return Lib.px(d.offset); })\r\n            .attr('y2', this.tlHeight)\r\n            .attr('style', 'stroke:gray');\r\n\r\n\r\n        console.log('LOG: DONE Drawing Timeline');\r\n        return ts;\r\n    }\r\n\r\n    private drawChart(acts: Activity[], ts: TimeScale, gantt: Selection<SVGSVGElement>) {\r\n\r\n        console.log('LOG: Drawing Chart');\r\n\r\n        ////////////////////////////////////////////////////////////////\r\n        //  Create #table-activities\r\n        ////////////////////////////////////////////////////////////////\r\n\r\n        // https://stackoverflow.com/questions/43356213/understanding-enter-and-exit\r\n        // https://www.tutorialsteacher.com/d3js/function-of-data-in-d3js\r\n        // https://stackoverflow.com/questions/21485981/appending-multiple-non-nested-elements-for-each-data-member-with-d3-js/33809812#33809812\r\n        // https://stackoverflow.com/questions/37583275/how-to-append-multiple-child-elements-to-a-div-in-d3-js?noredirect=1&lq=1\r\n        // https://stackoverflow.com/questions/21485981/appending-multiple-non-nested-elements-for-each-data-member-with-d3-js\r\n\r\n        var _this = this; //get a reference to self so that d3's anonymous callbacks can access member functions\r\n\r\n        this.chartHeight = acts.length * this.rowHeight;\r\n\r\n         //////////////////////////////////////////////////////////////// Grid\r\n\r\n         this.bars.selectAll('.grid-months-v')\r\n         .data(ts.monthScale).join('line')\r\n         .attr('x1', function (d) { return Lib.px(d.offset); })\r\n         .attr('y1', '0px')\r\n         .attr('x2', function (d) {\r\n             return Lib.px(d.offset);\r\n         })\r\n         .attr('y2', Lib.px(this.chartHeight))\r\n         .classed('grid-months-v', true)\r\n         .attr('style', 'stroke:gray');\r\n\r\n     this.bars.selectAll('.grid-years-v')\r\n         .data(ts.yearScale).join('line')\r\n         .attr('x1', function (d) { return Lib.px(d.offset); })\r\n         .attr('y1', '0px')\r\n         .attr('x2', function (d) {\r\n             return Lib.px(d.offset);\r\n         })\r\n         .attr('y2', Lib.px(this.chartHeight))\r\n         .classed('grid-years-v', true)\r\n         .attr('style', 'stroke:gray');\r\n\r\n         this.bars.selectAll('.grid-v')\r\n         .data(acts).join('line')\r\n         .attr('x1', '0px')\r\n         .attr('y1', function(d,i){ return Lib.px(_this.rowHeight * i) })\r\n         .attr('x2', this.tlWidth)\r\n         .attr('y2', function(d,i){ return Lib.px(_this.rowHeight * i) })\r\n         .classed('grid-v', true)\r\n         .attr('style', 'stroke:gray');\r\n\r\n        //////////////////////////////////////////////////////////////// bars\r\n\r\n        this.bars\r\n            .attr('width', Lib.px(this.tlWidth))\r\n            .attr('height', Lib.px(this.rowHeight * acts.length));\r\n\r\n        this.bars.selectAll('rect')\r\n            .data(acts)\r\n            .join('rect')\r\n            .attr('x', function (d) {\r\n                return Lib.px(_this.timeline.dateLocation(d.getStart()));\r\n            })\r\n            .attr('height', Lib.px(this.barHeight))\r\n            .attr('width', function (d) {\r\n                return Lib.px(_this.timeline.dateLocation(d.getEnd()) - _this.timeline.dateLocation(d.getStart()));\r\n            })\r\n            .attr('y', function (d, i) { return Lib.px((_this.rowHeight * i) + _this.barPadding) })\r\n            .attr('rx', '3px')\r\n            .attr('ry', '3px')\r\n            .classed('activityBar', true)\r\n            .attr('fill', function (d) {\r\n                switch (d.getLevel()) {\r\n                    case 0: return '#2A588E';\r\n                    case 1: return '#3B6064';\r\n                    case 2: return '#55828B';\r\n                    case 3: return '#87BBA2';\r\n                    case 4: return '#A4E1C9';\r\n                    default: return 'gray';\r\n                }\r\n            });\r\n\r\n            console.log(this.bars\r\n            .selectAll('.baseline').data(acts).join('rect')\r\n            .attr('x', function (d) {\r\n                return (d.getBaselineStart()==null) ? '0px' : Lib.px(_this.timeline.dateLocation(d.getBaselineStart()));\r\n            })\r\n            .attr('height', Lib.px( (this.barHeight)*this.baselineHeightProportion ))\r\n            .attr('width', function (d) {\r\n                return (d.getBaselineFinish()==null) ? '0px' : Lib.px(_this.timeline.dateLocation(d.getBaselineFinish()));\r\n            })\r\n            .attr('y', function (d, i) { return Lib.px(\r\n                (_this.rowHeight * i) + \r\n                _this.barPadding - \r\n                _this.baselineHeightProportion * ( _this.rowHeight + 2*_this.barPadding ))})\r\n            .attr('rx', '3px')\r\n            .attr('ry', '3px')\r\n            .classed('activityBar', true)\r\n            .classed('baseline', true)\r\n            .attr('fill', '#696969')\r\n            );\r\n\r\n        // this.bars.selectAll(\"rect\").selectAll(\".baseline\")\r\n        // .data(acts)\r\n        // .join('rect')\r\n        // .attr('x', function (d) {\r\n        //     return Lib.px(_this.timeline.dateLocation(d.getStart()));\r\n        // })\r\n        // .attr('height', Lib.px(this.rowHeight - 4))\r\n        // .attr('width', function (d) {\r\n        //     return Lib.px(_this.timeline.dateLocation(d.getEnd()) - _this.timeline.dateLocation(d.getStart()));\r\n        // })\r\n        // .attr('y', function (d, i) { return Lib.px((_this.rowHeight * i) + 2) })\r\n        // .attr('rx', '3px')\r\n        // .attr('ry', '3px')\r\n        // .classed('activityBar', true)\r\n        // .classed('baseline', true)\r\n        // .attr('fill', '#696969');\r\n\r\n\r\n        //////////////////////////////////////////////////////////////// Status\r\n        //the status lines are destroyed and recreated every update(). I couldn't find a way to use .join or .update\r\n\r\n        if(this.configuration.field(ValueFields.STATUSDATE)){\r\n\r\n            this.timelineSVG\r\n            .append('line')\r\n            .attr('x1', '0px')\r\n            .attr('x2', '0px')\r\n            .attr('y1', '0px')\r\n            .attr('y2', Lib.px(this.tlHeight))\r\n            .attr('id', 'statusLine-tl')\r\n            .attr('transform', this.timeline.statusDateTranslationPx())\r\n            .attr('style', 'stroke: red');\r\n\r\n        this.bars\r\n            .append('line')\r\n            .attr('x1', '0px')\r\n            .attr('x2', '0px')\r\n            .attr('y1', '0px')\r\n            .attr('y2', Lib.px(this.chartHeight))\r\n            .attr('id', 'statusLine-chart')\r\n            .attr('transform', this.timeline.statusDateTranslationPx())\r\n            .attr('style', 'stroke: red');\r\n        }\r\n        \r\n\r\n        console.log('LOG: DONE Drawing Chart');\r\n    }\r\n\r\n    private drawTable(acts: Activity[]) {\r\n        //////////////////////////////////////////////////////////////// Choose columns based off config\r\n        console.log('LOG: Drawing Table');\r\n        var _this = this;\r\n        //TODO: WARNING: implement named headers instead of hard code!!\r\n        // let s: string[] = this.configuration.getDisplayNames();\r\n        let s: string[] = ['Activity Name'];\r\n\r\n        this.divActivityHeader.select('tr').selectAll('th').data(s).join('th').text(d => d);\r\n        this.divActivityHeader.select('th').classed('col-name', true);\r\n\r\n        //create the number of trs required.\r\n        this.divActivityBody\r\n            .select('table')\r\n            .selectAll('tr')\r\n            .data(acts)\r\n            .join('tr')\r\n            .classed('tr-activity', true);\r\n\r\n        var td = this.divActivityBody.selectAll('.tr-activity')\r\n            .selectAll('td')//select all tds, there are 0\r\n            .data(function (d: Activity) { return [d.getTableText()[0]]; })//THIS DATA COMES FROM THE TR's _data_ PROPERTY\r\n            .join('td')\r\n            .classed('col-name', true)\r\n            .text(function (d) { return d; });\r\n\r\n        //this is a workaround since I couldnt get d3.data(acts).classed(function (d) { return d.getLevel().toString();}) working due to an error\r\n        // (d: any) => string is not compatible with type string...\r\n        // search for @indentTypeMismatch in activity.ts\r\n        d3.selectAll('.col-name').attr('min-width', Lib.px(this.divActivityBody.node().getBoundingClientRect().width));\r\n\r\n        d3.select('#table-activities').selectAll('.col-name').data(acts).attr('class', function (d: Activity) {\r\n            if (d.getLevel() == _this.maxDepth) {\r\n                return d.getLevelString() + \" leaf\";\r\n            } else {\r\n                return d.getLevelString();\r\n            }\r\n        }\r\n        );\r\n        td.classed('col-name', true);\r\n\r\n        // tr.selectAll('.td-start')//select all tds, there are 0\r\n        //     .data(function (d) { return d.getTableText()[1]; })//THIS DATA COMES FROM THE TR's _data_ PROPERTY\r\n        //     .enter()\r\n        //     .append('td')\r\n        //     .classed('td-start');\r\n\r\n        // tr.selectAll('.td-end')//select all tds, there are 0\r\n        //     .data(function (d) { return d.getTableText()[2]; })//THIS DATA COMES FROM THE TR's _data_ PROPERTY\r\n        //     .enter()\r\n        //     .append('td')\r\n        //     .classed('td-end');\r\n\r\n        //.text(function (d) { return d.getTableText(); });//we are taking d from the bound data from the trs\r\n        // .attr('class','style'+d.wbsIndex);\r\n\r\n        console.log('LOG: DONE Drawing Table');\r\n    }\r\n\r\n    //https://www.tutorialsteacher.com/d3js/data-binding-in-d3js\r\n    //https://www.dashingd3js.com/d3-tutorial/use-d3-js-to-bind-data-to-dom-elements\r\n    //BEWARE: I had to change the types of all these following to var and not Selection<T,T,T,T>. the second function (d)\r\n    //call returned a type that wasnt compatible with Selction<T,T,T,T> and I couldn't figure out which type to use.\r\n\r\n    /**\r\n     * Synchronises the left scrolling of the div-timeline and div-ganttChart depending on which one was scrolled.\r\n     * \r\n     *  KNOWN BUG: since the event listener that fires this callback is on both div-activityTable and div-ganttChart, \r\n     * it first updates scrollTop for both divs, and then it is fired again from the other div, but with a scroll change of 0.\r\n     * \r\n     * KNOWN BUG: scrolling near scrollTop = 0 and scrollTop = max slows down the scroll per mousewheel tick.\r\n     * Possibly due to the above bug. I could use the d3.event method to use scroll events and their dy direction but its not working.\r\n     * \r\n     * KNOWN BUG: Mousewheel scrolling increments are reduced when near the limits of the track.\r\n     * \r\n     * INCOMPLETE JSDOC\r\n     */\r\n    private syncScrollTimelineLeft(scrollID: string, wheel: boolean) {\r\n        //links i used to understand ts callbacks, d3 event handling\r\n        //https://hstefanski.wordpress.com/2015/10/25/responding-to-d3-events-in-typescript/\r\n        //https://rollbar.com/blog/javascript-typeerror-cannot-read-property-of-undefined/\r\n        //https://www.d3indepth.com/selections/\r\n        //https://developer.mozilla.org/en-US/docs/Web/API/Element/scroll_event\r\n        //https://github.com/d3/d3-selection/blob/main/README.md#handling-events\r\n        //https://www.tutorialsteacher.com/d3js/event-handling-in-d3js\r\n\r\n        if (this.verbose) { console.log('Synchronising scroll...'); }\r\n\r\n        let chartID: string = 'div-ganttChart';\r\n        let timelineID: string = 'div-timeline';\r\n\r\n        switch (scrollID) {\r\n            case chartID:\r\n                document.getElementById(timelineID).scrollLeft = document.getElementById(chartID).scrollLeft;\r\n                if (this.verbose) { console.log('LOG: Sync timeline scroll to chart scroll'); };\r\n\r\n            case timelineID:\r\n                document.getElementById(chartID).scrollLeft = document.getElementById(timelineID).scrollLeft;\r\n                if (this.verbose) { console.log('LOG: Sync chart scroll to timeline scroll'); };\r\n        }\r\n    }\r\n\r\n    /**\r\n    * Synchronises the top scrolling of the div-activityTable and div-ganttChart depending on which one was scrolled.\r\n    * \r\n    *  KNOWN BUG: since the event listener that fires this callback is on both div-activityTable and div-ganttChart, \r\n     * it first updates scrollTop for both divs, and then it is fired again from the other div, but with a scroll change of 0.\r\n     * \r\n     * KNOWN BUG: scrolling near scrollTop = 0 and scrollTop = max slows down the scroll per mousewheel tick.\r\n     * Possibly due to the above bug. I could use the d3.event method to use scroll events and their dy direction but its not working.\r\n     * \r\n     * KNOWN BUG: Mousewheel scrolling increments are reduced when near the limits of the track.\r\n     * \r\n     * INCOMPLETE JSDOC\r\n    */\r\n    private syncScrollTimelineTop(scrollID: string, wheel: boolean) {\r\n        //links i used to understand ts callbacks, d3 event handling\r\n        //https://hstefanski.wordpress.com/2015/10/25/responding-to-d3-events-in-typescript/\r\n        //https://rollbar.com/blog/javascript-typeerror-cannot-read-property-of-undefined/\r\n        //https://www.d3indepth.com/selections/\r\n        //https://developer.mozilla.org/en-US/docs/Web/API/Element/scroll_event\r\n        //https://github.com/d3/d3-selection/blob/main/README.md#handling-events\r\n        //https://www.tutorialsteacher.com/d3js/event-handling-in-d3js\r\n\r\n        if (this.verbose) { console.log('Synchronising scroll...'); }\r\n\r\n        let chartID: string = 'div-ganttChart';\r\n        let activityTableID: string = 'div-activityTable';\r\n\r\n        switch (scrollID) {\r\n            case chartID:\r\n                document.getElementById(activityTableID).scrollTop = document.getElementById(chartID).scrollTop;\r\n                if (this.verbose) { console.log('LOG: Sync timeline scroll to chart scroll = ', document.getElementById(activityTableID).scrollTop); };\r\n\r\n            case activityTableID:\r\n                document.getElementById(chartID).scrollTop = document.getElementById(activityTableID).scrollTop;\r\n                if (this.verbose) { console.log('LOG: Sync chart scroll to avtivityTable scroll = ', document.getElementById(chartID).scrollTop); };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Syncronises top and left scrolling of various divs.\r\n     * \r\n     *  KNOWN BUG: since the event listener that fires this callback is on both div-activityTable and div-ganttChart, \r\n     * it first updates scrollTop for both divs, and then it is fired again from the other div, but with a scroll change of 0.\r\n     * \r\n     * KNOWN BUG: scrolling near scrollTop = 0 and scrollTop = max slows down the scroll per mousewheel tick.\r\n     * Possibly due to the above bug. I could use the d3.event method to use scroll events and their dy direction but its not working.\r\n     * \r\n     * KNOWN BUG: Mousewheel scrolling increments are reduced when near the limits of the track.\r\n     * @param controllerID the ID of the element that fired the event\r\n     */\r\n    private syncScroll(controllerID: string) {\r\n        let verticals: string[] = ['div-ganttChart', 'div-activityTable'];\r\n        let horizontals: string[] = ['div-ganttChart', 'div-timeline'];\r\n\r\n        switch (controllerID) {\r\n            case verticals[0]:\r\n                document.getElementById(verticals[1]).scrollTop = document.getElementById(controllerID).scrollTop;\r\n                document.getElementById(horizontals[1]).scrollLeft = document.getElementById(controllerID).scrollLeft;\r\n                if (this.verbose) { 'Set ' + verticals[1] + ' & ' + horizontals[1] + ' to ' + controllerID + '\\'s position.' };\r\n                break;\r\n            case verticals[1]://require activity table scrolling using wheel and not track\r\n                document.getElementById(verticals[0]).scrollTop = document.getElementById(controllerID).scrollTop;\r\n                if (this.verbose) { 'Set ' + verticals[0] + ' to ' + controllerID + '\\'s top position.' };\r\n                break;\r\n            // case horizontals[0]: //horizontals[0] === verticals[0]\r\n            //     break;\r\n            // case horizontals[1]: //disable timeline scrolling\r\n            //     break;\r\n            default:\r\n                if (this.verbose) {\r\n                    console.log('Invalid scroll div');\r\n                }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //[09:28] Jack Tran\r\n    // Add Custom Formatting \r\n    private static parseSettings(dataView: DataView): VisualSettings {\r\n        return <VisualSettings>VisualSettings.parse(dataView);\r\n    }\r\n\r\n    /** \r\n    * This function gets called for each of the objects defined in the capabilities files and allows you to select which of the \r\n    * objects and properties you want to expose to the users in the property pane.\r\n    * \r\n    */\r\n    public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n        const settings: VisualSettings = this.settings || <VisualSettings>VisualSettings.getDefault();\r\n        return VisualSettings.enumerateObjectInstances(settings, options);\r\n    }\r\n\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  END OF CLASS\r\n    ////////////////////////////////////////////////////////////////\r\n}\r\n\r\n    ////////////////////////////////////////////////////////////////\r\n    //  UNUSED CODE SNIPPETS\r\n    ////////////////////////////////////////////////////////////////    \r\n    \r\n    // public enumerateObjectInstances(options: EnumerateVisualObjectInstancesOptions): VisualObjectInstanceEnumeration {\r\n\r\n\r\n    //     let objectName: string = options.objectName;\r\n    //     let objectEnumeration: VisualObjectInstance[] = [];\r\n\r\n    //     switch (objectName) {\r\n    //         case 'myCustomObject':\r\n    //             objectEnumeration.push({\r\n    //                 objectName: objectName,\r\n    //                 properties: { ... },\r\n    //                 selector: { ... }\r\n    //             });\r\n    //             break;\r\n    //     };\r\n\r\n    //     return objectEnumeration;\r\n    // }\r\n","var array = Array.prototype;\r\n\r\nexport var slice = array.slice;\r\nexport var map = array.map;\r\n","export default function(a, b) {\r\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\r\n}\r\n","import ascending from \"./ascending\";\r\nimport bisector from \"./bisector\";\r\n\r\nvar ascendingBisect = bisector(ascending);\r\nexport var bisectRight = ascendingBisect.right;\r\nexport var bisectLeft = ascendingBisect.left;\r\nexport default bisectRight;\r\n","import ascending from \"./ascending\";\r\n\r\nexport default function(compare) {\r\n  if (compare.length === 1) compare = ascendingComparator(compare);\r\n  return {\r\n    left: function(a, x, lo, hi) {\r\n      if (lo == null) lo = 0;\r\n      if (hi == null) hi = a.length;\r\n      while (lo < hi) {\r\n        var mid = lo + hi >>> 1;\r\n        if (compare(a[mid], x) < 0) lo = mid + 1;\r\n        else hi = mid;\r\n      }\r\n      return lo;\r\n    },\r\n    right: function(a, x, lo, hi) {\r\n      if (lo == null) lo = 0;\r\n      if (hi == null) hi = a.length;\r\n      while (lo < hi) {\r\n        var mid = lo + hi >>> 1;\r\n        if (compare(a[mid], x) > 0) hi = mid;\r\n        else lo = mid + 1;\r\n      }\r\n      return lo;\r\n    }\r\n  };\r\n}\r\n\r\nfunction ascendingComparator(f) {\r\n  return function(d, x) {\r\n    return ascending(f(d), x);\r\n  };\r\n}\r\n","import {slice} from \"./array\";\r\nimport bisect from \"./bisect\";\r\nimport constant from \"./constant\";\r\nimport extent from \"./extent\";\r\nimport identity from \"./identity\";\r\nimport range from \"./range\";\r\nimport {tickStep} from \"./ticks\";\r\nimport sturges from \"./threshold/sturges\";\r\n\r\nexport default function() {\r\n  var value = identity,\r\n      domain = extent,\r\n      threshold = sturges;\r\n\r\n  function histogram(data) {\r\n    var i,\r\n        n = data.length,\r\n        x,\r\n        values = new Array(n);\r\n\r\n    for (i = 0; i < n; ++i) {\r\n      values[i] = value(data[i], i, data);\r\n    }\r\n\r\n    var xz = domain(values),\r\n        x0 = xz[0],\r\n        x1 = xz[1],\r\n        tz = threshold(values, x0, x1);\r\n\r\n    // Convert number of thresholds into uniform thresholds.\r\n    if (!Array.isArray(tz)) {\r\n      tz = tickStep(x0, x1, tz);\r\n      tz = range(Math.ceil(x0 / tz) * tz, x1, tz); // exclusive\r\n    }\r\n\r\n    // Remove any thresholds outside the domain.\r\n    var m = tz.length;\r\n    while (tz[0] <= x0) tz.shift(), --m;\r\n    while (tz[m - 1] > x1) tz.pop(), --m;\r\n\r\n    var bins = new Array(m + 1),\r\n        bin;\r\n\r\n    // Initialize bins.\r\n    for (i = 0; i <= m; ++i) {\r\n      bin = bins[i] = [];\r\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\r\n      bin.x1 = i < m ? tz[i] : x1;\r\n    }\r\n\r\n    // Assign data to bins by value, ignoring any outside the domain.\r\n    for (i = 0; i < n; ++i) {\r\n      x = values[i];\r\n      if (x0 <= x && x <= x1) {\r\n        bins[bisect(tz, x, 0, m)].push(data[i]);\r\n      }\r\n    }\r\n\r\n    return bins;\r\n  }\r\n\r\n  histogram.value = function(_) {\r\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\r\n  };\r\n\r\n  histogram.domain = function(_) {\r\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\r\n  };\r\n\r\n  histogram.thresholds = function(_) {\r\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), histogram) : threshold;\r\n  };\r\n\r\n  return histogram;\r\n}\r\n","export {default as bisect, bisectRight, bisectLeft} from \"./bisect\";\r\nexport {default as ascending} from \"./ascending\";\r\nexport {default as bisector} from \"./bisector\";\r\nexport {default as cross} from \"./cross\";\r\nexport {default as descending} from \"./descending\";\r\nexport {default as deviation} from \"./deviation\";\r\nexport {default as extent} from \"./extent\";\r\nexport {default as histogram} from \"./histogram\";\r\nexport {default as thresholdFreedmanDiaconis} from \"./threshold/freedmanDiaconis\";\r\nexport {default as thresholdScott} from \"./threshold/scott\";\r\nexport {default as thresholdSturges} from \"./threshold/sturges\";\r\nexport {default as max} from \"./max\";\r\nexport {default as mean} from \"./mean\";\r\nexport {default as median} from \"./median\";\r\nexport {default as merge} from \"./merge\";\r\nexport {default as min} from \"./min\";\r\nexport {default as pairs} from \"./pairs\";\r\nexport {default as permute} from \"./permute\";\r\nexport {default as quantile} from \"./quantile\";\r\nexport {default as range} from \"./range\";\r\nexport {default as scan} from \"./scan\";\r\nexport {default as shuffle} from \"./shuffle\";\r\nexport {default as sum} from \"./sum\";\r\nexport {default as ticks, tickIncrement, tickStep} from \"./ticks\";\r\nexport {default as transpose} from \"./transpose\";\r\nexport {default as variance} from \"./variance\";\r\nexport {default as zip} from \"./zip\";\r\n","import {map} from \"../array\";\r\nimport ascending from \"../ascending\";\r\nimport number from \"../number\";\r\nimport quantile from \"../quantile\";\r\n\r\nexport default function(values, min, max) {\r\n  values = map.call(values, number).sort(ascending);\r\n  return Math.ceil((max - min) / (2 * (quantile(values, 0.75) - quantile(values, 0.25)) * Math.pow(values.length, -1 / 3)));\r\n}\r\n","var e10 = Math.sqrt(50),\r\n    e5 = Math.sqrt(10),\r\n    e2 = Math.sqrt(2);\r\n\r\nexport default function(start, stop, count) {\r\n  var reverse,\r\n      i = -1,\r\n      n,\r\n      ticks,\r\n      step;\r\n\r\n  stop = +stop, start = +start, count = +count;\r\n  if (start === stop && count > 0) return [start];\r\n  if (reverse = stop < start) n = start, start = stop, stop = n;\r\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\r\n\r\n  if (step > 0) {\r\n    start = Math.ceil(start / step);\r\n    stop = Math.floor(stop / step);\r\n    ticks = new Array(n = Math.ceil(stop - start + 1));\r\n    while (++i < n) ticks[i] = (start + i) * step;\r\n  } else {\r\n    start = Math.floor(start * step);\r\n    stop = Math.ceil(stop * step);\r\n    ticks = new Array(n = Math.ceil(start - stop + 1));\r\n    while (++i < n) ticks[i] = (start - i) / step;\r\n  }\r\n\r\n  if (reverse) ticks.reverse();\r\n\r\n  return ticks;\r\n}\r\n\r\nexport function tickIncrement(start, stop, count) {\r\n  var step = (stop - start) / Math.max(0, count),\r\n      power = Math.floor(Math.log(step) / Math.LN10),\r\n      error = step / Math.pow(10, power);\r\n  return power >= 0\r\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\r\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\r\n}\r\n\r\nexport function tickStep(start, stop, count) {\r\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\r\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\r\n      error = step0 / step1;\r\n  if (error >= e10) step1 *= 10;\r\n  else if (error >= e5) step1 *= 5;\r\n  else if (error >= e2) step1 *= 2;\r\n  return stop < start ? -step1 : step1;\r\n}\r\n","export var slice = Array.prototype.slice;\r\n","import {slice} from \"./array\";\r\nimport identity from \"./identity\";\r\n\r\nvar top = 1,\r\n    right = 2,\r\n    bottom = 3,\r\n    left = 4,\r\n    epsilon = 1e-6;\r\n\r\nfunction translateX(x) {\r\n  return \"translate(\" + (x + 0.5) + \",0)\";\r\n}\r\n\r\nfunction translateY(y) {\r\n  return \"translate(0,\" + (y + 0.5) + \")\";\r\n}\r\n\r\nfunction number(scale) {\r\n  return function(d) {\r\n    return +scale(d);\r\n  };\r\n}\r\n\r\nfunction center(scale) {\r\n  var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\r\n  if (scale.round()) offset = Math.round(offset);\r\n  return function(d) {\r\n    return +scale(d) + offset;\r\n  };\r\n}\r\n\r\nfunction entering() {\r\n  return !this.__axis;\r\n}\r\n\r\nfunction axis(orient, scale) {\r\n  var tickArguments = [],\r\n      tickValues = null,\r\n      tickFormat = null,\r\n      tickSizeInner = 6,\r\n      tickSizeOuter = 6,\r\n      tickPadding = 3,\r\n      k = orient === top || orient === left ? -1 : 1,\r\n      x = orient === left || orient === right ? \"x\" : \"y\",\r\n      transform = orient === top || orient === bottom ? translateX : translateY;\r\n\r\n  function axis(context) {\r\n    var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues,\r\n        format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat,\r\n        spacing = Math.max(tickSizeInner, 0) + tickPadding,\r\n        range = scale.range(),\r\n        range0 = +range[0] + 0.5,\r\n        range1 = +range[range.length - 1] + 0.5,\r\n        position = (scale.bandwidth ? center : number)(scale.copy()),\r\n        selection = context.selection ? context.selection() : context,\r\n        path = selection.selectAll(\".domain\").data([null]),\r\n        tick = selection.selectAll(\".tick\").data(values, scale).order(),\r\n        tickExit = tick.exit(),\r\n        tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"),\r\n        line = tick.select(\"line\"),\r\n        text = tick.select(\"text\");\r\n\r\n    path = path.merge(path.enter().insert(\"path\", \".tick\")\r\n        .attr(\"class\", \"domain\")\r\n        .attr(\"stroke\", \"currentColor\"));\r\n\r\n    tick = tick.merge(tickEnter);\r\n\r\n    line = line.merge(tickEnter.append(\"line\")\r\n        .attr(\"stroke\", \"currentColor\")\r\n        .attr(x + \"2\", k * tickSizeInner));\r\n\r\n    text = text.merge(tickEnter.append(\"text\")\r\n        .attr(\"fill\", \"currentColor\")\r\n        .attr(x, k * spacing)\r\n        .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\r\n\r\n    if (context !== selection) {\r\n      path = path.transition(context);\r\n      tick = tick.transition(context);\r\n      line = line.transition(context);\r\n      text = text.transition(context);\r\n\r\n      tickExit = tickExit.transition(context)\r\n          .attr(\"opacity\", epsilon)\r\n          .attr(\"transform\", function(d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\r\n\r\n      tickEnter\r\n          .attr(\"opacity\", epsilon)\r\n          .attr(\"transform\", function(d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\r\n    }\r\n\r\n    tickExit.remove();\r\n\r\n    path\r\n        .attr(\"d\", orient === left || orient == right\r\n            ? (tickSizeOuter ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter : \"M0.5,\" + range0 + \"V\" + range1)\r\n            : (tickSizeOuter ? \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter : \"M\" + range0 + \",0.5H\" + range1));\r\n\r\n    tick\r\n        .attr(\"opacity\", 1)\r\n        .attr(\"transform\", function(d) { return transform(position(d)); });\r\n\r\n    line\r\n        .attr(x + \"2\", k * tickSizeInner);\r\n\r\n    text\r\n        .attr(x, k * spacing)\r\n        .text(format);\r\n\r\n    selection.filter(entering)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"font-size\", 10)\r\n        .attr(\"font-family\", \"sans-serif\")\r\n        .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\r\n\r\n    selection\r\n        .each(function() { this.__axis = position; });\r\n  }\r\n\r\n  axis.scale = function(_) {\r\n    return arguments.length ? (scale = _, axis) : scale;\r\n  };\r\n\r\n  axis.ticks = function() {\r\n    return tickArguments = slice.call(arguments), axis;\r\n  };\r\n\r\n  axis.tickArguments = function(_) {\r\n    return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\r\n  };\r\n\r\n  axis.tickValues = function(_) {\r\n    return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\r\n  };\r\n\r\n  axis.tickFormat = function(_) {\r\n    return arguments.length ? (tickFormat = _, axis) : tickFormat;\r\n  };\r\n\r\n  axis.tickSize = function(_) {\r\n    return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\r\n  };\r\n\r\n  axis.tickSizeInner = function(_) {\r\n    return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\r\n  };\r\n\r\n  axis.tickSizeOuter = function(_) {\r\n    return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\r\n  };\r\n\r\n  axis.tickPadding = function(_) {\r\n    return arguments.length ? (tickPadding = +_, axis) : tickPadding;\r\n  };\r\n\r\n  return axis;\r\n}\r\n\r\nexport function axisTop(scale) {\r\n  return axis(top, scale);\r\n}\r\n\r\nexport function axisRight(scale) {\r\n  return axis(right, scale);\r\n}\r\n\r\nexport function axisBottom(scale) {\r\n  return axis(bottom, scale);\r\n}\r\n\r\nexport function axisLeft(scale) {\r\n  return axis(left, scale);\r\n}\r\n","export {\r\n  axisTop,\r\n  axisRight,\r\n  axisBottom,\r\n  axisLeft\r\n} from \"./axis\";\r\n","import {dispatch} from \"d3-dispatch\";\r\nimport {dragDisable, dragEnable} from \"d3-drag\";\r\nimport {interpolate} from \"d3-interpolate\";\r\nimport {customEvent, event, touch, mouse, select} from \"d3-selection\";\r\nimport {interrupt} from \"d3-transition\";\r\nimport constant from \"./constant.js\";\r\nimport BrushEvent from \"./event.js\";\r\nimport noevent, {nopropagation} from \"./noevent.js\";\r\n\r\nvar MODE_DRAG = {name: \"drag\"},\r\n    MODE_SPACE = {name: \"space\"},\r\n    MODE_HANDLE = {name: \"handle\"},\r\n    MODE_CENTER = {name: \"center\"};\r\n\r\nfunction number1(e) {\r\n  return [+e[0], +e[1]];\r\n}\r\n\r\nfunction number2(e) {\r\n  return [number1(e[0]), number1(e[1])];\r\n}\r\n\r\nfunction toucher(identifier) {\r\n  return function(target) {\r\n    return touch(target, event.touches, identifier);\r\n  };\r\n}\r\n\r\nvar X = {\r\n  name: \"x\",\r\n  handles: [\"w\", \"e\"].map(type),\r\n  input: function(x, e) { return x == null ? null : [[+x[0], e[0][1]], [+x[1], e[1][1]]]; },\r\n  output: function(xy) { return xy && [xy[0][0], xy[1][0]]; }\r\n};\r\n\r\nvar Y = {\r\n  name: \"y\",\r\n  handles: [\"n\", \"s\"].map(type),\r\n  input: function(y, e) { return y == null ? null : [[e[0][0], +y[0]], [e[1][0], +y[1]]]; },\r\n  output: function(xy) { return xy && [xy[0][1], xy[1][1]]; }\r\n};\r\n\r\nvar XY = {\r\n  name: \"xy\",\r\n  handles: [\"n\", \"w\", \"e\", \"s\", \"nw\", \"ne\", \"sw\", \"se\"].map(type),\r\n  input: function(xy) { return xy == null ? null : number2(xy); },\r\n  output: function(xy) { return xy; }\r\n};\r\n\r\nvar cursors = {\r\n  overlay: \"crosshair\",\r\n  selection: \"move\",\r\n  n: \"ns-resize\",\r\n  e: \"ew-resize\",\r\n  s: \"ns-resize\",\r\n  w: \"ew-resize\",\r\n  nw: \"nwse-resize\",\r\n  ne: \"nesw-resize\",\r\n  se: \"nwse-resize\",\r\n  sw: \"nesw-resize\"\r\n};\r\n\r\nvar flipX = {\r\n  e: \"w\",\r\n  w: \"e\",\r\n  nw: \"ne\",\r\n  ne: \"nw\",\r\n  se: \"sw\",\r\n  sw: \"se\"\r\n};\r\n\r\nvar flipY = {\r\n  n: \"s\",\r\n  s: \"n\",\r\n  nw: \"sw\",\r\n  ne: \"se\",\r\n  se: \"ne\",\r\n  sw: \"nw\"\r\n};\r\n\r\nvar signsX = {\r\n  overlay: +1,\r\n  selection: +1,\r\n  n: null,\r\n  e: +1,\r\n  s: null,\r\n  w: -1,\r\n  nw: -1,\r\n  ne: +1,\r\n  se: +1,\r\n  sw: -1\r\n};\r\n\r\nvar signsY = {\r\n  overlay: +1,\r\n  selection: +1,\r\n  n: -1,\r\n  e: null,\r\n  s: +1,\r\n  w: null,\r\n  nw: -1,\r\n  ne: -1,\r\n  se: +1,\r\n  sw: +1\r\n};\r\n\r\nfunction type(t) {\r\n  return {type: t};\r\n}\r\n\r\n// Ignore right-click, since that should open the context menu.\r\nfunction defaultFilter() {\r\n  return !event.ctrlKey && !event.button;\r\n}\r\n\r\nfunction defaultExtent() {\r\n  var svg = this.ownerSVGElement || this;\r\n  if (svg.hasAttribute(\"viewBox\")) {\r\n    svg = svg.viewBox.baseVal;\r\n    return [[svg.x, svg.y], [svg.x + svg.width, svg.y + svg.height]];\r\n  }\r\n  return [[0, 0], [svg.width.baseVal.value, svg.height.baseVal.value]];\r\n}\r\n\r\nfunction defaultTouchable() {\r\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\r\n}\r\n\r\n// Like d3.local, but with the name __brush rather than auto-generated.\r\nfunction local(node) {\r\n  while (!node.__brush) if (!(node = node.parentNode)) return;\r\n  return node.__brush;\r\n}\r\n\r\nfunction empty(extent) {\r\n  return extent[0][0] === extent[1][0]\r\n      || extent[0][1] === extent[1][1];\r\n}\r\n\r\nexport function brushSelection(node) {\r\n  var state = node.__brush;\r\n  return state ? state.dim.output(state.selection) : null;\r\n}\r\n\r\nexport function brushX() {\r\n  return brush(X);\r\n}\r\n\r\nexport function brushY() {\r\n  return brush(Y);\r\n}\r\n\r\nexport default function() {\r\n  return brush(XY);\r\n}\r\n\r\nfunction brush(dim) {\r\n  var extent = defaultExtent,\r\n      filter = defaultFilter,\r\n      touchable = defaultTouchable,\r\n      keys = true,\r\n      listeners = dispatch(\"start\", \"brush\", \"end\"),\r\n      handleSize = 6,\r\n      touchending;\r\n\r\n  function brush(group) {\r\n    var overlay = group\r\n        .property(\"__brush\", initialize)\r\n      .selectAll(\".overlay\")\r\n      .data([type(\"overlay\")]);\r\n\r\n    overlay.enter().append(\"rect\")\r\n        .attr(\"class\", \"overlay\")\r\n        .attr(\"pointer-events\", \"all\")\r\n        .attr(\"cursor\", cursors.overlay)\r\n      .merge(overlay)\r\n        .each(function() {\r\n          var extent = local(this).extent;\r\n          select(this)\r\n              .attr(\"x\", extent[0][0])\r\n              .attr(\"y\", extent[0][1])\r\n              .attr(\"width\", extent[1][0] - extent[0][0])\r\n              .attr(\"height\", extent[1][1] - extent[0][1]);\r\n        });\r\n\r\n    group.selectAll(\".selection\")\r\n      .data([type(\"selection\")])\r\n      .enter().append(\"rect\")\r\n        .attr(\"class\", \"selection\")\r\n        .attr(\"cursor\", cursors.selection)\r\n        .attr(\"fill\", \"#777\")\r\n        .attr(\"fill-opacity\", 0.3)\r\n        .attr(\"stroke\", \"#fff\")\r\n        .attr(\"shape-rendering\", \"crispEdges\");\r\n\r\n    var handle = group.selectAll(\".handle\")\r\n      .data(dim.handles, function(d) { return d.type; });\r\n\r\n    handle.exit().remove();\r\n\r\n    handle.enter().append(\"rect\")\r\n        .attr(\"class\", function(d) { return \"handle handle--\" + d.type; })\r\n        .attr(\"cursor\", function(d) { return cursors[d.type]; });\r\n\r\n    group\r\n        .each(redraw)\r\n        .attr(\"fill\", \"none\")\r\n        .attr(\"pointer-events\", \"all\")\r\n        .on(\"mousedown.brush\", started)\r\n      .filter(touchable)\r\n        .on(\"touchstart.brush\", started)\r\n        .on(\"touchmove.brush\", touchmoved)\r\n        .on(\"touchend.brush touchcancel.brush\", touchended)\r\n        .style(\"touch-action\", \"none\")\r\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\r\n  }\r\n\r\n  brush.move = function(group, selection) {\r\n    if (group.selection) {\r\n      group\r\n          .on(\"start.brush\", function() { emitter(this, arguments).beforestart().start(); })\r\n          .on(\"interrupt.brush end.brush\", function() { emitter(this, arguments).end(); })\r\n          .tween(\"brush\", function() {\r\n            var that = this,\r\n                state = that.__brush,\r\n                emit = emitter(that, arguments),\r\n                selection0 = state.selection,\r\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(this, arguments) : selection, state.extent),\r\n                i = interpolate(selection0, selection1);\r\n\r\n            function tween(t) {\r\n              state.selection = t === 1 && selection1 === null ? null : i(t);\r\n              redraw.call(that);\r\n              emit.brush();\r\n            }\r\n\r\n            return selection0 !== null && selection1 !== null ? tween : tween(1);\r\n          });\r\n    } else {\r\n      group\r\n          .each(function() {\r\n            var that = this,\r\n                args = arguments,\r\n                state = that.__brush,\r\n                selection1 = dim.input(typeof selection === \"function\" ? selection.apply(that, args) : selection, state.extent),\r\n                emit = emitter(that, args).beforestart();\r\n\r\n            interrupt(that);\r\n            state.selection = selection1 === null ? null : selection1;\r\n            redraw.call(that);\r\n            emit.start().brush().end();\r\n          });\r\n    }\r\n  };\r\n\r\n  brush.clear = function(group) {\r\n    brush.move(group, null);\r\n  };\r\n\r\n  function redraw() {\r\n    var group = select(this),\r\n        selection = local(this).selection;\r\n\r\n    if (selection) {\r\n      group.selectAll(\".selection\")\r\n          .style(\"display\", null)\r\n          .attr(\"x\", selection[0][0])\r\n          .attr(\"y\", selection[0][1])\r\n          .attr(\"width\", selection[1][0] - selection[0][0])\r\n          .attr(\"height\", selection[1][1] - selection[0][1]);\r\n\r\n      group.selectAll(\".handle\")\r\n          .style(\"display\", null)\r\n          .attr(\"x\", function(d) { return d.type[d.type.length - 1] === \"e\" ? selection[1][0] - handleSize / 2 : selection[0][0] - handleSize / 2; })\r\n          .attr(\"y\", function(d) { return d.type[0] === \"s\" ? selection[1][1] - handleSize / 2 : selection[0][1] - handleSize / 2; })\r\n          .attr(\"width\", function(d) { return d.type === \"n\" || d.type === \"s\" ? selection[1][0] - selection[0][0] + handleSize : handleSize; })\r\n          .attr(\"height\", function(d) { return d.type === \"e\" || d.type === \"w\" ? selection[1][1] - selection[0][1] + handleSize : handleSize; });\r\n    }\r\n\r\n    else {\r\n      group.selectAll(\".selection,.handle\")\r\n          .style(\"display\", \"none\")\r\n          .attr(\"x\", null)\r\n          .attr(\"y\", null)\r\n          .attr(\"width\", null)\r\n          .attr(\"height\", null);\r\n    }\r\n  }\r\n\r\n  function emitter(that, args, clean) {\r\n    var emit = that.__brush.emitter;\r\n    return emit && (!clean || !emit.clean) ? emit : new Emitter(that, args, clean);\r\n  }\r\n\r\n  function Emitter(that, args, clean) {\r\n    this.that = that;\r\n    this.args = args;\r\n    this.state = that.__brush;\r\n    this.active = 0;\r\n    this.clean = clean;\r\n  }\r\n\r\n  Emitter.prototype = {\r\n    beforestart: function() {\r\n      if (++this.active === 1) this.state.emitter = this, this.starting = true;\r\n      return this;\r\n    },\r\n    start: function() {\r\n      if (this.starting) this.starting = false, this.emit(\"start\");\r\n      else this.emit(\"brush\");\r\n      return this;\r\n    },\r\n    brush: function() {\r\n      this.emit(\"brush\");\r\n      return this;\r\n    },\r\n    end: function() {\r\n      if (--this.active === 0) delete this.state.emitter, this.emit(\"end\");\r\n      return this;\r\n    },\r\n    emit: function(type) {\r\n      customEvent(new BrushEvent(brush, type, dim.output(this.state.selection)), listeners.apply, listeners, [type, this.that, this.args]);\r\n    }\r\n  };\r\n\r\n  function started() {\r\n    if (touchending && !event.touches) return;\r\n    if (!filter.apply(this, arguments)) return;\r\n\r\n    var that = this,\r\n        type = event.target.__data__.type,\r\n        mode = (keys && event.metaKey ? type = \"overlay\" : type) === \"selection\" ? MODE_DRAG : (keys && event.altKey ? MODE_CENTER : MODE_HANDLE),\r\n        signX = dim === Y ? null : signsX[type],\r\n        signY = dim === X ? null : signsY[type],\r\n        state = local(that),\r\n        extent = state.extent,\r\n        selection = state.selection,\r\n        W = extent[0][0], w0, w1,\r\n        N = extent[0][1], n0, n1,\r\n        E = extent[1][0], e0, e1,\r\n        S = extent[1][1], s0, s1,\r\n        dx = 0,\r\n        dy = 0,\r\n        moving,\r\n        shifting = signX && signY && keys && event.shiftKey,\r\n        lockX,\r\n        lockY,\r\n        pointer = event.touches ? toucher(event.changedTouches[0].identifier) : mouse,\r\n        point0 = pointer(that),\r\n        point = point0,\r\n        emit = emitter(that, arguments, true).beforestart();\r\n\r\n    if (type === \"overlay\") {\r\n      if (selection) moving = true;\r\n      state.selection = selection = [\r\n        [w0 = dim === Y ? W : point0[0], n0 = dim === X ? N : point0[1]],\r\n        [e0 = dim === Y ? E : w0, s0 = dim === X ? S : n0]\r\n      ];\r\n    } else {\r\n      w0 = selection[0][0];\r\n      n0 = selection[0][1];\r\n      e0 = selection[1][0];\r\n      s0 = selection[1][1];\r\n    }\r\n\r\n    w1 = w0;\r\n    n1 = n0;\r\n    e1 = e0;\r\n    s1 = s0;\r\n\r\n    var group = select(that)\r\n        .attr(\"pointer-events\", \"none\");\r\n\r\n    var overlay = group.selectAll(\".overlay\")\r\n        .attr(\"cursor\", cursors[type]);\r\n\r\n    if (event.touches) {\r\n      emit.moved = moved;\r\n      emit.ended = ended;\r\n    } else {\r\n      var view = select(event.view)\r\n          .on(\"mousemove.brush\", moved, true)\r\n          .on(\"mouseup.brush\", ended, true);\r\n      if (keys) view\r\n          .on(\"keydown.brush\", keydowned, true)\r\n          .on(\"keyup.brush\", keyupped, true)\r\n\r\n      dragDisable(event.view);\r\n    }\r\n\r\n    nopropagation();\r\n    interrupt(that);\r\n    redraw.call(that);\r\n    emit.start();\r\n\r\n    function moved() {\r\n      var point1 = pointer(that);\r\n      if (shifting && !lockX && !lockY) {\r\n        if (Math.abs(point1[0] - point[0]) > Math.abs(point1[1] - point[1])) lockY = true;\r\n        else lockX = true;\r\n      }\r\n      point = point1;\r\n      moving = true;\r\n      noevent();\r\n      move();\r\n    }\r\n\r\n    function move() {\r\n      var t;\r\n\r\n      dx = point[0] - point0[0];\r\n      dy = point[1] - point0[1];\r\n\r\n      switch (mode) {\r\n        case MODE_SPACE:\r\n        case MODE_DRAG: {\r\n          if (signX) dx = Math.max(W - w0, Math.min(E - e0, dx)), w1 = w0 + dx, e1 = e0 + dx;\r\n          if (signY) dy = Math.max(N - n0, Math.min(S - s0, dy)), n1 = n0 + dy, s1 = s0 + dy;\r\n          break;\r\n        }\r\n        case MODE_HANDLE: {\r\n          if (signX < 0) dx = Math.max(W - w0, Math.min(E - w0, dx)), w1 = w0 + dx, e1 = e0;\r\n          else if (signX > 0) dx = Math.max(W - e0, Math.min(E - e0, dx)), w1 = w0, e1 = e0 + dx;\r\n          if (signY < 0) dy = Math.max(N - n0, Math.min(S - n0, dy)), n1 = n0 + dy, s1 = s0;\r\n          else if (signY > 0) dy = Math.max(N - s0, Math.min(S - s0, dy)), n1 = n0, s1 = s0 + dy;\r\n          break;\r\n        }\r\n        case MODE_CENTER: {\r\n          if (signX) w1 = Math.max(W, Math.min(E, w0 - dx * signX)), e1 = Math.max(W, Math.min(E, e0 + dx * signX));\r\n          if (signY) n1 = Math.max(N, Math.min(S, n0 - dy * signY)), s1 = Math.max(N, Math.min(S, s0 + dy * signY));\r\n          break;\r\n        }\r\n      }\r\n\r\n      if (e1 < w1) {\r\n        signX *= -1;\r\n        t = w0, w0 = e0, e0 = t;\r\n        t = w1, w1 = e1, e1 = t;\r\n        if (type in flipX) overlay.attr(\"cursor\", cursors[type = flipX[type]]);\r\n      }\r\n\r\n      if (s1 < n1) {\r\n        signY *= -1;\r\n        t = n0, n0 = s0, s0 = t;\r\n        t = n1, n1 = s1, s1 = t;\r\n        if (type in flipY) overlay.attr(\"cursor\", cursors[type = flipY[type]]);\r\n      }\r\n\r\n      if (state.selection) selection = state.selection; // May be set by brush.move!\r\n      if (lockX) w1 = selection[0][0], e1 = selection[1][0];\r\n      if (lockY) n1 = selection[0][1], s1 = selection[1][1];\r\n\r\n      if (selection[0][0] !== w1\r\n          || selection[0][1] !== n1\r\n          || selection[1][0] !== e1\r\n          || selection[1][1] !== s1) {\r\n        state.selection = [[w1, n1], [e1, s1]];\r\n        redraw.call(that);\r\n        emit.brush();\r\n      }\r\n    }\r\n\r\n    function ended() {\r\n      nopropagation();\r\n      if (event.touches) {\r\n        if (event.touches.length) return;\r\n        if (touchending) clearTimeout(touchending);\r\n        touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\r\n      } else {\r\n        dragEnable(event.view, moving);\r\n        view.on(\"keydown.brush keyup.brush mousemove.brush mouseup.brush\", null);\r\n      }\r\n      group.attr(\"pointer-events\", \"all\");\r\n      overlay.attr(\"cursor\", cursors.overlay);\r\n      if (state.selection) selection = state.selection; // May be set by brush.move (on start)!\r\n      if (empty(selection)) state.selection = null, redraw.call(that);\r\n      emit.end();\r\n    }\r\n\r\n    function keydowned() {\r\n      switch (event.keyCode) {\r\n        case 16: { // SHIFT\r\n          shifting = signX && signY;\r\n          break;\r\n        }\r\n        case 18: { // ALT\r\n          if (mode === MODE_HANDLE) {\r\n            if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\r\n            if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\r\n            mode = MODE_CENTER;\r\n            move();\r\n          }\r\n          break;\r\n        }\r\n        case 32: { // SPACE; takes priority over ALT\r\n          if (mode === MODE_HANDLE || mode === MODE_CENTER) {\r\n            if (signX < 0) e0 = e1 - dx; else if (signX > 0) w0 = w1 - dx;\r\n            if (signY < 0) s0 = s1 - dy; else if (signY > 0) n0 = n1 - dy;\r\n            mode = MODE_SPACE;\r\n            overlay.attr(\"cursor\", cursors.selection);\r\n            move();\r\n          }\r\n          break;\r\n        }\r\n        default: return;\r\n      }\r\n      noevent();\r\n    }\r\n\r\n    function keyupped() {\r\n      switch (event.keyCode) {\r\n        case 16: { // SHIFT\r\n          if (shifting) {\r\n            lockX = lockY = shifting = false;\r\n            move();\r\n          }\r\n          break;\r\n        }\r\n        case 18: { // ALT\r\n          if (mode === MODE_CENTER) {\r\n            if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\r\n            if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\r\n            mode = MODE_HANDLE;\r\n            move();\r\n          }\r\n          break;\r\n        }\r\n        case 32: { // SPACE\r\n          if (mode === MODE_SPACE) {\r\n            if (event.altKey) {\r\n              if (signX) e0 = e1 - dx * signX, w0 = w1 + dx * signX;\r\n              if (signY) s0 = s1 - dy * signY, n0 = n1 + dy * signY;\r\n              mode = MODE_CENTER;\r\n            } else {\r\n              if (signX < 0) e0 = e1; else if (signX > 0) w0 = w1;\r\n              if (signY < 0) s0 = s1; else if (signY > 0) n0 = n1;\r\n              mode = MODE_HANDLE;\r\n            }\r\n            overlay.attr(\"cursor\", cursors[type]);\r\n            move();\r\n          }\r\n          break;\r\n        }\r\n        default: return;\r\n      }\r\n      noevent();\r\n    }\r\n  }\r\n\r\n  function touchmoved() {\r\n    emitter(this, arguments).moved();\r\n  }\r\n\r\n  function touchended() {\r\n    emitter(this, arguments).ended();\r\n  }\r\n\r\n  function initialize() {\r\n    var state = this.__brush || {selection: null};\r\n    state.extent = number2(extent.apply(this, arguments));\r\n    state.dim = dim;\r\n    return state;\r\n  }\r\n\r\n  brush.extent = function(_) {\r\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant(number2(_)), brush) : extent;\r\n  };\r\n\r\n  brush.filter = function(_) {\r\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), brush) : filter;\r\n  };\r\n\r\n  brush.touchable = function(_) {\r\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), brush) : touchable;\r\n  };\r\n\r\n  brush.handleSize = function(_) {\r\n    return arguments.length ? (handleSize = +_, brush) : handleSize;\r\n  };\r\n\r\n  brush.keyModifiers = function(_) {\r\n    return arguments.length ? (keys = !!_, brush) : keys;\r\n  };\r\n\r\n  brush.on = function() {\r\n    var value = listeners.on.apply(listeners, arguments);\r\n    return value === listeners ? brush : value;\r\n  };\r\n\r\n  return brush;\r\n}\r\n","export {\r\n  default as brush,\r\n  brushX,\r\n  brushY,\r\n  brushSelection\r\n} from \"./brush.js\";\r\n","export var slice = Array.prototype.slice;\r\n","import {range} from \"d3-array\";\r\nimport {max, tau} from \"./math\";\r\n\r\nfunction compareValue(compare) {\r\n  return function(a, b) {\r\n    return compare(\r\n      a.source.value + a.target.value,\r\n      b.source.value + b.target.value\r\n    );\r\n  };\r\n}\r\n\r\nexport default function() {\r\n  var padAngle = 0,\r\n      sortGroups = null,\r\n      sortSubgroups = null,\r\n      sortChords = null;\r\n\r\n  function chord(matrix) {\r\n    var n = matrix.length,\r\n        groupSums = [],\r\n        groupIndex = range(n),\r\n        subgroupIndex = [],\r\n        chords = [],\r\n        groups = chords.groups = new Array(n),\r\n        subgroups = new Array(n * n),\r\n        k,\r\n        x,\r\n        x0,\r\n        dx,\r\n        i,\r\n        j;\r\n\r\n    // Compute the sum.\r\n    k = 0, i = -1; while (++i < n) {\r\n      x = 0, j = -1; while (++j < n) {\r\n        x += matrix[i][j];\r\n      }\r\n      groupSums.push(x);\r\n      subgroupIndex.push(range(n));\r\n      k += x;\r\n    }\r\n\r\n    // Sort groups\r\n    if (sortGroups) groupIndex.sort(function(a, b) {\r\n      return sortGroups(groupSums[a], groupSums[b]);\r\n    });\r\n\r\n    // Sort subgroups\r\n    if (sortSubgroups) subgroupIndex.forEach(function(d, i) {\r\n      d.sort(function(a, b) {\r\n        return sortSubgroups(matrix[i][a], matrix[i][b]);\r\n      });\r\n    });\r\n\r\n    // Convert the sum to scaling factor for [0, 2pi].\r\n    // TODO Allow start and end angle to be specified?\r\n    // TODO Allow padding to be specified as percentage?\r\n    k = max(0, tau - padAngle * n) / k;\r\n    dx = k ? padAngle : tau / n;\r\n\r\n    // Compute the start and end angle for each group and subgroup.\r\n    // Note: Opera has a bug reordering object literal properties!\r\n    x = 0, i = -1; while (++i < n) {\r\n      x0 = x, j = -1; while (++j < n) {\r\n        var di = groupIndex[i],\r\n            dj = subgroupIndex[di][j],\r\n            v = matrix[di][dj],\r\n            a0 = x,\r\n            a1 = x += v * k;\r\n        subgroups[dj * n + di] = {\r\n          index: di,\r\n          subindex: dj,\r\n          startAngle: a0,\r\n          endAngle: a1,\r\n          value: v\r\n        };\r\n      }\r\n      groups[di] = {\r\n        index: di,\r\n        startAngle: x0,\r\n        endAngle: x,\r\n        value: groupSums[di]\r\n      };\r\n      x += dx;\r\n    }\r\n\r\n    // Generate chords for each (non-empty) subgroup-subgroup link.\r\n    i = -1; while (++i < n) {\r\n      j = i - 1; while (++j < n) {\r\n        var source = subgroups[j * n + i],\r\n            target = subgroups[i * n + j];\r\n        if (source.value || target.value) {\r\n          chords.push(source.value < target.value\r\n              ? {source: target, target: source}\r\n              : {source: source, target: target});\r\n        }\r\n      }\r\n    }\r\n\r\n    return sortChords ? chords.sort(sortChords) : chords;\r\n  }\r\n\r\n  chord.padAngle = function(_) {\r\n    return arguments.length ? (padAngle = max(0, _), chord) : padAngle;\r\n  };\r\n\r\n  chord.sortGroups = function(_) {\r\n    return arguments.length ? (sortGroups = _, chord) : sortGroups;\r\n  };\r\n\r\n  chord.sortSubgroups = function(_) {\r\n    return arguments.length ? (sortSubgroups = _, chord) : sortSubgroups;\r\n  };\r\n\r\n  chord.sortChords = function(_) {\r\n    return arguments.length ? (_ == null ? sortChords = null : (sortChords = compareValue(_))._ = _, chord) : sortChords && sortChords._;\r\n  };\r\n\r\n  return chord;\r\n}\r\n","export {default as chord} from \"./chord\";\r\nexport {default as ribbon} from \"./ribbon\";\r\n","export var cos = Math.cos;\r\nexport var sin = Math.sin;\r\nexport var pi = Math.PI;\r\nexport var halfPi = pi / 2;\r\nexport var tau = pi * 2;\r\nexport var max = Math.max;\r\n","import {slice} from \"./array\";\r\nimport constant from \"./constant\";\r\nimport {cos, halfPi, sin} from \"./math\";\r\nimport {path} from \"d3-path\";\r\n\r\nfunction defaultSource(d) {\r\n  return d.source;\r\n}\r\n\r\nfunction defaultTarget(d) {\r\n  return d.target;\r\n}\r\n\r\nfunction defaultRadius(d) {\r\n  return d.radius;\r\n}\r\n\r\nfunction defaultStartAngle(d) {\r\n  return d.startAngle;\r\n}\r\n\r\nfunction defaultEndAngle(d) {\r\n  return d.endAngle;\r\n}\r\n\r\nexport default function() {\r\n  var source = defaultSource,\r\n      target = defaultTarget,\r\n      radius = defaultRadius,\r\n      startAngle = defaultStartAngle,\r\n      endAngle = defaultEndAngle,\r\n      context = null;\r\n\r\n  function ribbon() {\r\n    var buffer,\r\n        argv = slice.call(arguments),\r\n        s = source.apply(this, argv),\r\n        t = target.apply(this, argv),\r\n        sr = +radius.apply(this, (argv[0] = s, argv)),\r\n        sa0 = startAngle.apply(this, argv) - halfPi,\r\n        sa1 = endAngle.apply(this, argv) - halfPi,\r\n        sx0 = sr * cos(sa0),\r\n        sy0 = sr * sin(sa0),\r\n        tr = +radius.apply(this, (argv[0] = t, argv)),\r\n        ta0 = startAngle.apply(this, argv) - halfPi,\r\n        ta1 = endAngle.apply(this, argv) - halfPi;\r\n\r\n    if (!context) context = buffer = path();\r\n\r\n    context.moveTo(sx0, sy0);\r\n    context.arc(0, 0, sr, sa0, sa1);\r\n    if (sa0 !== ta0 || sa1 !== ta1) { // TODO sr !== tr?\r\n      context.quadraticCurveTo(0, 0, tr * cos(ta0), tr * sin(ta0));\r\n      context.arc(0, 0, tr, ta0, ta1);\r\n    }\r\n    context.quadraticCurveTo(0, 0, sx0, sy0);\r\n    context.closePath();\r\n\r\n    if (buffer) return context = null, buffer + \"\" || null;\r\n  }\r\n\r\n  ribbon.radius = function(_) {\r\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), ribbon) : radius;\r\n  };\r\n\r\n  ribbon.startAngle = function(_) {\r\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : startAngle;\r\n  };\r\n\r\n  ribbon.endAngle = function(_) {\r\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), ribbon) : endAngle;\r\n  };\r\n\r\n  ribbon.source = function(_) {\r\n    return arguments.length ? (source = _, ribbon) : source;\r\n  };\r\n\r\n  ribbon.target = function(_) {\r\n    return arguments.length ? (target = _, ribbon) : target;\r\n  };\r\n\r\n  ribbon.context = function(_) {\r\n    return arguments.length ? ((context = _ == null ? null : _), ribbon) : context;\r\n  };\r\n\r\n  return ribbon;\r\n}\r\n","export {default as nest} from \"./nest\";\r\nexport {default as set} from \"./set\";\r\nexport {default as map} from \"./map\";\r\nexport {default as keys} from \"./keys\";\r\nexport {default as values} from \"./values\";\r\nexport {default as entries} from \"./entries\";\r\n","export var prefix = \"$\";\r\n\r\nfunction Map() {}\r\n\r\nMap.prototype = map.prototype = {\r\n  constructor: Map,\r\n  has: function(key) {\r\n    return (prefix + key) in this;\r\n  },\r\n  get: function(key) {\r\n    return this[prefix + key];\r\n  },\r\n  set: function(key, value) {\r\n    this[prefix + key] = value;\r\n    return this;\r\n  },\r\n  remove: function(key) {\r\n    var property = prefix + key;\r\n    return property in this && delete this[property];\r\n  },\r\n  clear: function() {\r\n    for (var property in this) if (property[0] === prefix) delete this[property];\r\n  },\r\n  keys: function() {\r\n    var keys = [];\r\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\r\n    return keys;\r\n  },\r\n  values: function() {\r\n    var values = [];\r\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\r\n    return values;\r\n  },\r\n  entries: function() {\r\n    var entries = [];\r\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\r\n    return entries;\r\n  },\r\n  size: function() {\r\n    var size = 0;\r\n    for (var property in this) if (property[0] === prefix) ++size;\r\n    return size;\r\n  },\r\n  empty: function() {\r\n    for (var property in this) if (property[0] === prefix) return false;\r\n    return true;\r\n  },\r\n  each: function(f) {\r\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\r\n  }\r\n};\r\n\r\nfunction map(object, f) {\r\n  var map = new Map;\r\n\r\n  // Copy constructor.\r\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\r\n\r\n  // Index array by numeric index or specified key function.\r\n  else if (Array.isArray(object)) {\r\n    var i = -1,\r\n        n = object.length,\r\n        o;\r\n\r\n    if (f == null) while (++i < n) map.set(i, object[i]);\r\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\r\n  }\r\n\r\n  // Convert object to map.\r\n  else if (object) for (var key in object) map.set(key, object[key]);\r\n\r\n  return map;\r\n}\r\n\r\nexport default map;\r\n","import map from \"./map\";\r\n\r\nexport default function() {\r\n  var keys = [],\r\n      sortKeys = [],\r\n      sortValues,\r\n      rollup,\r\n      nest;\r\n\r\n  function apply(array, depth, createResult, setResult) {\r\n    if (depth >= keys.length) {\r\n      if (sortValues != null) array.sort(sortValues);\r\n      return rollup != null ? rollup(array) : array;\r\n    }\r\n\r\n    var i = -1,\r\n        n = array.length,\r\n        key = keys[depth++],\r\n        keyValue,\r\n        value,\r\n        valuesByKey = map(),\r\n        values,\r\n        result = createResult();\r\n\r\n    while (++i < n) {\r\n      if (values = valuesByKey.get(keyValue = key(value = array[i]) + \"\")) {\r\n        values.push(value);\r\n      } else {\r\n        valuesByKey.set(keyValue, [value]);\r\n      }\r\n    }\r\n\r\n    valuesByKey.each(function(values, key) {\r\n      setResult(result, key, apply(values, depth, createResult, setResult));\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  function entries(map, depth) {\r\n    if (++depth > keys.length) return map;\r\n    var array, sortKey = sortKeys[depth - 1];\r\n    if (rollup != null && depth >= keys.length) array = map.entries();\r\n    else array = [], map.each(function(v, k) { array.push({key: k, values: entries(v, depth)}); });\r\n    return sortKey != null ? array.sort(function(a, b) { return sortKey(a.key, b.key); }) : array;\r\n  }\r\n\r\n  return nest = {\r\n    object: function(array) { return apply(array, 0, createObject, setObject); },\r\n    map: function(array) { return apply(array, 0, createMap, setMap); },\r\n    entries: function(array) { return entries(apply(array, 0, createMap, setMap), 0); },\r\n    key: function(d) { keys.push(d); return nest; },\r\n    sortKeys: function(order) { sortKeys[keys.length - 1] = order; return nest; },\r\n    sortValues: function(order) { sortValues = order; return nest; },\r\n    rollup: function(f) { rollup = f; return nest; }\r\n  };\r\n}\r\n\r\nfunction createObject() {\r\n  return {};\r\n}\r\n\r\nfunction setObject(object, key, value) {\r\n  object[key] = value;\r\n}\r\n\r\nfunction createMap() {\r\n  return map();\r\n}\r\n\r\nfunction setMap(map, key, value) {\r\n  map.set(key, value);\r\n}\r\n","import {default as map, prefix} from \"./map\";\r\n\r\nfunction Set() {}\r\n\r\nvar proto = map.prototype;\r\n\r\nSet.prototype = set.prototype = {\r\n  constructor: Set,\r\n  has: proto.has,\r\n  add: function(value) {\r\n    value += \"\";\r\n    this[prefix + value] = value;\r\n    return this;\r\n  },\r\n  remove: proto.remove,\r\n  clear: proto.clear,\r\n  values: proto.keys,\r\n  size: proto.size,\r\n  empty: proto.empty,\r\n  each: proto.each\r\n};\r\n\r\nfunction set(object, f) {\r\n  var set = new Set;\r\n\r\n  // Copy constructor.\r\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\r\n\r\n  // Otherwise, assume its an array.\r\n  else if (object) {\r\n    var i = -1, n = object.length;\r\n    if (f == null) while (++i < n) set.add(object[i]);\r\n    else while (++i < n) set.add(f(object[i], i, object));\r\n  }\r\n\r\n  return set;\r\n}\r\n\r\nexport default set;\r\n","import define, {extend} from \"./define.js\";\r\n\r\nexport function Color() {}\r\n\r\nexport var darker = 0.7;\r\nexport var brighter = 1 / darker;\r\n\r\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\r\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\r\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\r\n    reHex = /^#([0-9a-f]{3,8})$/,\r\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\r\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\r\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\r\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\r\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\r\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\r\n\r\nvar named = {\r\n  aliceblue: 0xf0f8ff,\r\n  antiquewhite: 0xfaebd7,\r\n  aqua: 0x00ffff,\r\n  aquamarine: 0x7fffd4,\r\n  azure: 0xf0ffff,\r\n  beige: 0xf5f5dc,\r\n  bisque: 0xffe4c4,\r\n  black: 0x000000,\r\n  blanchedalmond: 0xffebcd,\r\n  blue: 0x0000ff,\r\n  blueviolet: 0x8a2be2,\r\n  brown: 0xa52a2a,\r\n  burlywood: 0xdeb887,\r\n  cadetblue: 0x5f9ea0,\r\n  chartreuse: 0x7fff00,\r\n  chocolate: 0xd2691e,\r\n  coral: 0xff7f50,\r\n  cornflowerblue: 0x6495ed,\r\n  cornsilk: 0xfff8dc,\r\n  crimson: 0xdc143c,\r\n  cyan: 0x00ffff,\r\n  darkblue: 0x00008b,\r\n  darkcyan: 0x008b8b,\r\n  darkgoldenrod: 0xb8860b,\r\n  darkgray: 0xa9a9a9,\r\n  darkgreen: 0x006400,\r\n  darkgrey: 0xa9a9a9,\r\n  darkkhaki: 0xbdb76b,\r\n  darkmagenta: 0x8b008b,\r\n  darkolivegreen: 0x556b2f,\r\n  darkorange: 0xff8c00,\r\n  darkorchid: 0x9932cc,\r\n  darkred: 0x8b0000,\r\n  darksalmon: 0xe9967a,\r\n  darkseagreen: 0x8fbc8f,\r\n  darkslateblue: 0x483d8b,\r\n  darkslategray: 0x2f4f4f,\r\n  darkslategrey: 0x2f4f4f,\r\n  darkturquoise: 0x00ced1,\r\n  darkviolet: 0x9400d3,\r\n  deeppink: 0xff1493,\r\n  deepskyblue: 0x00bfff,\r\n  dimgray: 0x696969,\r\n  dimgrey: 0x696969,\r\n  dodgerblue: 0x1e90ff,\r\n  firebrick: 0xb22222,\r\n  floralwhite: 0xfffaf0,\r\n  forestgreen: 0x228b22,\r\n  fuchsia: 0xff00ff,\r\n  gainsboro: 0xdcdcdc,\r\n  ghostwhite: 0xf8f8ff,\r\n  gold: 0xffd700,\r\n  goldenrod: 0xdaa520,\r\n  gray: 0x808080,\r\n  green: 0x008000,\r\n  greenyellow: 0xadff2f,\r\n  grey: 0x808080,\r\n  honeydew: 0xf0fff0,\r\n  hotpink: 0xff69b4,\r\n  indianred: 0xcd5c5c,\r\n  indigo: 0x4b0082,\r\n  ivory: 0xfffff0,\r\n  khaki: 0xf0e68c,\r\n  lavender: 0xe6e6fa,\r\n  lavenderblush: 0xfff0f5,\r\n  lawngreen: 0x7cfc00,\r\n  lemonchiffon: 0xfffacd,\r\n  lightblue: 0xadd8e6,\r\n  lightcoral: 0xf08080,\r\n  lightcyan: 0xe0ffff,\r\n  lightgoldenrodyellow: 0xfafad2,\r\n  lightgray: 0xd3d3d3,\r\n  lightgreen: 0x90ee90,\r\n  lightgrey: 0xd3d3d3,\r\n  lightpink: 0xffb6c1,\r\n  lightsalmon: 0xffa07a,\r\n  lightseagreen: 0x20b2aa,\r\n  lightskyblue: 0x87cefa,\r\n  lightslategray: 0x778899,\r\n  lightslategrey: 0x778899,\r\n  lightsteelblue: 0xb0c4de,\r\n  lightyellow: 0xffffe0,\r\n  lime: 0x00ff00,\r\n  limegreen: 0x32cd32,\r\n  linen: 0xfaf0e6,\r\n  magenta: 0xff00ff,\r\n  maroon: 0x800000,\r\n  mediumaquamarine: 0x66cdaa,\r\n  mediumblue: 0x0000cd,\r\n  mediumorchid: 0xba55d3,\r\n  mediumpurple: 0x9370db,\r\n  mediumseagreen: 0x3cb371,\r\n  mediumslateblue: 0x7b68ee,\r\n  mediumspringgreen: 0x00fa9a,\r\n  mediumturquoise: 0x48d1cc,\r\n  mediumvioletred: 0xc71585,\r\n  midnightblue: 0x191970,\r\n  mintcream: 0xf5fffa,\r\n  mistyrose: 0xffe4e1,\r\n  moccasin: 0xffe4b5,\r\n  navajowhite: 0xffdead,\r\n  navy: 0x000080,\r\n  oldlace: 0xfdf5e6,\r\n  olive: 0x808000,\r\n  olivedrab: 0x6b8e23,\r\n  orange: 0xffa500,\r\n  orangered: 0xff4500,\r\n  orchid: 0xda70d6,\r\n  palegoldenrod: 0xeee8aa,\r\n  palegreen: 0x98fb98,\r\n  paleturquoise: 0xafeeee,\r\n  palevioletred: 0xdb7093,\r\n  papayawhip: 0xffefd5,\r\n  peachpuff: 0xffdab9,\r\n  peru: 0xcd853f,\r\n  pink: 0xffc0cb,\r\n  plum: 0xdda0dd,\r\n  powderblue: 0xb0e0e6,\r\n  purple: 0x800080,\r\n  rebeccapurple: 0x663399,\r\n  red: 0xff0000,\r\n  rosybrown: 0xbc8f8f,\r\n  royalblue: 0x4169e1,\r\n  saddlebrown: 0x8b4513,\r\n  salmon: 0xfa8072,\r\n  sandybrown: 0xf4a460,\r\n  seagreen: 0x2e8b57,\r\n  seashell: 0xfff5ee,\r\n  sienna: 0xa0522d,\r\n  silver: 0xc0c0c0,\r\n  skyblue: 0x87ceeb,\r\n  slateblue: 0x6a5acd,\r\n  slategray: 0x708090,\r\n  slategrey: 0x708090,\r\n  snow: 0xfffafa,\r\n  springgreen: 0x00ff7f,\r\n  steelblue: 0x4682b4,\r\n  tan: 0xd2b48c,\r\n  teal: 0x008080,\r\n  thistle: 0xd8bfd8,\r\n  tomato: 0xff6347,\r\n  turquoise: 0x40e0d0,\r\n  violet: 0xee82ee,\r\n  wheat: 0xf5deb3,\r\n  white: 0xffffff,\r\n  whitesmoke: 0xf5f5f5,\r\n  yellow: 0xffff00,\r\n  yellowgreen: 0x9acd32\r\n};\r\n\r\ndefine(Color, color, {\r\n  copy: function(channels) {\r\n    return Object.assign(new this.constructor, this, channels);\r\n  },\r\n  displayable: function() {\r\n    return this.rgb().displayable();\r\n  },\r\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\r\n  formatHex: color_formatHex,\r\n  formatHsl: color_formatHsl,\r\n  formatRgb: color_formatRgb,\r\n  toString: color_formatRgb\r\n});\r\n\r\nfunction color_formatHex() {\r\n  return this.rgb().formatHex();\r\n}\r\n\r\nfunction color_formatHsl() {\r\n  return hslConvert(this).formatHsl();\r\n}\r\n\r\nfunction color_formatRgb() {\r\n  return this.rgb().formatRgb();\r\n}\r\n\r\nexport default function color(format) {\r\n  var m, l;\r\n  format = (format + \"\").trim().toLowerCase();\r\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\r\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\r\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\r\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\r\n      : null) // invalid hex\r\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\r\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\r\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\r\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\r\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\r\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\r\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\r\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\r\n      : null;\r\n}\r\n\r\nfunction rgbn(n) {\r\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\r\n}\r\n\r\nfunction rgba(r, g, b, a) {\r\n  if (a <= 0) r = g = b = NaN;\r\n  return new Rgb(r, g, b, a);\r\n}\r\n\r\nexport function rgbConvert(o) {\r\n  if (!(o instanceof Color)) o = color(o);\r\n  if (!o) return new Rgb;\r\n  o = o.rgb();\r\n  return new Rgb(o.r, o.g, o.b, o.opacity);\r\n}\r\n\r\nexport function rgb(r, g, b, opacity) {\r\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\r\n}\r\n\r\nexport function Rgb(r, g, b, opacity) {\r\n  this.r = +r;\r\n  this.g = +g;\r\n  this.b = +b;\r\n  this.opacity = +opacity;\r\n}\r\n\r\ndefine(Rgb, rgb, extend(Color, {\r\n  brighter: function(k) {\r\n    k = k == null ? brighter : Math.pow(brighter, k);\r\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\r\n  },\r\n  darker: function(k) {\r\n    k = k == null ? darker : Math.pow(darker, k);\r\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\r\n  },\r\n  rgb: function() {\r\n    return this;\r\n  },\r\n  displayable: function() {\r\n    return (-0.5 <= this.r && this.r < 255.5)\r\n        && (-0.5 <= this.g && this.g < 255.5)\r\n        && (-0.5 <= this.b && this.b < 255.5)\r\n        && (0 <= this.opacity && this.opacity <= 1);\r\n  },\r\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\r\n  formatHex: rgb_formatHex,\r\n  formatRgb: rgb_formatRgb,\r\n  toString: rgb_formatRgb\r\n}));\r\n\r\nfunction rgb_formatHex() {\r\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\r\n}\r\n\r\nfunction rgb_formatRgb() {\r\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\r\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\r\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\r\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\r\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\r\n      + (a === 1 ? \")\" : \", \" + a + \")\");\r\n}\r\n\r\nfunction hex(value) {\r\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\r\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\r\n}\r\n\r\nfunction hsla(h, s, l, a) {\r\n  if (a <= 0) h = s = l = NaN;\r\n  else if (l <= 0 || l >= 1) h = s = NaN;\r\n  else if (s <= 0) h = NaN;\r\n  return new Hsl(h, s, l, a);\r\n}\r\n\r\nexport function hslConvert(o) {\r\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\r\n  if (!(o instanceof Color)) o = color(o);\r\n  if (!o) return new Hsl;\r\n  if (o instanceof Hsl) return o;\r\n  o = o.rgb();\r\n  var r = o.r / 255,\r\n      g = o.g / 255,\r\n      b = o.b / 255,\r\n      min = Math.min(r, g, b),\r\n      max = Math.max(r, g, b),\r\n      h = NaN,\r\n      s = max - min,\r\n      l = (max + min) / 2;\r\n  if (s) {\r\n    if (r === max) h = (g - b) / s + (g < b) * 6;\r\n    else if (g === max) h = (b - r) / s + 2;\r\n    else h = (r - g) / s + 4;\r\n    s /= l < 0.5 ? max + min : 2 - max - min;\r\n    h *= 60;\r\n  } else {\r\n    s = l > 0 && l < 1 ? 0 : h;\r\n  }\r\n  return new Hsl(h, s, l, o.opacity);\r\n}\r\n\r\nexport function hsl(h, s, l, opacity) {\r\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\r\n}\r\n\r\nfunction Hsl(h, s, l, opacity) {\r\n  this.h = +h;\r\n  this.s = +s;\r\n  this.l = +l;\r\n  this.opacity = +opacity;\r\n}\r\n\r\ndefine(Hsl, hsl, extend(Color, {\r\n  brighter: function(k) {\r\n    k = k == null ? brighter : Math.pow(brighter, k);\r\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\r\n  },\r\n  darker: function(k) {\r\n    k = k == null ? darker : Math.pow(darker, k);\r\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\r\n  },\r\n  rgb: function() {\r\n    var h = this.h % 360 + (this.h < 0) * 360,\r\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\r\n        l = this.l,\r\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\r\n        m1 = 2 * l - m2;\r\n    return new Rgb(\r\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\r\n      hsl2rgb(h, m1, m2),\r\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\r\n      this.opacity\r\n    );\r\n  },\r\n  displayable: function() {\r\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\r\n        && (0 <= this.l && this.l <= 1)\r\n        && (0 <= this.opacity && this.opacity <= 1);\r\n  },\r\n  formatHsl: function() {\r\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\r\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\r\n        + (this.h || 0) + \", \"\r\n        + (this.s || 0) * 100 + \"%, \"\r\n        + (this.l || 0) * 100 + \"%\"\r\n        + (a === 1 ? \")\" : \", \" + a + \")\");\r\n  }\r\n}));\r\n\r\n/* From FvD 13.37, CSS Color Module Level 3 */\r\nfunction hsl2rgb(h, m1, m2) {\r\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\r\n      : h < 180 ? m2\r\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\r\n      : m1) * 255;\r\n}\r\n","export default function(constructor, factory, prototype) {\r\n  constructor.prototype = factory.prototype = prototype;\r\n  prototype.constructor = constructor;\r\n}\r\n\r\nexport function extend(parent, definition) {\r\n  var prototype = Object.create(parent.prototype);\r\n  for (var key in definition) prototype[key] = definition[key];\r\n  return prototype;\r\n}\r\n","var array = Array.prototype;\r\n\r\nexport var slice = array.slice;\r\n","import {extent, thresholdSturges, tickStep, range} from \"d3-array\";\r\nimport {slice} from \"./array\";\r\nimport ascending from \"./ascending\";\r\nimport area from \"./area\";\r\nimport constant from \"./constant\";\r\nimport contains from \"./contains\";\r\nimport noop from \"./noop\";\r\n\r\nvar cases = [\r\n  [],\r\n  [[[1.0, 1.5], [0.5, 1.0]]],\r\n  [[[1.5, 1.0], [1.0, 1.5]]],\r\n  [[[1.5, 1.0], [0.5, 1.0]]],\r\n  [[[1.0, 0.5], [1.5, 1.0]]],\r\n  [[[1.0, 1.5], [0.5, 1.0]], [[1.0, 0.5], [1.5, 1.0]]],\r\n  [[[1.0, 0.5], [1.0, 1.5]]],\r\n  [[[1.0, 0.5], [0.5, 1.0]]],\r\n  [[[0.5, 1.0], [1.0, 0.5]]],\r\n  [[[1.0, 1.5], [1.0, 0.5]]],\r\n  [[[0.5, 1.0], [1.0, 0.5]], [[1.5, 1.0], [1.0, 1.5]]],\r\n  [[[1.5, 1.0], [1.0, 0.5]]],\r\n  [[[0.5, 1.0], [1.5, 1.0]]],\r\n  [[[1.0, 1.5], [1.5, 1.0]]],\r\n  [[[0.5, 1.0], [1.0, 1.5]]],\r\n  []\r\n];\r\n\r\nexport default function() {\r\n  var dx = 1,\r\n      dy = 1,\r\n      threshold = thresholdSturges,\r\n      smooth = smoothLinear;\r\n\r\n  function contours(values) {\r\n    var tz = threshold(values);\r\n\r\n    // Convert number of thresholds into uniform thresholds.\r\n    if (!Array.isArray(tz)) {\r\n      var domain = extent(values), start = domain[0], stop = domain[1];\r\n      tz = tickStep(start, stop, tz);\r\n      tz = range(Math.floor(start / tz) * tz, Math.floor(stop / tz) * tz, tz);\r\n    } else {\r\n      tz = tz.slice().sort(ascending);\r\n    }\r\n\r\n    return tz.map(function(value) {\r\n      return contour(values, value);\r\n    });\r\n  }\r\n\r\n  // Accumulate, smooth contour rings, assign holes to exterior rings.\r\n  // Based on https://github.com/mbostock/shapefile/blob/v0.6.2/shp/polygon.js\r\n  function contour(values, value) {\r\n    var polygons = [],\r\n        holes = [];\r\n\r\n    isorings(values, value, function(ring) {\r\n      smooth(ring, values, value);\r\n      if (area(ring) > 0) polygons.push([ring]);\r\n      else holes.push(ring);\r\n    });\r\n\r\n    holes.forEach(function(hole) {\r\n      for (var i = 0, n = polygons.length, polygon; i < n; ++i) {\r\n        if (contains((polygon = polygons[i])[0], hole) !== -1) {\r\n          polygon.push(hole);\r\n          return;\r\n        }\r\n      }\r\n    });\r\n\r\n    return {\r\n      type: \"MultiPolygon\",\r\n      value: value,\r\n      coordinates: polygons\r\n    };\r\n  }\r\n\r\n  // Marching squares with isolines stitched into rings.\r\n  // Based on https://github.com/topojson/topojson-client/blob/v3.0.0/src/stitch.js\r\n  function isorings(values, value, callback) {\r\n    var fragmentByStart = new Array,\r\n        fragmentByEnd = new Array,\r\n        x, y, t0, t1, t2, t3;\r\n\r\n    // Special case for the first row (y = -1, t2 = t3 = 0).\r\n    x = y = -1;\r\n    t1 = values[0] >= value;\r\n    cases[t1 << 1].forEach(stitch);\r\n    while (++x < dx - 1) {\r\n      t0 = t1, t1 = values[x + 1] >= value;\r\n      cases[t0 | t1 << 1].forEach(stitch);\r\n    }\r\n    cases[t1 << 0].forEach(stitch);\r\n\r\n    // General case for the intermediate rows.\r\n    while (++y < dy - 1) {\r\n      x = -1;\r\n      t1 = values[y * dx + dx] >= value;\r\n      t2 = values[y * dx] >= value;\r\n      cases[t1 << 1 | t2 << 2].forEach(stitch);\r\n      while (++x < dx - 1) {\r\n        t0 = t1, t1 = values[y * dx + dx + x + 1] >= value;\r\n        t3 = t2, t2 = values[y * dx + x + 1] >= value;\r\n        cases[t0 | t1 << 1 | t2 << 2 | t3 << 3].forEach(stitch);\r\n      }\r\n      cases[t1 | t2 << 3].forEach(stitch);\r\n    }\r\n\r\n    // Special case for the last row (y = dy - 1, t0 = t1 = 0).\r\n    x = -1;\r\n    t2 = values[y * dx] >= value;\r\n    cases[t2 << 2].forEach(stitch);\r\n    while (++x < dx - 1) {\r\n      t3 = t2, t2 = values[y * dx + x + 1] >= value;\r\n      cases[t2 << 2 | t3 << 3].forEach(stitch);\r\n    }\r\n    cases[t2 << 3].forEach(stitch);\r\n\r\n    function stitch(line) {\r\n      var start = [line[0][0] + x, line[0][1] + y],\r\n          end = [line[1][0] + x, line[1][1] + y],\r\n          startIndex = index(start),\r\n          endIndex = index(end),\r\n          f, g;\r\n      if (f = fragmentByEnd[startIndex]) {\r\n        if (g = fragmentByStart[endIndex]) {\r\n          delete fragmentByEnd[f.end];\r\n          delete fragmentByStart[g.start];\r\n          if (f === g) {\r\n            f.ring.push(end);\r\n            callback(f.ring);\r\n          } else {\r\n            fragmentByStart[f.start] = fragmentByEnd[g.end] = {start: f.start, end: g.end, ring: f.ring.concat(g.ring)};\r\n          }\r\n        } else {\r\n          delete fragmentByEnd[f.end];\r\n          f.ring.push(end);\r\n          fragmentByEnd[f.end = endIndex] = f;\r\n        }\r\n      } else if (f = fragmentByStart[endIndex]) {\r\n        if (g = fragmentByEnd[startIndex]) {\r\n          delete fragmentByStart[f.start];\r\n          delete fragmentByEnd[g.end];\r\n          if (f === g) {\r\n            f.ring.push(end);\r\n            callback(f.ring);\r\n          } else {\r\n            fragmentByStart[g.start] = fragmentByEnd[f.end] = {start: g.start, end: f.end, ring: g.ring.concat(f.ring)};\r\n          }\r\n        } else {\r\n          delete fragmentByStart[f.start];\r\n          f.ring.unshift(start);\r\n          fragmentByStart[f.start = startIndex] = f;\r\n        }\r\n      } else {\r\n        fragmentByStart[startIndex] = fragmentByEnd[endIndex] = {start: startIndex, end: endIndex, ring: [start, end]};\r\n      }\r\n    }\r\n  }\r\n\r\n  function index(point) {\r\n    return point[0] * 2 + point[1] * (dx + 1) * 4;\r\n  }\r\n\r\n  function smoothLinear(ring, values, value) {\r\n    ring.forEach(function(point) {\r\n      var x = point[0],\r\n          y = point[1],\r\n          xt = x | 0,\r\n          yt = y | 0,\r\n          v0,\r\n          v1 = values[yt * dx + xt];\r\n      if (x > 0 && x < dx && xt === x) {\r\n        v0 = values[yt * dx + xt - 1];\r\n        point[0] = x + (value - v0) / (v1 - v0) - 0.5;\r\n      }\r\n      if (y > 0 && y < dy && yt === y) {\r\n        v0 = values[(yt - 1) * dx + xt];\r\n        point[1] = y + (value - v0) / (v1 - v0) - 0.5;\r\n      }\r\n    });\r\n  }\r\n\r\n  contours.contour = contour;\r\n\r\n  contours.size = function(_) {\r\n    if (!arguments.length) return [dx, dy];\r\n    var _0 = Math.ceil(_[0]), _1 = Math.ceil(_[1]);\r\n    if (!(_0 > 0) || !(_1 > 0)) throw new Error(\"invalid size\");\r\n    return dx = _0, dy = _1, contours;\r\n  };\r\n\r\n  contours.thresholds = function(_) {\r\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), contours) : threshold;\r\n  };\r\n\r\n  contours.smooth = function(_) {\r\n    return arguments.length ? (smooth = _ ? smoothLinear : noop, contours) : smooth === smoothLinear;\r\n  };\r\n\r\n  return contours;\r\n}\r\n","import {max, range, tickStep} from \"d3-array\";\r\nimport {slice} from \"./array\";\r\nimport {blurX, blurY} from \"./blur\";\r\nimport constant from \"./constant\";\r\nimport contours from \"./contours\";\r\n\r\nfunction defaultX(d) {\r\n  return d[0];\r\n}\r\n\r\nfunction defaultY(d) {\r\n  return d[1];\r\n}\r\n\r\nfunction defaultWeight() {\r\n  return 1;\r\n}\r\n\r\nexport default function() {\r\n  var x = defaultX,\r\n      y = defaultY,\r\n      weight = defaultWeight,\r\n      dx = 960,\r\n      dy = 500,\r\n      r = 20, // blur radius\r\n      k = 2, // log2(grid cell size)\r\n      o = r * 3, // grid offset, to pad for blur\r\n      n = (dx + o * 2) >> k, // grid width\r\n      m = (dy + o * 2) >> k, // grid height\r\n      threshold = constant(20);\r\n\r\n  function density(data) {\r\n    var values0 = new Float32Array(n * m),\r\n        values1 = new Float32Array(n * m);\r\n\r\n    data.forEach(function(d, i, data) {\r\n      var xi = (+x(d, i, data) + o) >> k,\r\n          yi = (+y(d, i, data) + o) >> k,\r\n          wi = +weight(d, i, data);\r\n      if (xi >= 0 && xi < n && yi >= 0 && yi < m) {\r\n        values0[xi + yi * n] += wi;\r\n      }\r\n    });\r\n\r\n    // TODO Optimize.\r\n    blurX({width: n, height: m, data: values0}, {width: n, height: m, data: values1}, r >> k);\r\n    blurY({width: n, height: m, data: values1}, {width: n, height: m, data: values0}, r >> k);\r\n    blurX({width: n, height: m, data: values0}, {width: n, height: m, data: values1}, r >> k);\r\n    blurY({width: n, height: m, data: values1}, {width: n, height: m, data: values0}, r >> k);\r\n    blurX({width: n, height: m, data: values0}, {width: n, height: m, data: values1}, r >> k);\r\n    blurY({width: n, height: m, data: values1}, {width: n, height: m, data: values0}, r >> k);\r\n\r\n    var tz = threshold(values0);\r\n\r\n    // Convert number of thresholds into uniform thresholds.\r\n    if (!Array.isArray(tz)) {\r\n      var stop = max(values0);\r\n      tz = tickStep(0, stop, tz);\r\n      tz = range(0, Math.floor(stop / tz) * tz, tz);\r\n      tz.shift();\r\n    }\r\n\r\n    return contours()\r\n        .thresholds(tz)\r\n        .size([n, m])\r\n      (values0)\r\n        .map(transform);\r\n  }\r\n\r\n  function transform(geometry) {\r\n    geometry.value *= Math.pow(2, -2 * k); // Density in points per square pixel.\r\n    geometry.coordinates.forEach(transformPolygon);\r\n    return geometry;\r\n  }\r\n\r\n  function transformPolygon(coordinates) {\r\n    coordinates.forEach(transformRing);\r\n  }\r\n\r\n  function transformRing(coordinates) {\r\n    coordinates.forEach(transformPoint);\r\n  }\r\n\r\n  // TODO Optimize.\r\n  function transformPoint(coordinates) {\r\n    coordinates[0] = coordinates[0] * Math.pow(2, k) - o;\r\n    coordinates[1] = coordinates[1] * Math.pow(2, k) - o;\r\n  }\r\n\r\n  function resize() {\r\n    o = r * 3;\r\n    n = (dx + o * 2) >> k;\r\n    m = (dy + o * 2) >> k;\r\n    return density;\r\n  }\r\n\r\n  density.x = function(_) {\r\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), density) : x;\r\n  };\r\n\r\n  density.y = function(_) {\r\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), density) : y;\r\n  };\r\n\r\n  density.weight = function(_) {\r\n    return arguments.length ? (weight = typeof _ === \"function\" ? _ : constant(+_), density) : weight;\r\n  };\r\n\r\n  density.size = function(_) {\r\n    if (!arguments.length) return [dx, dy];\r\n    var _0 = Math.ceil(_[0]), _1 = Math.ceil(_[1]);\r\n    if (!(_0 >= 0) && !(_0 >= 0)) throw new Error(\"invalid size\");\r\n    return dx = _0, dy = _1, resize();\r\n  };\r\n\r\n  density.cellSize = function(_) {\r\n    if (!arguments.length) return 1 << k;\r\n    if (!((_ = +_) >= 1)) throw new Error(\"invalid cell size\");\r\n    return k = Math.floor(Math.log(_) / Math.LN2), resize();\r\n  };\r\n\r\n  density.thresholds = function(_) {\r\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : Array.isArray(_) ? constant(slice.call(_)) : constant(_), density) : threshold;\r\n  };\r\n\r\n  density.bandwidth = function(_) {\r\n    if (!arguments.length) return Math.sqrt(r * (r + 1));\r\n    if (!((_ = +_) >= 0)) throw new Error(\"invalid bandwidth\");\r\n    return r = Math.round((Math.sqrt(4 * _ * _ + 1) - 1) / 2), resize();\r\n  };\r\n\r\n  return density;\r\n}\r\n","export {default as contours} from \"./contours\";\r\nexport {default as contourDensity} from \"./density\";\r\n","var noop = {value: function() {}};\r\n\r\nfunction dispatch() {\r\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\r\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\r\n    _[t] = [];\r\n  }\r\n  return new Dispatch(_);\r\n}\r\n\r\nfunction Dispatch(_) {\r\n  this._ = _;\r\n}\r\n\r\nfunction parseTypenames(typenames, types) {\r\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\r\n    var name = \"\", i = t.indexOf(\".\");\r\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\r\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\r\n    return {type: t, name: name};\r\n  });\r\n}\r\n\r\nDispatch.prototype = dispatch.prototype = {\r\n  constructor: Dispatch,\r\n  on: function(typename, callback) {\r\n    var _ = this._,\r\n        T = parseTypenames(typename + \"\", _),\r\n        t,\r\n        i = -1,\r\n        n = T.length;\r\n\r\n    // If no callback was specified, return the callback of the given type and name.\r\n    if (arguments.length < 2) {\r\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\r\n      return;\r\n    }\r\n\r\n    // If a type was specified, set the callback for the given type and name.\r\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\r\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\r\n    while (++i < n) {\r\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\r\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\r\n    }\r\n\r\n    return this;\r\n  },\r\n  copy: function() {\r\n    var copy = {}, _ = this._;\r\n    for (var t in _) copy[t] = _[t].slice();\r\n    return new Dispatch(copy);\r\n  },\r\n  call: function(type, that) {\r\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\r\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\r\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\r\n  },\r\n  apply: function(type, that, args) {\r\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\r\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\r\n  }\r\n};\r\n\r\nfunction get(type, name) {\r\n  for (var i = 0, n = type.length, c; i < n; ++i) {\r\n    if ((c = type[i]).name === name) {\r\n      return c.value;\r\n    }\r\n  }\r\n}\r\n\r\nfunction set(type, name, callback) {\r\n  for (var i = 0, n = type.length; i < n; ++i) {\r\n    if (type[i].name === name) {\r\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\r\n      break;\r\n    }\r\n  }\r\n  if (callback != null) type.push({name: name, value: callback});\r\n  return type;\r\n}\r\n\r\nexport default dispatch;\r\n","export function cubicIn(t) {\r\n  return t * t * t;\r\n}\r\n\r\nexport function cubicOut(t) {\r\n  return --t * t * t + 1;\r\n}\r\n\r\nexport function cubicInOut(t) {\r\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\r\n}\r\n","export {default as forceCenter} from \"./center\";\r\nexport {default as forceCollide} from \"./collide\";\r\nexport {default as forceLink} from \"./link\";\r\nexport {default as forceManyBody} from \"./manyBody\";\r\nexport {default as forceRadial} from \"./radial\";\r\nexport {default as forceSimulation} from \"./simulation\";\r\nexport {default as forceX} from \"./x\";\r\nexport {default as forceY} from \"./y\";\r\n","import constant from \"./constant\";\r\nimport jiggle from \"./jiggle\";\r\nimport {map} from \"d3-collection\";\r\n\r\nfunction index(d) {\r\n  return d.index;\r\n}\r\n\r\nfunction find(nodeById, nodeId) {\r\n  var node = nodeById.get(nodeId);\r\n  if (!node) throw new Error(\"missing: \" + nodeId);\r\n  return node;\r\n}\r\n\r\nexport default function(links) {\r\n  var id = index,\r\n      strength = defaultStrength,\r\n      strengths,\r\n      distance = constant(30),\r\n      distances,\r\n      nodes,\r\n      count,\r\n      bias,\r\n      iterations = 1;\r\n\r\n  if (links == null) links = [];\r\n\r\n  function defaultStrength(link) {\r\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\r\n  }\r\n\r\n  function force(alpha) {\r\n    for (var k = 0, n = links.length; k < iterations; ++k) {\r\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\r\n        link = links[i], source = link.source, target = link.target;\r\n        x = target.x + target.vx - source.x - source.vx || jiggle();\r\n        y = target.y + target.vy - source.y - source.vy || jiggle();\r\n        l = Math.sqrt(x * x + y * y);\r\n        l = (l - distances[i]) / l * alpha * strengths[i];\r\n        x *= l, y *= l;\r\n        target.vx -= x * (b = bias[i]);\r\n        target.vy -= y * b;\r\n        source.vx += x * (b = 1 - b);\r\n        source.vy += y * b;\r\n      }\r\n    }\r\n  }\r\n\r\n  function initialize() {\r\n    if (!nodes) return;\r\n\r\n    var i,\r\n        n = nodes.length,\r\n        m = links.length,\r\n        nodeById = map(nodes, id),\r\n        link;\r\n\r\n    for (i = 0, count = new Array(n); i < m; ++i) {\r\n      link = links[i], link.index = i;\r\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\r\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\r\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\r\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\r\n    }\r\n\r\n    for (i = 0, bias = new Array(m); i < m; ++i) {\r\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\r\n    }\r\n\r\n    strengths = new Array(m), initializeStrength();\r\n    distances = new Array(m), initializeDistance();\r\n  }\r\n\r\n  function initializeStrength() {\r\n    if (!nodes) return;\r\n\r\n    for (var i = 0, n = links.length; i < n; ++i) {\r\n      strengths[i] = +strength(links[i], i, links);\r\n    }\r\n  }\r\n\r\n  function initializeDistance() {\r\n    if (!nodes) return;\r\n\r\n    for (var i = 0, n = links.length; i < n; ++i) {\r\n      distances[i] = +distance(links[i], i, links);\r\n    }\r\n  }\r\n\r\n  force.initialize = function(_) {\r\n    nodes = _;\r\n    initialize();\r\n  };\r\n\r\n  force.links = function(_) {\r\n    return arguments.length ? (links = _, initialize(), force) : links;\r\n  };\r\n\r\n  force.id = function(_) {\r\n    return arguments.length ? (id = _, force) : id;\r\n  };\r\n\r\n  force.iterations = function(_) {\r\n    return arguments.length ? (iterations = +_, force) : iterations;\r\n  };\r\n\r\n  force.strength = function(_) {\r\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\r\n  };\r\n\r\n  force.distance = function(_) {\r\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\r\n  };\r\n\r\n  return force;\r\n}\r\n","import constant from \"./constant\";\r\nimport jiggle from \"./jiggle\";\r\nimport {quadtree} from \"d3-quadtree\";\r\nimport {x, y} from \"./simulation\";\r\n\r\nexport default function() {\r\n  var nodes,\r\n      node,\r\n      alpha,\r\n      strength = constant(-30),\r\n      strengths,\r\n      distanceMin2 = 1,\r\n      distanceMax2 = Infinity,\r\n      theta2 = 0.81;\r\n\r\n  function force(_) {\r\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\r\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\r\n  }\r\n\r\n  function initialize() {\r\n    if (!nodes) return;\r\n    var i, n = nodes.length, node;\r\n    strengths = new Array(n);\r\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\r\n  }\r\n\r\n  function accumulate(quad) {\r\n    var strength = 0, q, c, weight = 0, x, y, i;\r\n\r\n    // For internal nodes, accumulate forces from child quadrants.\r\n    if (quad.length) {\r\n      for (x = y = i = 0; i < 4; ++i) {\r\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\r\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\r\n        }\r\n      }\r\n      quad.x = x / weight;\r\n      quad.y = y / weight;\r\n    }\r\n\r\n    // For leaf nodes, accumulate forces from coincident quadrants.\r\n    else {\r\n      q = quad;\r\n      q.x = q.data.x;\r\n      q.y = q.data.y;\r\n      do strength += strengths[q.data.index];\r\n      while (q = q.next);\r\n    }\r\n\r\n    quad.value = strength;\r\n  }\r\n\r\n  function apply(quad, x1, _, x2) {\r\n    if (!quad.value) return true;\r\n\r\n    var x = quad.x - node.x,\r\n        y = quad.y - node.y,\r\n        w = x2 - x1,\r\n        l = x * x + y * y;\r\n\r\n    // Apply the Barnes-Hut approximation if possible.\r\n    // Limit forces for very close nodes; randomize direction if coincident.\r\n    if (w * w / theta2 < l) {\r\n      if (l < distanceMax2) {\r\n        if (x === 0) x = jiggle(), l += x * x;\r\n        if (y === 0) y = jiggle(), l += y * y;\r\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\r\n        node.vx += x * quad.value * alpha / l;\r\n        node.vy += y * quad.value * alpha / l;\r\n      }\r\n      return true;\r\n    }\r\n\r\n    // Otherwise, process points directly.\r\n    else if (quad.length || l >= distanceMax2) return;\r\n\r\n    // Limit forces for very close nodes; randomize direction if coincident.\r\n    if (quad.data !== node || quad.next) {\r\n      if (x === 0) x = jiggle(), l += x * x;\r\n      if (y === 0) y = jiggle(), l += y * y;\r\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\r\n    }\r\n\r\n    do if (quad.data !== node) {\r\n      w = strengths[quad.data.index] * alpha / l;\r\n      node.vx += x * w;\r\n      node.vy += y * w;\r\n    } while (quad = quad.next);\r\n  }\r\n\r\n  force.initialize = function(_) {\r\n    nodes = _;\r\n    initialize();\r\n  };\r\n\r\n  force.strength = function(_) {\r\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\r\n  };\r\n\r\n  force.distanceMin = function(_) {\r\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\r\n  };\r\n\r\n  force.distanceMax = function(_) {\r\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\r\n  };\r\n\r\n  force.theta = function(_) {\r\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\r\n  };\r\n\r\n  return force;\r\n}\r\n","import {dispatch} from \"d3-dispatch\";\r\nimport {map} from \"d3-collection\";\r\nimport {timer} from \"d3-timer\";\r\n\r\nexport function x(d) {\r\n  return d.x;\r\n}\r\n\r\nexport function y(d) {\r\n  return d.y;\r\n}\r\n\r\nvar initialRadius = 10,\r\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\r\n\r\nexport default function(nodes) {\r\n  var simulation,\r\n      alpha = 1,\r\n      alphaMin = 0.001,\r\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\r\n      alphaTarget = 0,\r\n      velocityDecay = 0.6,\r\n      forces = map(),\r\n      stepper = timer(step),\r\n      event = dispatch(\"tick\", \"end\");\r\n\r\n  if (nodes == null) nodes = [];\r\n\r\n  function step() {\r\n    tick();\r\n    event.call(\"tick\", simulation);\r\n    if (alpha < alphaMin) {\r\n      stepper.stop();\r\n      event.call(\"end\", simulation);\r\n    }\r\n  }\r\n\r\n  function tick(iterations) {\r\n    var i, n = nodes.length, node;\r\n\r\n    if (iterations === undefined) iterations = 1;\r\n\r\n    for (var k = 0; k < iterations; ++k) {\r\n      alpha += (alphaTarget - alpha) * alphaDecay;\r\n\r\n      forces.each(function (force) {\r\n        force(alpha);\r\n      });\r\n\r\n      for (i = 0; i < n; ++i) {\r\n        node = nodes[i];\r\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\r\n        else node.x = node.fx, node.vx = 0;\r\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\r\n        else node.y = node.fy, node.vy = 0;\r\n      }\r\n    }\r\n\r\n    return simulation;\r\n  }\r\n\r\n  function initializeNodes() {\r\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\r\n      node = nodes[i], node.index = i;\r\n      if (node.fx != null) node.x = node.fx;\r\n      if (node.fy != null) node.y = node.fy;\r\n      if (isNaN(node.x) || isNaN(node.y)) {\r\n        var radius = initialRadius * Math.sqrt(i), angle = i * initialAngle;\r\n        node.x = radius * Math.cos(angle);\r\n        node.y = radius * Math.sin(angle);\r\n      }\r\n      if (isNaN(node.vx) || isNaN(node.vy)) {\r\n        node.vx = node.vy = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  function initializeForce(force) {\r\n    if (force.initialize) force.initialize(nodes);\r\n    return force;\r\n  }\r\n\r\n  initializeNodes();\r\n\r\n  return simulation = {\r\n    tick: tick,\r\n\r\n    restart: function() {\r\n      return stepper.restart(step), simulation;\r\n    },\r\n\r\n    stop: function() {\r\n      return stepper.stop(), simulation;\r\n    },\r\n\r\n    nodes: function(_) {\r\n      return arguments.length ? (nodes = _, initializeNodes(), forces.each(initializeForce), simulation) : nodes;\r\n    },\r\n\r\n    alpha: function(_) {\r\n      return arguments.length ? (alpha = +_, simulation) : alpha;\r\n    },\r\n\r\n    alphaMin: function(_) {\r\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\r\n    },\r\n\r\n    alphaDecay: function(_) {\r\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\r\n    },\r\n\r\n    alphaTarget: function(_) {\r\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\r\n    },\r\n\r\n    velocityDecay: function(_) {\r\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\r\n    },\r\n\r\n    force: function(name, _) {\r\n      return arguments.length > 1 ? ((_ == null ? forces.remove(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\r\n    },\r\n\r\n    find: function(x, y, radius) {\r\n      var i = 0,\r\n          n = nodes.length,\r\n          dx,\r\n          dy,\r\n          d2,\r\n          node,\r\n          closest;\r\n\r\n      if (radius == null) radius = Infinity;\r\n      else radius *= radius;\r\n\r\n      for (i = 0; i < n; ++i) {\r\n        node = nodes[i];\r\n        dx = x - node.x;\r\n        dy = y - node.y;\r\n        d2 = dx * dx + dy * dy;\r\n        if (d2 < radius) closest = node, radius = d2;\r\n      }\r\n\r\n      return closest;\r\n    },\r\n\r\n    on: function(name, _) {\r\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\r\n    }\r\n  };\r\n}\r\n","export function basis(t1, v0, v1, v2, v3) {\r\n  var t2 = t1 * t1, t3 = t2 * t1;\r\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\r\n      + (4 - 6 * t2 + 3 * t3) * v1\r\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\r\n      + t3 * v3) / 6;\r\n}\r\n\r\nexport default function(values) {\r\n  var n = values.length - 1;\r\n  return function(t) {\r\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\r\n        v1 = values[i],\r\n        v2 = values[i + 1],\r\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\r\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\r\n    return basis((t - i / n) * n, v0, v1, v2, v3);\r\n  };\r\n}\r\n","import {basis} from \"./basis.js\";\r\n\r\nexport default function(values) {\r\n  var n = values.length;\r\n  return function(t) {\r\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\r\n        v0 = values[(i + n - 1) % n],\r\n        v1 = values[i % n],\r\n        v2 = values[(i + 1) % n],\r\n        v3 = values[(i + 2) % n];\r\n    return basis((t - i / n) * n, v0, v1, v2, v3);\r\n  };\r\n}\r\n","import constant from \"./constant.js\";\r\n\r\nfunction linear(a, d) {\r\n  return function(t) {\r\n    return a + t * d;\r\n  };\r\n}\r\n\r\nfunction exponential(a, b, y) {\r\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\r\n    return Math.pow(a + t * b, y);\r\n  };\r\n}\r\n\r\nexport function hue(a, b) {\r\n  var d = b - a;\r\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\r\n}\r\n\r\nexport function gamma(y) {\r\n  return (y = +y) === 1 ? nogamma : function(a, b) {\r\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\r\n  };\r\n}\r\n\r\nexport default function nogamma(a, b) {\r\n  var d = b - a;\r\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\r\n}\r\n","export default function(x) {\r\n  return function() {\r\n    return x;\r\n  };\r\n}\r\n","export default function(a, b) {\r\n  return a = +a, b = +b, function(t) {\r\n    return a * (1 - t) + b * t;\r\n  };\r\n}\r\n","import {rgb as colorRgb} from \"d3-color\";\r\nimport basis from \"./basis.js\";\r\nimport basisClosed from \"./basisClosed.js\";\r\nimport nogamma, {gamma} from \"./color.js\";\r\n\r\nexport default (function rgbGamma(y) {\r\n  var color = gamma(y);\r\n\r\n  function rgb(start, end) {\r\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\r\n        g = color(start.g, end.g),\r\n        b = color(start.b, end.b),\r\n        opacity = nogamma(start.opacity, end.opacity);\r\n    return function(t) {\r\n      start.r = r(t);\r\n      start.g = g(t);\r\n      start.b = b(t);\r\n      start.opacity = opacity(t);\r\n      return start + \"\";\r\n    };\r\n  }\r\n\r\n  rgb.gamma = rgbGamma;\r\n\r\n  return rgb;\r\n})(1);\r\n\r\nfunction rgbSpline(spline) {\r\n  return function(colors) {\r\n    var n = colors.length,\r\n        r = new Array(n),\r\n        g = new Array(n),\r\n        b = new Array(n),\r\n        i, color;\r\n    for (i = 0; i < n; ++i) {\r\n      color = colorRgb(colors[i]);\r\n      r[i] = color.r || 0;\r\n      g[i] = color.g || 0;\r\n      b[i] = color.b || 0;\r\n    }\r\n    r = spline(r);\r\n    g = spline(g);\r\n    b = spline(b);\r\n    color.opacity = 1;\r\n    return function(t) {\r\n      color.r = r(t);\r\n      color.g = g(t);\r\n      color.b = b(t);\r\n      return color + \"\";\r\n    };\r\n  };\r\n}\r\n\r\nexport var rgbBasis = rgbSpline(basis);\r\nexport var rgbBasisClosed = rgbSpline(basisClosed);\r\n","import number from \"./number.js\";\r\n\r\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\r\n    reB = new RegExp(reA.source, \"g\");\r\n\r\nfunction zero(b) {\r\n  return function() {\r\n    return b;\r\n  };\r\n}\r\n\r\nfunction one(b) {\r\n  return function(t) {\r\n    return b(t) + \"\";\r\n  };\r\n}\r\n\r\nexport default function(a, b) {\r\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\r\n      am, // current match in a\r\n      bm, // current match in b\r\n      bs, // string preceding current number in b, if any\r\n      i = -1, // index in s\r\n      s = [], // string constants and placeholders\r\n      q = []; // number interpolators\r\n\r\n  // Coerce inputs to strings.\r\n  a = a + \"\", b = b + \"\";\r\n\r\n  // Interpolate pairs of numbers in a & b.\r\n  while ((am = reA.exec(a))\r\n      && (bm = reB.exec(b))) {\r\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\r\n      bs = b.slice(bi, bs);\r\n      if (s[i]) s[i] += bs; // coalesce with previous string\r\n      else s[++i] = bs;\r\n    }\r\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\r\n      if (s[i]) s[i] += bm; // coalesce with previous string\r\n      else s[++i] = bm;\r\n    } else { // interpolate non-matching numbers\r\n      s[++i] = null;\r\n      q.push({i: i, x: number(am, bm)});\r\n    }\r\n    bi = reB.lastIndex;\r\n  }\r\n\r\n  // Add remains of b.\r\n  if (bi < b.length) {\r\n    bs = b.slice(bi);\r\n    if (s[i]) s[i] += bs; // coalesce with previous string\r\n    else s[++i] = bs;\r\n  }\r\n\r\n  // Special optimization for only a single match.\r\n  // Otherwise, interpolate each of the numbers and rejoin the string.\r\n  return s.length < 2 ? (q[0]\r\n      ? one(q[0].x)\r\n      : zero(b))\r\n      : (b = q.length, function(t) {\r\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\r\n          return s.join(\"\");\r\n        });\r\n}\r\n","var degrees = 180 / Math.PI;\r\n\r\nexport var identity = {\r\n  translateX: 0,\r\n  translateY: 0,\r\n  rotate: 0,\r\n  skewX: 0,\r\n  scaleX: 1,\r\n  scaleY: 1\r\n};\r\n\r\nexport default function(a, b, c, d, e, f) {\r\n  var scaleX, scaleY, skewX;\r\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\r\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\r\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\r\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\r\n  return {\r\n    translateX: e,\r\n    translateY: f,\r\n    rotate: Math.atan2(b, a) * degrees,\r\n    skewX: Math.atan(skewX) * degrees,\r\n    scaleX: scaleX,\r\n    scaleY: scaleY\r\n  };\r\n}\r\n","import number from \"../number.js\";\r\nimport {parseCss, parseSvg} from \"./parse.js\";\r\n\r\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\r\n\r\n  function pop(s) {\r\n    return s.length ? s.pop() + \" \" : \"\";\r\n  }\r\n\r\n  function translate(xa, ya, xb, yb, s, q) {\r\n    if (xa !== xb || ya !== yb) {\r\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\r\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\r\n    } else if (xb || yb) {\r\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\r\n    }\r\n  }\r\n\r\n  function rotate(a, b, s, q) {\r\n    if (a !== b) {\r\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\r\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\r\n    } else if (b) {\r\n      s.push(pop(s) + \"rotate(\" + b + degParen);\r\n    }\r\n  }\r\n\r\n  function skewX(a, b, s, q) {\r\n    if (a !== b) {\r\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\r\n    } else if (b) {\r\n      s.push(pop(s) + \"skewX(\" + b + degParen);\r\n    }\r\n  }\r\n\r\n  function scale(xa, ya, xb, yb, s, q) {\r\n    if (xa !== xb || ya !== yb) {\r\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\r\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\r\n    } else if (xb !== 1 || yb !== 1) {\r\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\r\n    }\r\n  }\r\n\r\n  return function(a, b) {\r\n    var s = [], // string constants and placeholders\r\n        q = []; // number interpolators\r\n    a = parse(a), b = parse(b);\r\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\r\n    rotate(a.rotate, b.rotate, s, q);\r\n    skewX(a.skewX, b.skewX, s, q);\r\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\r\n    a = b = null; // gc\r\n    return function(t) {\r\n      var i = -1, n = q.length, o;\r\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\r\n      return s.join(\"\");\r\n    };\r\n  };\r\n}\r\n\r\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\r\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\r\n","import decompose, {identity} from \"./decompose.js\";\r\n\r\nvar cssNode,\r\n    cssRoot,\r\n    cssView,\r\n    svgNode;\r\n\r\nexport function parseCss(value) {\r\n  if (value === \"none\") return identity;\r\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\r\n  cssNode.style.transform = value;\r\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\r\n  cssRoot.removeChild(cssNode);\r\n  value = value.slice(7, -1).split(\",\");\r\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\r\n}\r\n\r\nexport function parseSvg(value) {\r\n  if (value == null) return identity;\r\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\r\n  svgNode.setAttribute(\"transform\", value);\r\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\r\n  value = value.matrix;\r\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\r\n}\r\n","import defaultSource from \"./defaultSource\";\r\nimport irwinHall from \"./irwinHall\";\r\n\r\nexport default (function sourceRandomBates(source) {\r\n  function randomBates(n) {\r\n    var randomIrwinHall = irwinHall.source(source)(n);\r\n    return function() {\r\n      return randomIrwinHall() / n;\r\n    };\r\n  }\r\n\r\n  randomBates.source = sourceRandomBates;\r\n\r\n  return randomBates;\r\n})(defaultSource);\r\n","export default function() {\r\n  return Math.random();\r\n}\r\n","import defaultSource from \"./defaultSource\";\r\n\r\nexport default (function sourceRandomExponential(source) {\r\n  function randomExponential(lambda) {\r\n    return function() {\r\n      return -Math.log(1 - source()) / lambda;\r\n    };\r\n  }\r\n\r\n  randomExponential.source = sourceRandomExponential;\r\n\r\n  return randomExponential;\r\n})(defaultSource);\r\n","export {default as randomUniform} from \"./uniform\";\r\nexport {default as randomNormal} from \"./normal\";\r\nexport {default as randomLogNormal} from \"./logNormal\";\r\nexport {default as randomBates} from \"./bates\";\r\nexport {default as randomIrwinHall} from \"./irwinHall\";\r\nexport {default as randomExponential} from \"./exponential\";\r\n","import defaultSource from \"./defaultSource\";\r\n\r\nexport default (function sourceRandomIrwinHall(source) {\r\n  function randomIrwinHall(n) {\r\n    return function() {\r\n      for (var sum = 0, i = 0; i < n; ++i) sum += source();\r\n      return sum;\r\n    };\r\n  }\r\n\r\n  randomIrwinHall.source = sourceRandomIrwinHall;\r\n\r\n  return randomIrwinHall;\r\n})(defaultSource);\r\n","import defaultSource from \"./defaultSource\";\r\nimport normal from \"./normal\";\r\n\r\nexport default (function sourceRandomLogNormal(source) {\r\n  function randomLogNormal() {\r\n    var randomNormal = normal.source(source).apply(this, arguments);\r\n    return function() {\r\n      return Math.exp(randomNormal());\r\n    };\r\n  }\r\n\r\n  randomLogNormal.source = sourceRandomLogNormal;\r\n\r\n  return randomLogNormal;\r\n})(defaultSource);\r\n","import defaultSource from \"./defaultSource\";\r\n\r\nexport default (function sourceRandomNormal(source) {\r\n  function randomNormal(mu, sigma) {\r\n    var x, r;\r\n    mu = mu == null ? 0 : +mu;\r\n    sigma = sigma == null ? 1 : +sigma;\r\n    return function() {\r\n      var y;\r\n\r\n      // If available, use the second previously-generated uniform random.\r\n      if (x != null) y = x, x = null;\r\n\r\n      // Otherwise, generate a new x and y.\r\n      else do {\r\n        x = source() * 2 - 1;\r\n        y = source() * 2 - 1;\r\n        r = x * x + y * y;\r\n      } while (!r || r > 1);\r\n\r\n      return mu + sigma * y * Math.sqrt(-2 * Math.log(r) / r);\r\n    };\r\n  }\r\n\r\n  randomNormal.source = sourceRandomNormal;\r\n\r\n  return randomNormal;\r\n})(defaultSource);\r\n","import defaultSource from \"./defaultSource\";\r\n\r\nexport default (function sourceRandomUniform(source) {\r\n  function randomUniform(min, max) {\r\n    min = min == null ? 0 : +min;\r\n    max = max == null ? 1 : +max;\r\n    if (arguments.length === 1) max = min, min = 0;\r\n    else max -= min;\r\n    return function() {\r\n      return source() * max + min;\r\n    };\r\n  }\r\n\r\n  randomUniform.source = sourceRandomUniform;\r\n\r\n  return randomUniform;\r\n})(defaultSource);\r\n","var array = Array.prototype;\r\n\r\nexport var map = array.map;\r\nexport var slice = array.slice;\r\n","import {range as sequence} from \"d3-array\";\r\nimport {initRange} from \"./init\";\r\nimport ordinal from \"./ordinal\";\r\n\r\nexport default function band() {\r\n  var scale = ordinal().unknown(undefined),\r\n      domain = scale.domain,\r\n      ordinalRange = scale.range,\r\n      range = [0, 1],\r\n      step,\r\n      bandwidth,\r\n      round = false,\r\n      paddingInner = 0,\r\n      paddingOuter = 0,\r\n      align = 0.5;\r\n\r\n  delete scale.unknown;\r\n\r\n  function rescale() {\r\n    var n = domain().length,\r\n        reverse = range[1] < range[0],\r\n        start = range[reverse - 0],\r\n        stop = range[1 - reverse];\r\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\r\n    if (round) step = Math.floor(step);\r\n    start += (stop - start - step * (n - paddingInner)) * align;\r\n    bandwidth = step * (1 - paddingInner);\r\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\r\n    var values = sequence(n).map(function(i) { return start + step * i; });\r\n    return ordinalRange(reverse ? values.reverse() : values);\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (domain(_), rescale()) : domain();\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (range = [+_[0], +_[1]], rescale()) : range.slice();\r\n  };\r\n\r\n  scale.rangeRound = function(_) {\r\n    return range = [+_[0], +_[1]], round = true, rescale();\r\n  };\r\n\r\n  scale.bandwidth = function() {\r\n    return bandwidth;\r\n  };\r\n\r\n  scale.step = function() {\r\n    return step;\r\n  };\r\n\r\n  scale.round = function(_) {\r\n    return arguments.length ? (round = !!_, rescale()) : round;\r\n  };\r\n\r\n  scale.padding = function(_) {\r\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\r\n  };\r\n\r\n  scale.paddingInner = function(_) {\r\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\r\n  };\r\n\r\n  scale.paddingOuter = function(_) {\r\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\r\n  };\r\n\r\n  scale.align = function(_) {\r\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return band(domain(), range)\r\n        .round(round)\r\n        .paddingInner(paddingInner)\r\n        .paddingOuter(paddingOuter)\r\n        .align(align);\r\n  };\r\n\r\n  return initRange.apply(rescale(), arguments);\r\n}\r\n\r\nfunction pointish(scale) {\r\n  var copy = scale.copy;\r\n\r\n  scale.padding = scale.paddingOuter;\r\n  delete scale.paddingInner;\r\n  delete scale.paddingOuter;\r\n\r\n  scale.copy = function() {\r\n    return pointish(copy());\r\n  };\r\n\r\n  return scale;\r\n}\r\n\r\nexport function point() {\r\n  return pointish(band.apply(null, arguments).paddingInner(1));\r\n}\r\n","import {bisect} from \"d3-array\";\r\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\r\nimport {map, slice} from \"./array\";\r\nimport constant from \"./constant\";\r\nimport number from \"./number\";\r\n\r\nvar unit = [0, 1];\r\n\r\nexport function identity(x) {\r\n  return x;\r\n}\r\n\r\nfunction normalize(a, b) {\r\n  return (b -= (a = +a))\r\n      ? function(x) { return (x - a) / b; }\r\n      : constant(isNaN(b) ? NaN : 0.5);\r\n}\r\n\r\nfunction clamper(domain) {\r\n  var a = domain[0], b = domain[domain.length - 1], t;\r\n  if (a > b) t = a, a = b, b = t;\r\n  return function(x) { return Math.max(a, Math.min(b, x)); };\r\n}\r\n\r\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\r\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\r\nfunction bimap(domain, range, interpolate) {\r\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\r\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\r\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\r\n  return function(x) { return r0(d0(x)); };\r\n}\r\n\r\nfunction polymap(domain, range, interpolate) {\r\n  var j = Math.min(domain.length, range.length) - 1,\r\n      d = new Array(j),\r\n      r = new Array(j),\r\n      i = -1;\r\n\r\n  // Reverse descending domains.\r\n  if (domain[j] < domain[0]) {\r\n    domain = domain.slice().reverse();\r\n    range = range.slice().reverse();\r\n  }\r\n\r\n  while (++i < j) {\r\n    d[i] = normalize(domain[i], domain[i + 1]);\r\n    r[i] = interpolate(range[i], range[i + 1]);\r\n  }\r\n\r\n  return function(x) {\r\n    var i = bisect(domain, x, 1, j) - 1;\r\n    return r[i](d[i](x));\r\n  };\r\n}\r\n\r\nexport function copy(source, target) {\r\n  return target\r\n      .domain(source.domain())\r\n      .range(source.range())\r\n      .interpolate(source.interpolate())\r\n      .clamp(source.clamp())\r\n      .unknown(source.unknown());\r\n}\r\n\r\nexport function transformer() {\r\n  var domain = unit,\r\n      range = unit,\r\n      interpolate = interpolateValue,\r\n      transform,\r\n      untransform,\r\n      unknown,\r\n      clamp = identity,\r\n      piecewise,\r\n      output,\r\n      input;\r\n\r\n  function rescale() {\r\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\r\n    output = input = null;\r\n    return scale;\r\n  }\r\n\r\n  function scale(x) {\r\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\r\n  }\r\n\r\n  scale.invert = function(y) {\r\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\r\n  };\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\r\n  };\r\n\r\n  scale.rangeRound = function(_) {\r\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\r\n  };\r\n\r\n  scale.clamp = function(_) {\r\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\r\n  };\r\n\r\n  scale.interpolate = function(_) {\r\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  return function(t, u) {\r\n    transform = t, untransform = u;\r\n    return rescale();\r\n  };\r\n}\r\n\r\nexport default function continuous(transform, untransform) {\r\n  return transformer()(transform, untransform);\r\n}\r\n","import {identity} from \"./continuous\";\r\nimport {initInterpolator} from \"./init\";\r\nimport {linearish} from \"./linear\";\r\nimport {loggish} from \"./log\";\r\nimport {copy} from \"./sequential\";\r\nimport {symlogish} from \"./symlog\";\r\nimport {powish} from \"./pow\";\r\n\r\nfunction transformer() {\r\n  var x0 = 0,\r\n      x1 = 0.5,\r\n      x2 = 1,\r\n      t0,\r\n      t1,\r\n      t2,\r\n      k10,\r\n      k21,\r\n      interpolator = identity,\r\n      transform,\r\n      clamp = false,\r\n      unknown;\r\n\r\n  function scale(x) {\r\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (x < t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (t0 = transform(x0 = +_[0]), t1 = transform(x1 = +_[1]), t2 = transform(x2 = +_[2]), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), scale) : [x0, x1, x2];\r\n  };\r\n\r\n  scale.clamp = function(_) {\r\n    return arguments.length ? (clamp = !!_, scale) : clamp;\r\n  };\r\n\r\n  scale.interpolator = function(_) {\r\n    return arguments.length ? (interpolator = _, scale) : interpolator;\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  return function(t) {\r\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1);\r\n    return scale;\r\n  };\r\n}\r\n\r\nexport default function diverging() {\r\n  var scale = linearish(transformer()(identity));\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, diverging());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function divergingLog() {\r\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, divergingLog()).base(scale.base());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function divergingSymlog() {\r\n  var scale = symlogish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, divergingSymlog()).constant(scale.constant());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function divergingPow() {\r\n  var scale = powish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, divergingPow()).exponent(scale.exponent());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function divergingSqrt() {\r\n  return divergingPow.apply(null, arguments).exponent(0.5);\r\n}\r\n","import {map} from \"./array\";\r\nimport {linearish} from \"./linear\";\r\nimport number from \"./number\";\r\n\r\nexport default function identity(domain) {\r\n  var unknown;\r\n\r\n  function scale(x) {\r\n    return isNaN(x = +x) ? unknown : x;\r\n  }\r\n\r\n  scale.invert = scale;\r\n\r\n  scale.domain = scale.range = function(_) {\r\n    return arguments.length ? (domain = map.call(_, number), scale) : domain.slice();\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return identity(domain).unknown(unknown);\r\n  };\r\n\r\n  domain = arguments.length ? map.call(domain, number) : [0, 1];\r\n\r\n  return linearish(scale);\r\n}\r\n","export {\r\n  default as scaleBand,\r\n  point as scalePoint\r\n} from \"./band\";\r\n\r\nexport {\r\n  default as scaleIdentity\r\n} from \"./identity\";\r\n\r\nexport {\r\n  default as scaleLinear\r\n} from \"./linear\";\r\n\r\nexport {\r\n  default as scaleLog\r\n} from \"./log\";\r\n\r\nexport {\r\n  default as scaleSymlog\r\n} from \"./symlog\";\r\n\r\nexport {\r\n  default as scaleOrdinal,\r\n  implicit as scaleImplicit\r\n} from \"./ordinal\";\r\n\r\nexport {\r\n  default as scalePow,\r\n  sqrt as scaleSqrt\r\n} from \"./pow\";\r\n\r\nexport {\r\n  default as scaleQuantile\r\n} from \"./quantile\";\r\n\r\nexport {\r\n  default as scaleQuantize\r\n} from \"./quantize\";\r\n\r\nexport {\r\n  default as scaleThreshold\r\n} from \"./threshold\";\r\n\r\nexport {\r\n  default as scaleTime\r\n} from \"./time\";\r\n\r\nexport {\r\n  default as scaleUtc\r\n} from \"./utcTime\";\r\n\r\nexport {\r\n  default as scaleSequential,\r\n  sequentialLog as scaleSequentialLog,\r\n  sequentialPow as scaleSequentialPow,\r\n  sequentialSqrt as scaleSequentialSqrt,\r\n  sequentialSymlog as scaleSequentialSymlog\r\n} from \"./sequential\";\r\n\r\nexport {\r\n  default as scaleSequentialQuantile\r\n} from \"./sequentialQuantile\";\r\n\r\nexport {\r\n  default as scaleDiverging,\r\n  divergingLog as scaleDivergingLog,\r\n  divergingPow as scaleDivergingPow,\r\n  divergingSqrt as scaleDivergingSqrt,\r\n  divergingSymlog as scaleDivergingSymlog\r\n} from \"./diverging\";\r\n\r\nexport {\r\n  default as tickFormat\r\n} from \"./tickFormat\";\r\n","import {ticks, tickIncrement} from \"d3-array\";\r\nimport continuous, {copy, identity} from \"./continuous\";\r\nimport {initRange} from \"./init\";\r\nimport tickFormat from \"./tickFormat\";\r\n\r\nexport function linearish(scale) {\r\n  var domain = scale.domain;\r\n\r\n  scale.ticks = function(count) {\r\n    var d = domain();\r\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\r\n  };\r\n\r\n  scale.tickFormat = function(count, specifier) {\r\n    var d = domain();\r\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\r\n  };\r\n\r\n  scale.nice = function(count) {\r\n    if (count == null) count = 10;\r\n\r\n    var d = domain(),\r\n        i0 = 0,\r\n        i1 = d.length - 1,\r\n        start = d[i0],\r\n        stop = d[i1],\r\n        step;\r\n\r\n    if (stop < start) {\r\n      step = start, start = stop, stop = step;\r\n      step = i0, i0 = i1, i1 = step;\r\n    }\r\n\r\n    step = tickIncrement(start, stop, count);\r\n\r\n    if (step > 0) {\r\n      start = Math.floor(start / step) * step;\r\n      stop = Math.ceil(stop / step) * step;\r\n      step = tickIncrement(start, stop, count);\r\n    } else if (step < 0) {\r\n      start = Math.ceil(start * step) / step;\r\n      stop = Math.floor(stop * step) / step;\r\n      step = tickIncrement(start, stop, count);\r\n    }\r\n\r\n    if (step > 0) {\r\n      d[i0] = Math.floor(start / step) * step;\r\n      d[i1] = Math.ceil(stop / step) * step;\r\n      domain(d);\r\n    } else if (step < 0) {\r\n      d[i0] = Math.ceil(start * step) / step;\r\n      d[i1] = Math.floor(stop * step) / step;\r\n      domain(d);\r\n    }\r\n\r\n    return scale;\r\n  };\r\n\r\n  return scale;\r\n}\r\n\r\nexport default function linear() {\r\n  var scale = continuous(identity, identity);\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, linear());\r\n  };\r\n\r\n  initRange.apply(scale, arguments);\r\n\r\n  return linearish(scale);\r\n}\r\n","import {ticks} from \"d3-array\";\r\nimport {format} from \"d3-format\";\r\nimport nice from \"./nice\";\r\nimport {copy, transformer} from \"./continuous\";\r\nimport {initRange} from \"./init\";\r\n\r\nfunction transformLog(x) {\r\n  return Math.log(x);\r\n}\r\n\r\nfunction transformExp(x) {\r\n  return Math.exp(x);\r\n}\r\n\r\nfunction transformLogn(x) {\r\n  return -Math.log(-x);\r\n}\r\n\r\nfunction transformExpn(x) {\r\n  return -Math.exp(-x);\r\n}\r\n\r\nfunction pow10(x) {\r\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\r\n}\r\n\r\nfunction powp(base) {\r\n  return base === 10 ? pow10\r\n      : base === Math.E ? Math.exp\r\n      : function(x) { return Math.pow(base, x); };\r\n}\r\n\r\nfunction logp(base) {\r\n  return base === Math.E ? Math.log\r\n      : base === 10 && Math.log10\r\n      || base === 2 && Math.log2\r\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\r\n}\r\n\r\nfunction reflect(f) {\r\n  return function(x) {\r\n    return -f(-x);\r\n  };\r\n}\r\n\r\nexport function loggish(transform) {\r\n  var scale = transform(transformLog, transformExp),\r\n      domain = scale.domain,\r\n      base = 10,\r\n      logs,\r\n      pows;\r\n\r\n  function rescale() {\r\n    logs = logp(base), pows = powp(base);\r\n    if (domain()[0] < 0) {\r\n      logs = reflect(logs), pows = reflect(pows);\r\n      transform(transformLogn, transformExpn);\r\n    } else {\r\n      transform(transformLog, transformExp);\r\n    }\r\n    return scale;\r\n  }\r\n\r\n  scale.base = function(_) {\r\n    return arguments.length ? (base = +_, rescale()) : base;\r\n  };\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (domain(_), rescale()) : domain();\r\n  };\r\n\r\n  scale.ticks = function(count) {\r\n    var d = domain(),\r\n        u = d[0],\r\n        v = d[d.length - 1],\r\n        r;\r\n\r\n    if (r = v < u) i = u, u = v, v = i;\r\n\r\n    var i = logs(u),\r\n        j = logs(v),\r\n        p,\r\n        k,\r\n        t,\r\n        n = count == null ? 10 : +count,\r\n        z = [];\r\n\r\n    if (!(base % 1) && j - i < n) {\r\n      i = Math.round(i) - 1, j = Math.round(j) + 1;\r\n      if (u > 0) for (; i < j; ++i) {\r\n        for (k = 1, p = pows(i); k < base; ++k) {\r\n          t = p * k;\r\n          if (t < u) continue;\r\n          if (t > v) break;\r\n          z.push(t);\r\n        }\r\n      } else for (; i < j; ++i) {\r\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\r\n          t = p * k;\r\n          if (t < u) continue;\r\n          if (t > v) break;\r\n          z.push(t);\r\n        }\r\n      }\r\n    } else {\r\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\r\n    }\r\n\r\n    return r ? z.reverse() : z;\r\n  };\r\n\r\n  scale.tickFormat = function(count, specifier) {\r\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\r\n    if (typeof specifier !== \"function\") specifier = format(specifier);\r\n    if (count === Infinity) return specifier;\r\n    if (count == null) count = 10;\r\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\r\n    return function(d) {\r\n      var i = d / pows(Math.round(logs(d)));\r\n      if (i * base < base - 0.5) i *= base;\r\n      return i <= k ? specifier(d) : \"\";\r\n    };\r\n  };\r\n\r\n  scale.nice = function() {\r\n    return domain(nice(domain(), {\r\n      floor: function(x) { return pows(Math.floor(logs(x))); },\r\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\r\n    }));\r\n  };\r\n\r\n  return scale;\r\n}\r\n\r\nexport default function log() {\r\n  var scale = loggish(transformer()).domain([1, 10]);\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, log()).base(scale.base());\r\n  };\r\n\r\n  initRange.apply(scale, arguments);\r\n\r\n  return scale;\r\n}\r\n","import {map} from \"d3-collection\";\r\nimport {slice} from \"./array\";\r\nimport {initRange} from \"./init\";\r\n\r\nexport var implicit = {name: \"implicit\"};\r\n\r\nexport default function ordinal() {\r\n  var index = map(),\r\n      domain = [],\r\n      range = [],\r\n      unknown = implicit;\r\n\r\n  function scale(d) {\r\n    var key = d + \"\", i = index.get(key);\r\n    if (!i) {\r\n      if (unknown !== implicit) return unknown;\r\n      index.set(key, i = domain.push(d));\r\n    }\r\n    return range[(i - 1) % range.length];\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    if (!arguments.length) return domain.slice();\r\n    domain = [], index = map();\r\n    var i = -1, n = _.length, d, key;\r\n    while (++i < n) if (!index.has(key = (d = _[i]) + \"\")) index.set(key, domain.push(d));\r\n    return scale;\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (range = slice.call(_), scale) : range.slice();\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return ordinal(domain, range).unknown(unknown);\r\n  };\r\n\r\n  initRange.apply(scale, arguments);\r\n\r\n  return scale;\r\n}\r\n","import {linearish} from \"./linear\";\r\nimport {copy, identity, transformer} from \"./continuous\";\r\nimport {initRange} from \"./init\";\r\n\r\nfunction transformPow(exponent) {\r\n  return function(x) {\r\n    return x < 0 ? -Math.pow(-x, exponent) : Math.pow(x, exponent);\r\n  };\r\n}\r\n\r\nfunction transformSqrt(x) {\r\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\r\n}\r\n\r\nfunction transformSquare(x) {\r\n  return x < 0 ? -x * x : x * x;\r\n}\r\n\r\nexport function powish(transform) {\r\n  var scale = transform(identity, identity),\r\n      exponent = 1;\r\n\r\n  function rescale() {\r\n    return exponent === 1 ? transform(identity, identity)\r\n        : exponent === 0.5 ? transform(transformSqrt, transformSquare)\r\n        : transform(transformPow(exponent), transformPow(1 / exponent));\r\n  }\r\n\r\n  scale.exponent = function(_) {\r\n    return arguments.length ? (exponent = +_, rescale()) : exponent;\r\n  };\r\n\r\n  return linearish(scale);\r\n}\r\n\r\nexport default function pow() {\r\n  var scale = powish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, pow()).exponent(scale.exponent());\r\n  };\r\n\r\n  initRange.apply(scale, arguments);\r\n\r\n  return scale;\r\n}\r\n\r\nexport function sqrt() {\r\n  return pow.apply(null, arguments).exponent(0.5);\r\n}\r\n","import {ascending, bisect, quantile as threshold} from \"d3-array\";\r\nimport {slice} from \"./array\";\r\nimport {initRange} from \"./init\";\r\n\r\nexport default function quantile() {\r\n  var domain = [],\r\n      range = [],\r\n      thresholds = [],\r\n      unknown;\r\n\r\n  function rescale() {\r\n    var i = 0, n = Math.max(1, range.length);\r\n    thresholds = new Array(n - 1);\r\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\r\n    return scale;\r\n  }\r\n\r\n  function scale(x) {\r\n    return isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\r\n  }\r\n\r\n  scale.invertExtent = function(y) {\r\n    var i = range.indexOf(y);\r\n    return i < 0 ? [NaN, NaN] : [\r\n      i > 0 ? thresholds[i - 1] : domain[0],\r\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\r\n    ];\r\n  };\r\n\r\n  scale.domain = function(_) {\r\n    if (!arguments.length) return domain.slice();\r\n    domain = [];\r\n    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\r\n    domain.sort(ascending);\r\n    return rescale();\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  scale.quantiles = function() {\r\n    return thresholds.slice();\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return quantile()\r\n        .domain(domain)\r\n        .range(range)\r\n        .unknown(unknown);\r\n  };\r\n\r\n  return initRange.apply(scale, arguments);\r\n}\r\n","import {bisect} from \"d3-array\";\r\nimport {slice} from \"./array\";\r\nimport {linearish} from \"./linear\";\r\nimport {initRange} from \"./init\";\r\n\r\nexport default function quantize() {\r\n  var x0 = 0,\r\n      x1 = 1,\r\n      n = 1,\r\n      domain = [0.5],\r\n      range = [0, 1],\r\n      unknown;\r\n\r\n  function scale(x) {\r\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\r\n  }\r\n\r\n  function rescale() {\r\n    var i = -1;\r\n    domain = new Array(n);\r\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\r\n    return scale;\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\r\n  };\r\n\r\n  scale.invertExtent = function(y) {\r\n    var i = range.indexOf(y);\r\n    return i < 0 ? [NaN, NaN]\r\n        : i < 1 ? [x0, domain[0]]\r\n        : i >= n ? [domain[n - 1], x1]\r\n        : [domain[i - 1], domain[i]];\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : scale;\r\n  };\r\n\r\n  scale.thresholds = function() {\r\n    return domain.slice();\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return quantize()\r\n        .domain([x0, x1])\r\n        .range(range)\r\n        .unknown(unknown);\r\n  };\r\n\r\n  return initRange.apply(linearish(scale), arguments);\r\n}\r\n","import {identity} from \"./continuous\";\r\nimport {initInterpolator} from \"./init\";\r\nimport {linearish} from \"./linear\";\r\nimport {loggish} from \"./log\";\r\nimport {symlogish} from \"./symlog\";\r\nimport {powish} from \"./pow\";\r\n\r\nfunction transformer() {\r\n  var x0 = 0,\r\n      x1 = 1,\r\n      t0,\r\n      t1,\r\n      k10,\r\n      transform,\r\n      interpolator = identity,\r\n      clamp = false,\r\n      unknown;\r\n\r\n  function scale(x) {\r\n    return isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (t0 = transform(x0 = +_[0]), t1 = transform(x1 = +_[1]), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\r\n  };\r\n\r\n  scale.clamp = function(_) {\r\n    return arguments.length ? (clamp = !!_, scale) : clamp;\r\n  };\r\n\r\n  scale.interpolator = function(_) {\r\n    return arguments.length ? (interpolator = _, scale) : interpolator;\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  return function(t) {\r\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\r\n    return scale;\r\n  };\r\n}\r\n\r\nexport function copy(source, target) {\r\n  return target\r\n      .domain(source.domain())\r\n      .interpolator(source.interpolator())\r\n      .clamp(source.clamp())\r\n      .unknown(source.unknown());\r\n}\r\n\r\nexport default function sequential() {\r\n  var scale = linearish(transformer()(identity));\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, sequential());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function sequentialLog() {\r\n  var scale = loggish(transformer()).domain([1, 10]);\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, sequentialLog()).base(scale.base());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function sequentialSymlog() {\r\n  var scale = symlogish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function sequentialPow() {\r\n  var scale = powish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n\r\nexport function sequentialSqrt() {\r\n  return sequentialPow.apply(null, arguments).exponent(0.5);\r\n}\r\n","import {ascending, bisect} from \"d3-array\";\r\nimport {identity} from \"./continuous\";\r\nimport {initInterpolator} from \"./init\";\r\n\r\nexport default function sequentialQuantile() {\r\n  var domain = [],\r\n      interpolator = identity;\r\n\r\n  function scale(x) {\r\n    if (!isNaN(x = +x)) return interpolator((bisect(domain, x) - 1) / (domain.length - 1));\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    if (!arguments.length) return domain.slice();\r\n    domain = [];\r\n    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\r\n    domain.sort(ascending);\r\n    return scale;\r\n  };\r\n\r\n  scale.interpolator = function(_) {\r\n    return arguments.length ? (interpolator = _, scale) : interpolator;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return sequentialQuantile(interpolator).domain(domain);\r\n  };\r\n\r\n  return initInterpolator.apply(scale, arguments);\r\n}\r\n","import {linearish} from \"./linear\";\r\nimport {copy, transformer} from \"./continuous\";\r\nimport {initRange} from \"./init\";\r\n\r\nfunction transformSymlog(c) {\r\n  return function(x) {\r\n    return Math.sign(x) * Math.log1p(Math.abs(x / c));\r\n  };\r\n}\r\n\r\nfunction transformSymexp(c) {\r\n  return function(x) {\r\n    return Math.sign(x) * Math.expm1(Math.abs(x)) * c;\r\n  };\r\n}\r\n\r\nexport function symlogish(transform) {\r\n  var c = 1, scale = transform(transformSymlog(c), transformSymexp(c));\r\n\r\n  scale.constant = function(_) {\r\n    return arguments.length ? transform(transformSymlog(c = +_), transformSymexp(c)) : c;\r\n  };\r\n\r\n  return linearish(scale);\r\n}\r\n\r\nexport default function symlog() {\r\n  var scale = symlogish(transformer());\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, symlog()).constant(scale.constant());\r\n  };\r\n\r\n  return initRange.apply(scale, arguments);\r\n}\r\n","import {bisect} from \"d3-array\";\r\nimport {slice} from \"./array\";\r\nimport {initRange} from \"./init\";\r\n\r\nexport default function threshold() {\r\n  var domain = [0.5],\r\n      range = [0, 1],\r\n      unknown,\r\n      n = 1;\r\n\r\n  function scale(x) {\r\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\r\n  }\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\r\n  };\r\n\r\n  scale.range = function(_) {\r\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\r\n  };\r\n\r\n  scale.invertExtent = function(y) {\r\n    var i = range.indexOf(y);\r\n    return [domain[i - 1], domain[i]];\r\n  };\r\n\r\n  scale.unknown = function(_) {\r\n    return arguments.length ? (unknown = _, scale) : unknown;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return threshold()\r\n        .domain(domain)\r\n        .range(range)\r\n        .unknown(unknown);\r\n  };\r\n\r\n  return initRange.apply(scale, arguments);\r\n}\r\n","import {tickStep} from \"d3-array\";\r\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\r\n\r\nexport default function(start, stop, count, specifier) {\r\n  var step = tickStep(start, stop, count),\r\n      precision;\r\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\r\n  switch (specifier.type) {\r\n    case \"s\": {\r\n      var value = Math.max(Math.abs(start), Math.abs(stop));\r\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\r\n      return formatPrefix(specifier, value);\r\n    }\r\n    case \"\":\r\n    case \"e\":\r\n    case \"g\":\r\n    case \"p\":\r\n    case \"r\": {\r\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\r\n      break;\r\n    }\r\n    case \"f\":\r\n    case \"%\": {\r\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\r\n      break;\r\n    }\r\n  }\r\n  return format(specifier);\r\n}\r\n","import {bisector, tickStep} from \"d3-array\";\r\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\r\nimport {timeFormat} from \"d3-time-format\";\r\nimport {map} from \"./array\";\r\nimport continuous, {copy, identity} from \"./continuous\";\r\nimport {initRange} from \"./init\";\r\nimport nice from \"./nice\";\r\n\r\nvar durationSecond = 1000,\r\n    durationMinute = durationSecond * 60,\r\n    durationHour = durationMinute * 60,\r\n    durationDay = durationHour * 24,\r\n    durationWeek = durationDay * 7,\r\n    durationMonth = durationDay * 30,\r\n    durationYear = durationDay * 365;\r\n\r\nfunction date(t) {\r\n  return new Date(t);\r\n}\r\n\r\nfunction number(t) {\r\n  return t instanceof Date ? +t : +new Date(+t);\r\n}\r\n\r\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\r\n  var scale = continuous(identity, identity),\r\n      invert = scale.invert,\r\n      domain = scale.domain;\r\n\r\n  var formatMillisecond = format(\".%L\"),\r\n      formatSecond = format(\":%S\"),\r\n      formatMinute = format(\"%I:%M\"),\r\n      formatHour = format(\"%I %p\"),\r\n      formatDay = format(\"%a %d\"),\r\n      formatWeek = format(\"%b %d\"),\r\n      formatMonth = format(\"%B\"),\r\n      formatYear = format(\"%Y\");\r\n\r\n  var tickIntervals = [\r\n    [second,  1,      durationSecond],\r\n    [second,  5,  5 * durationSecond],\r\n    [second, 15, 15 * durationSecond],\r\n    [second, 30, 30 * durationSecond],\r\n    [minute,  1,      durationMinute],\r\n    [minute,  5,  5 * durationMinute],\r\n    [minute, 15, 15 * durationMinute],\r\n    [minute, 30, 30 * durationMinute],\r\n    [  hour,  1,      durationHour  ],\r\n    [  hour,  3,  3 * durationHour  ],\r\n    [  hour,  6,  6 * durationHour  ],\r\n    [  hour, 12, 12 * durationHour  ],\r\n    [   day,  1,      durationDay   ],\r\n    [   day,  2,  2 * durationDay   ],\r\n    [  week,  1,      durationWeek  ],\r\n    [ month,  1,      durationMonth ],\r\n    [ month,  3,  3 * durationMonth ],\r\n    [  year,  1,      durationYear  ]\r\n  ];\r\n\r\n  function tickFormat(date) {\r\n    return (second(date) < date ? formatMillisecond\r\n        : minute(date) < date ? formatSecond\r\n        : hour(date) < date ? formatMinute\r\n        : day(date) < date ? formatHour\r\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\r\n        : year(date) < date ? formatMonth\r\n        : formatYear)(date);\r\n  }\r\n\r\n  function tickInterval(interval, start, stop, step) {\r\n    if (interval == null) interval = 10;\r\n\r\n    // If a desired tick count is specified, pick a reasonable tick interval\r\n    // based on the extent of the domain and a rough estimate of tick size.\r\n    // Otherwise, assume interval is already a time interval and use it.\r\n    if (typeof interval === \"number\") {\r\n      var target = Math.abs(stop - start) / interval,\r\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target);\r\n      if (i === tickIntervals.length) {\r\n        step = tickStep(start / durationYear, stop / durationYear, interval);\r\n        interval = year;\r\n      } else if (i) {\r\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\r\n        step = i[1];\r\n        interval = i[0];\r\n      } else {\r\n        step = Math.max(tickStep(start, stop, interval), 1);\r\n        interval = millisecond;\r\n      }\r\n    }\r\n\r\n    return step == null ? interval : interval.every(step);\r\n  }\r\n\r\n  scale.invert = function(y) {\r\n    return new Date(invert(y));\r\n  };\r\n\r\n  scale.domain = function(_) {\r\n    return arguments.length ? domain(map.call(_, number)) : domain().map(date);\r\n  };\r\n\r\n  scale.ticks = function(interval, step) {\r\n    var d = domain(),\r\n        t0 = d[0],\r\n        t1 = d[d.length - 1],\r\n        r = t1 < t0,\r\n        t;\r\n    if (r) t = t0, t0 = t1, t1 = t;\r\n    t = tickInterval(interval, t0, t1, step);\r\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\r\n    return r ? t.reverse() : t;\r\n  };\r\n\r\n  scale.tickFormat = function(count, specifier) {\r\n    return specifier == null ? tickFormat : format(specifier);\r\n  };\r\n\r\n  scale.nice = function(interval, step) {\r\n    var d = domain();\r\n    return (interval = tickInterval(interval, d[0], d[d.length - 1], step))\r\n        ? domain(nice(d, interval))\r\n        : scale;\r\n  };\r\n\r\n  scale.copy = function() {\r\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\r\n  };\r\n\r\n  return scale;\r\n}\r\n\r\nexport default function() {\r\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\r\n}\r\n","import {calendar} from \"./time\";\r\nimport {utcFormat} from \"d3-time-format\";\r\nimport {utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond} from \"d3-time\";\r\nimport {initRange} from \"./init\";\r\n\r\nexport default function() {\r\n  return initRange.apply(calendar(utcYear, utcMonth, utcWeek, utcDay, utcHour, utcMinute, utcSecond, utcMillisecond, utcFormat).domain([Date.UTC(2000, 0, 1), Date.UTC(2000, 0, 2)]), arguments);\r\n}\r\n","export default function(x) {\r\n  return function() {\r\n    return x;\r\n  };\r\n}\r\n","import namespace from \"./namespace\";\r\nimport {xhtml} from \"./namespaces\";\r\n\r\nfunction creatorInherit(name) {\r\n  return function() {\r\n    var document = this.ownerDocument,\r\n        uri = this.namespaceURI;\r\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\r\n        ? document.createElement(name)\r\n        : document.createElementNS(uri, name);\r\n  };\r\n}\r\n\r\nfunction creatorFixed(fullname) {\r\n  return function() {\r\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\r\n  };\r\n}\r\n\r\nexport default function(name) {\r\n  var fullname = namespace(name);\r\n  return (fullname.local\r\n      ? creatorFixed\r\n      : creatorInherit)(fullname);\r\n}\r\n","export {default as create} from \"./create\";\r\nexport {default as creator} from \"./creator\";\r\nexport {default as local} from \"./local\";\r\nexport {default as matcher} from \"./matcher\";\r\nexport {default as mouse} from \"./mouse\";\r\nexport {default as namespace} from \"./namespace\";\r\nexport {default as namespaces} from \"./namespaces\";\r\nexport {default as clientPoint} from \"./point\";\r\nexport {default as select} from \"./select\";\r\nexport {default as selectAll} from \"./selectAll\";\r\nexport {default as selection} from \"./selection/index\";\r\nexport {default as selector} from \"./selector\";\r\nexport {default as selectorAll} from \"./selectorAll\";\r\nexport {styleValue as style} from \"./selection/style\";\r\nexport {default as touch} from \"./touch\";\r\nexport {default as touches} from \"./touches\";\r\nexport {default as window} from \"./window\";\r\nexport {event, customEvent} from \"./selection/on\";\r\n","export default function(selector) {\r\n  return function() {\r\n    return this.matches(selector);\r\n  };\r\n}\r\n","import namespaces from \"./namespaces\";\r\n\r\nexport default function(name) {\r\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\r\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\r\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\r\n}\r\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\r\n\r\nexport default {\r\n  svg: \"http://www.w3.org/2000/svg\",\r\n  xhtml: xhtml,\r\n  xlink: \"http://www.w3.org/1999/xlink\",\r\n  xml: \"http://www.w3.org/XML/1998/namespace\",\r\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\r\n};\r\n","import {Selection, root} from \"./selection/index\";\r\n\r\nexport default function(selector) {\r\n  return typeof selector === \"string\"\r\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\r\n      : new Selection([[selector]], root);\r\n}\r\n","import {Selection, root} from \"./selection/index\";\r\n\r\nexport default function(selector) {\r\n  return typeof selector === \"string\"\r\n      ? new Selection([document.querySelectorAll(selector)], [document.documentElement])\r\n      : new Selection([selector == null ? [] : selector], root);\r\n}\r\n","import creator from \"../creator\";\r\n\r\nexport default function(name) {\r\n  var create = typeof name === \"function\" ? name : creator(name);\r\n  return this.select(function() {\r\n    return this.appendChild(create.apply(this, arguments));\r\n  });\r\n}\r\n","import namespace from \"../namespace\";\r\n\r\nfunction attrRemove(name) {\r\n  return function() {\r\n    this.removeAttribute(name);\r\n  };\r\n}\r\n\r\nfunction attrRemoveNS(fullname) {\r\n  return function() {\r\n    this.removeAttributeNS(fullname.space, fullname.local);\r\n  };\r\n}\r\n\r\nfunction attrConstant(name, value) {\r\n  return function() {\r\n    this.setAttribute(name, value);\r\n  };\r\n}\r\n\r\nfunction attrConstantNS(fullname, value) {\r\n  return function() {\r\n    this.setAttributeNS(fullname.space, fullname.local, value);\r\n  };\r\n}\r\n\r\nfunction attrFunction(name, value) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    if (v == null) this.removeAttribute(name);\r\n    else this.setAttribute(name, v);\r\n  };\r\n}\r\n\r\nfunction attrFunctionNS(fullname, value) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\r\n    else this.setAttributeNS(fullname.space, fullname.local, v);\r\n  };\r\n}\r\n\r\nexport default function(name, value) {\r\n  var fullname = namespace(name);\r\n\r\n  if (arguments.length < 2) {\r\n    var node = this.node();\r\n    return fullname.local\r\n        ? node.getAttributeNS(fullname.space, fullname.local)\r\n        : node.getAttribute(fullname);\r\n  }\r\n\r\n  return this.each((value == null\r\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\r\n      ? (fullname.local ? attrFunctionNS : attrFunction)\r\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\r\n}\r\n","export default function() {\r\n  var callback = arguments[0];\r\n  arguments[0] = this;\r\n  callback.apply(null, arguments);\r\n  return this;\r\n}\r\n","function classArray(string) {\r\n  return string.trim().split(/^|\\s+/);\r\n}\r\n\r\nfunction classList(node) {\r\n  return node.classList || new ClassList(node);\r\n}\r\n\r\nfunction ClassList(node) {\r\n  this._node = node;\r\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\r\n}\r\n\r\nClassList.prototype = {\r\n  add: function(name) {\r\n    var i = this._names.indexOf(name);\r\n    if (i < 0) {\r\n      this._names.push(name);\r\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\r\n    }\r\n  },\r\n  remove: function(name) {\r\n    var i = this._names.indexOf(name);\r\n    if (i >= 0) {\r\n      this._names.splice(i, 1);\r\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\r\n    }\r\n  },\r\n  contains: function(name) {\r\n    return this._names.indexOf(name) >= 0;\r\n  }\r\n};\r\n\r\nfunction classedAdd(node, names) {\r\n  var list = classList(node), i = -1, n = names.length;\r\n  while (++i < n) list.add(names[i]);\r\n}\r\n\r\nfunction classedRemove(node, names) {\r\n  var list = classList(node), i = -1, n = names.length;\r\n  while (++i < n) list.remove(names[i]);\r\n}\r\n\r\nfunction classedTrue(names) {\r\n  return function() {\r\n    classedAdd(this, names);\r\n  };\r\n}\r\n\r\nfunction classedFalse(names) {\r\n  return function() {\r\n    classedRemove(this, names);\r\n  };\r\n}\r\n\r\nfunction classedFunction(names, value) {\r\n  return function() {\r\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\r\n  };\r\n}\r\n\r\nexport default function(name, value) {\r\n  var names = classArray(name + \"\");\r\n\r\n  if (arguments.length < 2) {\r\n    var list = classList(this.node()), i = -1, n = names.length;\r\n    while (++i < n) if (!list.contains(names[i])) return false;\r\n    return true;\r\n  }\r\n\r\n  return this.each((typeof value === \"function\"\r\n      ? classedFunction : value\r\n      ? classedTrue\r\n      : classedFalse)(names, value));\r\n}\r\n","function selection_cloneShallow() {\r\n  var clone = this.cloneNode(false), parent = this.parentNode;\r\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\r\n}\r\n\r\nfunction selection_cloneDeep() {\r\n  var clone = this.cloneNode(true), parent = this.parentNode;\r\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\r\n}\r\n\r\nexport default function(deep) {\r\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\r\n}\r\n","import {Selection} from \"./index\";\r\nimport {EnterNode} from \"./enter\";\r\nimport constant from \"../constant\";\r\n\r\nvar keyPrefix = \"$\"; // Protect against keys like __proto__.\r\n\r\nfunction bindIndex(parent, group, enter, update, exit, data) {\r\n  var i = 0,\r\n      node,\r\n      groupLength = group.length,\r\n      dataLength = data.length;\r\n\r\n  // Put any non-null nodes that fit into update.\r\n  // Put any null nodes into enter.\r\n  // Put any remaining data into enter.\r\n  for (; i < dataLength; ++i) {\r\n    if (node = group[i]) {\r\n      node.__data__ = data[i];\r\n      update[i] = node;\r\n    } else {\r\n      enter[i] = new EnterNode(parent, data[i]);\r\n    }\r\n  }\r\n\r\n  // Put any non-null nodes that dont fit into exit.\r\n  for (; i < groupLength; ++i) {\r\n    if (node = group[i]) {\r\n      exit[i] = node;\r\n    }\r\n  }\r\n}\r\n\r\nfunction bindKey(parent, group, enter, update, exit, data, key) {\r\n  var i,\r\n      node,\r\n      nodeByKeyValue = {},\r\n      groupLength = group.length,\r\n      dataLength = data.length,\r\n      keyValues = new Array(groupLength),\r\n      keyValue;\r\n\r\n  // Compute the key for each node.\r\n  // If multiple nodes have the same key, the duplicates are added to exit.\r\n  for (i = 0; i < groupLength; ++i) {\r\n    if (node = group[i]) {\r\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\r\n      if (keyValue in nodeByKeyValue) {\r\n        exit[i] = node;\r\n      } else {\r\n        nodeByKeyValue[keyValue] = node;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Compute the key for each datum.\r\n  // If there a node associated with this key, join and add it to update.\r\n  // If there is not (or the key is a duplicate), add it to enter.\r\n  for (i = 0; i < dataLength; ++i) {\r\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\r\n    if (node = nodeByKeyValue[keyValue]) {\r\n      update[i] = node;\r\n      node.__data__ = data[i];\r\n      nodeByKeyValue[keyValue] = null;\r\n    } else {\r\n      enter[i] = new EnterNode(parent, data[i]);\r\n    }\r\n  }\r\n\r\n  // Add any remaining nodes that were not bound to data to exit.\r\n  for (i = 0; i < groupLength; ++i) {\r\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\r\n      exit[i] = node;\r\n    }\r\n  }\r\n}\r\n\r\nexport default function(value, key) {\r\n  if (!value) {\r\n    data = new Array(this.size()), j = -1;\r\n    this.each(function(d) { data[++j] = d; });\r\n    return data;\r\n  }\r\n\r\n  var bind = key ? bindKey : bindIndex,\r\n      parents = this._parents,\r\n      groups = this._groups;\r\n\r\n  if (typeof value !== \"function\") value = constant(value);\r\n\r\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\r\n    var parent = parents[j],\r\n        group = groups[j],\r\n        groupLength = group.length,\r\n        data = value.call(parent, parent && parent.__data__, j, parents),\r\n        dataLength = data.length,\r\n        enterGroup = enter[j] = new Array(dataLength),\r\n        updateGroup = update[j] = new Array(dataLength),\r\n        exitGroup = exit[j] = new Array(groupLength);\r\n\r\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\r\n\r\n    // Now connect the enter nodes to their following update node, such that\r\n    // appendChild can insert the materialized enter node before this node,\r\n    // rather than at the end of the parent node.\r\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\r\n      if (previous = enterGroup[i0]) {\r\n        if (i0 >= i1) i1 = i0 + 1;\r\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\r\n        previous._next = next || null;\r\n      }\r\n    }\r\n  }\r\n\r\n  update = new Selection(update, parents);\r\n  update._enter = enter;\r\n  update._exit = exit;\r\n  return update;\r\n}\r\n","export default function(value) {\r\n  return arguments.length\r\n      ? this.property(\"__data__\", value)\r\n      : this.node().__data__;\r\n}\r\n","import defaultView from \"../window\";\r\n\r\nfunction dispatchEvent(node, type, params) {\r\n  var window = defaultView(node),\r\n      event = window.CustomEvent;\r\n\r\n  if (typeof event === \"function\") {\r\n    event = new event(type, params);\r\n  } else {\r\n    event = window.document.createEvent(\"Event\");\r\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\r\n    else event.initEvent(type, false, false);\r\n  }\r\n\r\n  node.dispatchEvent(event);\r\n}\r\n\r\nfunction dispatchConstant(type, params) {\r\n  return function() {\r\n    return dispatchEvent(this, type, params);\r\n  };\r\n}\r\n\r\nfunction dispatchFunction(type, params) {\r\n  return function() {\r\n    return dispatchEvent(this, type, params.apply(this, arguments));\r\n  };\r\n}\r\n\r\nexport default function(type, params) {\r\n  return this.each((typeof params === \"function\"\r\n      ? dispatchFunction\r\n      : dispatchConstant)(type, params));\r\n}\r\n","export default function(callback) {\r\n\r\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\r\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\r\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\r\n    }\r\n  }\r\n\r\n  return this;\r\n}\r\n","export default function() {\r\n  return !this.node();\r\n}\r\n","import sparse from \"./sparse\";\r\nimport {Selection} from \"./index\";\r\n\r\nexport default function() {\r\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\r\n}\r\n\r\nexport function EnterNode(parent, datum) {\r\n  this.ownerDocument = parent.ownerDocument;\r\n  this.namespaceURI = parent.namespaceURI;\r\n  this._next = null;\r\n  this._parent = parent;\r\n  this.__data__ = datum;\r\n}\r\n\r\nEnterNode.prototype = {\r\n  constructor: EnterNode,\r\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\r\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\r\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\r\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\r\n};\r\n","import sparse from \"./sparse\";\r\nimport {Selection} from \"./index\";\r\n\r\nexport default function() {\r\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\r\n}\r\n","import {Selection} from \"./index\";\r\nimport matcher from \"../matcher\";\r\n\r\nexport default function(match) {\r\n  if (typeof match !== \"function\") match = matcher(match);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\r\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\r\n        subgroup.push(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Selection(subgroups, this._parents);\r\n}\r\n","function htmlRemove() {\r\n  this.innerHTML = \"\";\r\n}\r\n\r\nfunction htmlConstant(value) {\r\n  return function() {\r\n    this.innerHTML = value;\r\n  };\r\n}\r\n\r\nfunction htmlFunction(value) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    this.innerHTML = v == null ? \"\" : v;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  return arguments.length\r\n      ? this.each(value == null\r\n          ? htmlRemove : (typeof value === \"function\"\r\n          ? htmlFunction\r\n          : htmlConstant)(value))\r\n      : this.node().innerHTML;\r\n}\r\n","import selection_select from \"./select\";\r\nimport selection_selectAll from \"./selectAll\";\r\nimport selection_filter from \"./filter\";\r\nimport selection_data from \"./data\";\r\nimport selection_enter from \"./enter\";\r\nimport selection_exit from \"./exit\";\r\nimport selection_join from \"./join\";\r\nimport selection_merge from \"./merge\";\r\nimport selection_order from \"./order\";\r\nimport selection_sort from \"./sort\";\r\nimport selection_call from \"./call\";\r\nimport selection_nodes from \"./nodes\";\r\nimport selection_node from \"./node\";\r\nimport selection_size from \"./size\";\r\nimport selection_empty from \"./empty\";\r\nimport selection_each from \"./each\";\r\nimport selection_attr from \"./attr\";\r\nimport selection_style from \"./style\";\r\nimport selection_property from \"./property\";\r\nimport selection_classed from \"./classed\";\r\nimport selection_text from \"./text\";\r\nimport selection_html from \"./html\";\r\nimport selection_raise from \"./raise\";\r\nimport selection_lower from \"./lower\";\r\nimport selection_append from \"./append\";\r\nimport selection_insert from \"./insert\";\r\nimport selection_remove from \"./remove\";\r\nimport selection_clone from \"./clone\";\r\nimport selection_datum from \"./datum\";\r\nimport selection_on from \"./on\";\r\nimport selection_dispatch from \"./dispatch\";\r\n\r\nexport var root = [null];\r\n\r\nexport function Selection(groups, parents) {\r\n  this._groups = groups;\r\n  this._parents = parents;\r\n}\r\n\r\nfunction selection() {\r\n  return new Selection([[document.documentElement]], root);\r\n}\r\n\r\nSelection.prototype = selection.prototype = {\r\n  constructor: Selection,\r\n  select: selection_select,\r\n  selectAll: selection_selectAll,\r\n  filter: selection_filter,\r\n  data: selection_data,\r\n  enter: selection_enter,\r\n  exit: selection_exit,\r\n  join: selection_join,\r\n  merge: selection_merge,\r\n  order: selection_order,\r\n  sort: selection_sort,\r\n  call: selection_call,\r\n  nodes: selection_nodes,\r\n  node: selection_node,\r\n  size: selection_size,\r\n  empty: selection_empty,\r\n  each: selection_each,\r\n  attr: selection_attr,\r\n  style: selection_style,\r\n  property: selection_property,\r\n  classed: selection_classed,\r\n  text: selection_text,\r\n  html: selection_html,\r\n  raise: selection_raise,\r\n  lower: selection_lower,\r\n  append: selection_append,\r\n  insert: selection_insert,\r\n  remove: selection_remove,\r\n  clone: selection_clone,\r\n  datum: selection_datum,\r\n  on: selection_on,\r\n  dispatch: selection_dispatch\r\n};\r\n\r\nexport default selection;\r\n","import creator from \"../creator\";\r\nimport selector from \"../selector\";\r\n\r\nfunction constantNull() {\r\n  return null;\r\n}\r\n\r\nexport default function(name, before) {\r\n  var create = typeof name === \"function\" ? name : creator(name),\r\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\r\n  return this.select(function() {\r\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\r\n  });\r\n}\r\n","export default function(onenter, onupdate, onexit) {\r\n  var enter = this.enter(), update = this, exit = this.exit();\r\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\r\n  if (onupdate != null) update = onupdate(update);\r\n  if (onexit == null) exit.remove(); else onexit(exit);\r\n  return enter && update ? enter.merge(update).order() : update;\r\n}\r\n","function lower() {\r\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\r\n}\r\n\r\nexport default function() {\r\n  return this.each(lower);\r\n}\r\n","import {Selection} from \"./index\";\r\n\r\nexport default function(selection) {\r\n\r\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\r\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\r\n      if (node = group0[i] || group1[i]) {\r\n        merge[i] = node;\r\n      }\r\n    }\r\n  }\r\n\r\n  for (; j < m0; ++j) {\r\n    merges[j] = groups0[j];\r\n  }\r\n\r\n  return new Selection(merges, this._parents);\r\n}\r\n","export default function() {\r\n\r\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\r\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\r\n      var node = group[i];\r\n      if (node) return node;\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n","export default function() {\r\n  var nodes = new Array(this.size()), i = -1;\r\n  this.each(function() { nodes[++i] = this; });\r\n  return nodes;\r\n}\r\n","var filterEvents = {};\r\n\r\nexport var event = null;\r\n\r\nif (typeof document !== \"undefined\") {\r\n  var element = document.documentElement;\r\n  if (!(\"onmouseenter\" in element)) {\r\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\r\n  }\r\n}\r\n\r\nfunction filterContextListener(listener, index, group) {\r\n  listener = contextListener(listener, index, group);\r\n  return function(event) {\r\n    var related = event.relatedTarget;\r\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\r\n      listener.call(this, event);\r\n    }\r\n  };\r\n}\r\n\r\nfunction contextListener(listener, index, group) {\r\n  return function(event1) {\r\n    var event0 = event; // Events can be reentrant (e.g., focus).\r\n    event = event1;\r\n    try {\r\n      listener.call(this, this.__data__, index, group);\r\n    } finally {\r\n      event = event0;\r\n    }\r\n  };\r\n}\r\n\r\nfunction parseTypenames(typenames) {\r\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\r\n    var name = \"\", i = t.indexOf(\".\");\r\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\r\n    return {type: t, name: name};\r\n  });\r\n}\r\n\r\nfunction onRemove(typename) {\r\n  return function() {\r\n    var on = this.__on;\r\n    if (!on) return;\r\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\r\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\r\n        this.removeEventListener(o.type, o.listener, o.capture);\r\n      } else {\r\n        on[++i] = o;\r\n      }\r\n    }\r\n    if (++i) on.length = i;\r\n    else delete this.__on;\r\n  };\r\n}\r\n\r\nfunction onAdd(typename, value, capture) {\r\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\r\n  return function(d, i, group) {\r\n    var on = this.__on, o, listener = wrap(value, i, group);\r\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\r\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\r\n        this.removeEventListener(o.type, o.listener, o.capture);\r\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\r\n        o.value = value;\r\n        return;\r\n      }\r\n    }\r\n    this.addEventListener(typename.type, listener, capture);\r\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\r\n    if (!on) this.__on = [o];\r\n    else on.push(o);\r\n  };\r\n}\r\n\r\nexport default function(typename, value, capture) {\r\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\r\n\r\n  if (arguments.length < 2) {\r\n    var on = this.node().__on;\r\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\r\n      for (i = 0, o = on[j]; i < n; ++i) {\r\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\r\n          return o.value;\r\n        }\r\n      }\r\n    }\r\n    return;\r\n  }\r\n\r\n  on = value ? onAdd : onRemove;\r\n  if (capture == null) capture = false;\r\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\r\n  return this;\r\n}\r\n\r\nexport function customEvent(event1, listener, that, args) {\r\n  var event0 = event;\r\n  event1.sourceEvent = event;\r\n  event = event1;\r\n  try {\r\n    return listener.apply(that, args);\r\n  } finally {\r\n    event = event0;\r\n  }\r\n}\r\n","export default function() {\r\n\r\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\r\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\r\n      if (node = group[i]) {\r\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\r\n        next = node;\r\n      }\r\n    }\r\n  }\r\n\r\n  return this;\r\n}\r\n","function propertyRemove(name) {\r\n  return function() {\r\n    delete this[name];\r\n  };\r\n}\r\n\r\nfunction propertyConstant(name, value) {\r\n  return function() {\r\n    this[name] = value;\r\n  };\r\n}\r\n\r\nfunction propertyFunction(name, value) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    if (v == null) delete this[name];\r\n    else this[name] = v;\r\n  };\r\n}\r\n\r\nexport default function(name, value) {\r\n  return arguments.length > 1\r\n      ? this.each((value == null\r\n          ? propertyRemove : typeof value === \"function\"\r\n          ? propertyFunction\r\n          : propertyConstant)(name, value))\r\n      : this.node()[name];\r\n}\r\n","function raise() {\r\n  if (this.nextSibling) this.parentNode.appendChild(this);\r\n}\r\n\r\nexport default function() {\r\n  return this.each(raise);\r\n}\r\n","function remove() {\r\n  var parent = this.parentNode;\r\n  if (parent) parent.removeChild(this);\r\n}\r\n\r\nexport default function() {\r\n  return this.each(remove);\r\n}\r\n","import {Selection} from \"./index\";\r\nimport selector from \"../selector\";\r\n\r\nexport default function(select) {\r\n  if (typeof select !== \"function\") select = selector(select);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\r\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\r\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\r\n        subgroup[i] = subnode;\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Selection(subgroups, this._parents);\r\n}\r\n","import {Selection} from \"./index\";\r\nimport selectorAll from \"../selectorAll\";\r\n\r\nexport default function(select) {\r\n  if (typeof select !== \"function\") select = selectorAll(select);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\r\n      if (node = group[i]) {\r\n        subgroups.push(select.call(node, node.__data__, i, group));\r\n        parents.push(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Selection(subgroups, parents);\r\n}\r\n","export default function() {\r\n  var size = 0;\r\n  this.each(function() { ++size; });\r\n  return size;\r\n}\r\n","import {Selection} from \"./index\";\r\n\r\nexport default function(compare) {\r\n  if (!compare) compare = ascending;\r\n\r\n  function compareNode(a, b) {\r\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\r\n  }\r\n\r\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\r\n      if (node = group[i]) {\r\n        sortgroup[i] = node;\r\n      }\r\n    }\r\n    sortgroup.sort(compareNode);\r\n  }\r\n\r\n  return new Selection(sortgroups, this._parents).order();\r\n}\r\n\r\nfunction ascending(a, b) {\r\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\r\n}\r\n","export default function(update) {\r\n  return new Array(update.length);\r\n}\r\n","import defaultView from \"../window\";\r\n\r\nfunction styleRemove(name) {\r\n  return function() {\r\n    this.style.removeProperty(name);\r\n  };\r\n}\r\n\r\nfunction styleConstant(name, value, priority) {\r\n  return function() {\r\n    this.style.setProperty(name, value, priority);\r\n  };\r\n}\r\n\r\nfunction styleFunction(name, value, priority) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    if (v == null) this.style.removeProperty(name);\r\n    else this.style.setProperty(name, v, priority);\r\n  };\r\n}\r\n\r\nexport default function(name, value, priority) {\r\n  return arguments.length > 1\r\n      ? this.each((value == null\r\n            ? styleRemove : typeof value === \"function\"\r\n            ? styleFunction\r\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\r\n      : styleValue(this.node(), name);\r\n}\r\n\r\nexport function styleValue(node, name) {\r\n  return node.style.getPropertyValue(name)\r\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\r\n}\r\n","function textRemove() {\r\n  this.textContent = \"\";\r\n}\r\n\r\nfunction textConstant(value) {\r\n  return function() {\r\n    this.textContent = value;\r\n  };\r\n}\r\n\r\nfunction textFunction(value) {\r\n  return function() {\r\n    var v = value.apply(this, arguments);\r\n    this.textContent = v == null ? \"\" : v;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  return arguments.length\r\n      ? this.each(value == null\r\n          ? textRemove : (typeof value === \"function\"\r\n          ? textFunction\r\n          : textConstant)(value))\r\n      : this.node().textContent;\r\n}\r\n","function none() {}\r\n\r\nexport default function(selector) {\r\n  return selector == null ? none : function() {\r\n    return this.querySelector(selector);\r\n  };\r\n}\r\n","function empty() {\r\n  return [];\r\n}\r\n\r\nexport default function(selector) {\r\n  return selector == null ? empty : function() {\r\n    return this.querySelectorAll(selector);\r\n  };\r\n}\r\n","export default function(node) {\r\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\r\n      || (node.document && node) // node is a Window\r\n      || node.defaultView; // node is a Document\r\n}\r\n","import {Timer} from \"./timer.js\";\r\n\r\nexport default function(callback, delay, time) {\r\n  var t = new Timer;\r\n  delay = delay == null ? 0 : +delay;\r\n  t.restart(function(elapsed) {\r\n    t.stop();\r\n    callback(elapsed + delay);\r\n  }, delay, time);\r\n  return t;\r\n}\r\n","var frame = 0, // is an animation frame pending?\r\n    timeout = 0, // is a timeout pending?\r\n    interval = 0, // are any timers active?\r\n    pokeDelay = 1000, // how frequently we check for clock skew\r\n    taskHead,\r\n    taskTail,\r\n    clockLast = 0,\r\n    clockNow = 0,\r\n    clockSkew = 0,\r\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\r\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\r\n\r\nexport function now() {\r\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\r\n}\r\n\r\nfunction clearNow() {\r\n  clockNow = 0;\r\n}\r\n\r\nexport function Timer() {\r\n  this._call =\r\n  this._time =\r\n  this._next = null;\r\n}\r\n\r\nTimer.prototype = timer.prototype = {\r\n  constructor: Timer,\r\n  restart: function(callback, delay, time) {\r\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\r\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\r\n    if (!this._next && taskTail !== this) {\r\n      if (taskTail) taskTail._next = this;\r\n      else taskHead = this;\r\n      taskTail = this;\r\n    }\r\n    this._call = callback;\r\n    this._time = time;\r\n    sleep();\r\n  },\r\n  stop: function() {\r\n    if (this._call) {\r\n      this._call = null;\r\n      this._time = Infinity;\r\n      sleep();\r\n    }\r\n  }\r\n};\r\n\r\nexport function timer(callback, delay, time) {\r\n  var t = new Timer;\r\n  t.restart(callback, delay, time);\r\n  return t;\r\n}\r\n\r\nexport function timerFlush() {\r\n  now(); // Get the current time, if not already set.\r\n  ++frame; // Pretend weve set an alarm, if we havent already.\r\n  var t = taskHead, e;\r\n  while (t) {\r\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\r\n    t = t._next;\r\n  }\r\n  --frame;\r\n}\r\n\r\nfunction wake() {\r\n  clockNow = (clockLast = clock.now()) + clockSkew;\r\n  frame = timeout = 0;\r\n  try {\r\n    timerFlush();\r\n  } finally {\r\n    frame = 0;\r\n    nap();\r\n    clockNow = 0;\r\n  }\r\n}\r\n\r\nfunction poke() {\r\n  var now = clock.now(), delay = now - clockLast;\r\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\r\n}\r\n\r\nfunction nap() {\r\n  var t0, t1 = taskHead, t2, time = Infinity;\r\n  while (t1) {\r\n    if (t1._call) {\r\n      if (time > t1._time) time = t1._time;\r\n      t0 = t1, t1 = t1._next;\r\n    } else {\r\n      t2 = t1._next, t1._next = null;\r\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\r\n    }\r\n  }\r\n  taskTail = t0;\r\n  sleep(time);\r\n}\r\n\r\nfunction sleep(time) {\r\n  if (frame) return; // Soonest alarm already set, or will be.\r\n  if (timeout) timeout = clearTimeout(timeout);\r\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\r\n  if (delay > 24) {\r\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\r\n    if (interval) interval = clearInterval(interval);\r\n  } else {\r\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\r\n    frame = 1, setFrame(wake);\r\n  }\r\n}\r\n","import {Transition} from \"./transition/index.js\";\r\nimport {SCHEDULED} from \"./transition/schedule.js\";\r\n\r\nvar root = [null];\r\n\r\nexport default function(node, name) {\r\n  var schedules = node.__transition,\r\n      schedule,\r\n      i;\r\n\r\n  if (schedules) {\r\n    name = name == null ? null : name + \"\";\r\n    for (i in schedules) {\r\n      if ((schedule = schedules[i]).state > SCHEDULED && schedule.name === name) {\r\n        return new Transition([[node]], root, name, +i);\r\n      }\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n","import \"./selection/index.js\";\r\nexport {default as transition} from \"./transition/index.js\";\r\nexport {default as active} from \"./active.js\";\r\nexport {default as interrupt} from \"./interrupt.js\";\r\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\r\n\r\nexport default function(node, name) {\r\n  var schedules = node.__transition,\r\n      schedule,\r\n      active,\r\n      empty = true,\r\n      i;\r\n\r\n  if (!schedules) return;\r\n\r\n  name = name == null ? null : name + \"\";\r\n\r\n  for (i in schedules) {\r\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\r\n    active = schedule.state > STARTING && schedule.state < ENDING;\r\n    schedule.state = ENDED;\r\n    schedule.timer.stop();\r\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\r\n    delete schedules[i];\r\n  }\r\n\r\n  if (empty) delete node.__transition;\r\n}\r\n","import {selection} from \"d3-selection\";\r\nimport selection_interrupt from \"./interrupt.js\";\r\nimport selection_transition from \"./transition.js\";\r\n\r\nselection.prototype.interrupt = selection_interrupt;\r\nselection.prototype.transition = selection_transition;\r\n","import interrupt from \"../interrupt.js\";\r\n\r\nexport default function(name) {\r\n  return this.each(function() {\r\n    interrupt(this, name);\r\n  });\r\n}\r\n","import {Transition, newId} from \"../transition/index.js\";\r\nimport schedule from \"../transition/schedule.js\";\r\nimport {easeCubicInOut} from \"d3-ease\";\r\nimport {now} from \"d3-timer\";\r\n\r\nvar defaultTiming = {\r\n  time: null, // Set on use.\r\n  delay: 0,\r\n  duration: 250,\r\n  ease: easeCubicInOut\r\n};\r\n\r\nfunction inherit(node, id) {\r\n  var timing;\r\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\r\n    if (!(node = node.parentNode)) {\r\n      return defaultTiming.time = now(), defaultTiming;\r\n    }\r\n  }\r\n  return timing;\r\n}\r\n\r\nexport default function(name) {\r\n  var id,\r\n      timing;\r\n\r\n  if (name instanceof Transition) {\r\n    id = name._id, name = name._name;\r\n  } else {\r\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\r\n  }\r\n\r\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\r\n      if (node = group[i]) {\r\n        schedule(node, name, id, i, group, timing || inherit(node, id));\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Transition(groups, this._parents, name, id);\r\n}\r\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\r\nimport {namespace} from \"d3-selection\";\r\nimport {tweenValue} from \"./tween.js\";\r\nimport interpolate from \"./interpolate.js\";\r\n\r\nfunction attrRemove(name) {\r\n  return function() {\r\n    this.removeAttribute(name);\r\n  };\r\n}\r\n\r\nfunction attrRemoveNS(fullname) {\r\n  return function() {\r\n    this.removeAttributeNS(fullname.space, fullname.local);\r\n  };\r\n}\r\n\r\nfunction attrConstant(name, interpolate, value1) {\r\n  var string00,\r\n      string1 = value1 + \"\",\r\n      interpolate0;\r\n  return function() {\r\n    var string0 = this.getAttribute(name);\r\n    return string0 === string1 ? null\r\n        : string0 === string00 ? interpolate0\r\n        : interpolate0 = interpolate(string00 = string0, value1);\r\n  };\r\n}\r\n\r\nfunction attrConstantNS(fullname, interpolate, value1) {\r\n  var string00,\r\n      string1 = value1 + \"\",\r\n      interpolate0;\r\n  return function() {\r\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\r\n    return string0 === string1 ? null\r\n        : string0 === string00 ? interpolate0\r\n        : interpolate0 = interpolate(string00 = string0, value1);\r\n  };\r\n}\r\n\r\nfunction attrFunction(name, interpolate, value) {\r\n  var string00,\r\n      string10,\r\n      interpolate0;\r\n  return function() {\r\n    var string0, value1 = value(this), string1;\r\n    if (value1 == null) return void this.removeAttribute(name);\r\n    string0 = this.getAttribute(name);\r\n    string1 = value1 + \"\";\r\n    return string0 === string1 ? null\r\n        : string0 === string00 && string1 === string10 ? interpolate0\r\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\r\n  };\r\n}\r\n\r\nfunction attrFunctionNS(fullname, interpolate, value) {\r\n  var string00,\r\n      string10,\r\n      interpolate0;\r\n  return function() {\r\n    var string0, value1 = value(this), string1;\r\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\r\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\r\n    string1 = value1 + \"\";\r\n    return string0 === string1 ? null\r\n        : string0 === string00 && string1 === string10 ? interpolate0\r\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\r\n  };\r\n}\r\n\r\nexport default function(name, value) {\r\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\r\n  return this.attrTween(name, typeof value === \"function\"\r\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\r\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\r\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\r\n}\r\n","import {namespace} from \"d3-selection\";\r\n\r\nfunction attrInterpolate(name, i) {\r\n  return function(t) {\r\n    this.setAttribute(name, i.call(this, t));\r\n  };\r\n}\r\n\r\nfunction attrInterpolateNS(fullname, i) {\r\n  return function(t) {\r\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\r\n  };\r\n}\r\n\r\nfunction attrTweenNS(fullname, value) {\r\n  var t0, i0;\r\n  function tween() {\r\n    var i = value.apply(this, arguments);\r\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\r\n    return t0;\r\n  }\r\n  tween._value = value;\r\n  return tween;\r\n}\r\n\r\nfunction attrTween(name, value) {\r\n  var t0, i0;\r\n  function tween() {\r\n    var i = value.apply(this, arguments);\r\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\r\n    return t0;\r\n  }\r\n  tween._value = value;\r\n  return tween;\r\n}\r\n\r\nexport default function(name, value) {\r\n  var key = \"attr.\" + name;\r\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\r\n  if (value == null) return this.tween(key, null);\r\n  if (typeof value !== \"function\") throw new Error;\r\n  var fullname = namespace(name);\r\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\r\n}\r\n","import {get, init} from \"./schedule.js\";\r\n\r\nfunction delayFunction(id, value) {\r\n  return function() {\r\n    init(this, id).delay = +value.apply(this, arguments);\r\n  };\r\n}\r\n\r\nfunction delayConstant(id, value) {\r\n  return value = +value, function() {\r\n    init(this, id).delay = value;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  var id = this._id;\r\n\r\n  return arguments.length\r\n      ? this.each((typeof value === \"function\"\r\n          ? delayFunction\r\n          : delayConstant)(id, value))\r\n      : get(this.node(), id).delay;\r\n}\r\n","import {get, set} from \"./schedule.js\";\r\n\r\nfunction durationFunction(id, value) {\r\n  return function() {\r\n    set(this, id).duration = +value.apply(this, arguments);\r\n  };\r\n}\r\n\r\nfunction durationConstant(id, value) {\r\n  return value = +value, function() {\r\n    set(this, id).duration = value;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  var id = this._id;\r\n\r\n  return arguments.length\r\n      ? this.each((typeof value === \"function\"\r\n          ? durationFunction\r\n          : durationConstant)(id, value))\r\n      : get(this.node(), id).duration;\r\n}\r\n","import {get, set} from \"./schedule.js\";\r\n\r\nfunction easeConstant(id, value) {\r\n  if (typeof value !== \"function\") throw new Error;\r\n  return function() {\r\n    set(this, id).ease = value;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  var id = this._id;\r\n\r\n  return arguments.length\r\n      ? this.each(easeConstant(id, value))\r\n      : get(this.node(), id).ease;\r\n}\r\n","import {set} from \"./schedule.js\";\r\n\r\nexport default function() {\r\n  var on0, on1, that = this, id = that._id, size = that.size();\r\n  return new Promise(function(resolve, reject) {\r\n    var cancel = {value: reject},\r\n        end = {value: function() { if (--size === 0) resolve(); }};\r\n\r\n    that.each(function() {\r\n      var schedule = set(this, id),\r\n          on = schedule.on;\r\n\r\n      // If this node shared a dispatch with the previous node,\r\n      // just assign the updated shared dispatch and were done!\r\n      // Otherwise, copy-on-write.\r\n      if (on !== on0) {\r\n        on1 = (on0 = on).copy();\r\n        on1._.cancel.push(cancel);\r\n        on1._.interrupt.push(cancel);\r\n        on1._.end.push(end);\r\n      }\r\n\r\n      schedule.on = on1;\r\n    });\r\n  });\r\n}\r\n","import {matcher} from \"d3-selection\";\r\nimport {Transition} from \"./index.js\";\r\n\r\nexport default function(match) {\r\n  if (typeof match !== \"function\") match = matcher(match);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\r\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\r\n        subgroup.push(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Transition(subgroups, this._parents, this._name, this._id);\r\n}\r\n","import {selection} from \"d3-selection\";\r\nimport transition_attr from \"./attr.js\";\r\nimport transition_attrTween from \"./attrTween.js\";\r\nimport transition_delay from \"./delay.js\";\r\nimport transition_duration from \"./duration.js\";\r\nimport transition_ease from \"./ease.js\";\r\nimport transition_filter from \"./filter.js\";\r\nimport transition_merge from \"./merge.js\";\r\nimport transition_on from \"./on.js\";\r\nimport transition_remove from \"./remove.js\";\r\nimport transition_select from \"./select.js\";\r\nimport transition_selectAll from \"./selectAll.js\";\r\nimport transition_selection from \"./selection.js\";\r\nimport transition_style from \"./style.js\";\r\nimport transition_styleTween from \"./styleTween.js\";\r\nimport transition_text from \"./text.js\";\r\nimport transition_textTween from \"./textTween.js\";\r\nimport transition_transition from \"./transition.js\";\r\nimport transition_tween from \"./tween.js\";\r\nimport transition_end from \"./end.js\";\r\n\r\nvar id = 0;\r\n\r\nexport function Transition(groups, parents, name, id) {\r\n  this._groups = groups;\r\n  this._parents = parents;\r\n  this._name = name;\r\n  this._id = id;\r\n}\r\n\r\nexport default function transition(name) {\r\n  return selection().transition(name);\r\n}\r\n\r\nexport function newId() {\r\n  return ++id;\r\n}\r\n\r\nvar selection_prototype = selection.prototype;\r\n\r\nTransition.prototype = transition.prototype = {\r\n  constructor: Transition,\r\n  select: transition_select,\r\n  selectAll: transition_selectAll,\r\n  filter: transition_filter,\r\n  merge: transition_merge,\r\n  selection: transition_selection,\r\n  transition: transition_transition,\r\n  call: selection_prototype.call,\r\n  nodes: selection_prototype.nodes,\r\n  node: selection_prototype.node,\r\n  size: selection_prototype.size,\r\n  empty: selection_prototype.empty,\r\n  each: selection_prototype.each,\r\n  on: transition_on,\r\n  attr: transition_attr,\r\n  attrTween: transition_attrTween,\r\n  style: transition_style,\r\n  styleTween: transition_styleTween,\r\n  text: transition_text,\r\n  textTween: transition_textTween,\r\n  remove: transition_remove,\r\n  tween: transition_tween,\r\n  delay: transition_delay,\r\n  duration: transition_duration,\r\n  ease: transition_ease,\r\n  end: transition_end\r\n};\r\n","import {color} from \"d3-color\";\r\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\r\n\r\nexport default function(a, b) {\r\n  var c;\r\n  return (typeof b === \"number\" ? interpolateNumber\r\n      : b instanceof color ? interpolateRgb\r\n      : (c = color(b)) ? (b = c, interpolateRgb)\r\n      : interpolateString)(a, b);\r\n}\r\n","import {Transition} from \"./index.js\";\r\n\r\nexport default function(transition) {\r\n  if (transition._id !== this._id) throw new Error;\r\n\r\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\r\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\r\n      if (node = group0[i] || group1[i]) {\r\n        merge[i] = node;\r\n      }\r\n    }\r\n  }\r\n\r\n  for (; j < m0; ++j) {\r\n    merges[j] = groups0[j];\r\n  }\r\n\r\n  return new Transition(merges, this._parents, this._name, this._id);\r\n}\r\n","import {get, set, init} from \"./schedule.js\";\r\n\r\nfunction start(name) {\r\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\r\n    var i = t.indexOf(\".\");\r\n    if (i >= 0) t = t.slice(0, i);\r\n    return !t || t === \"start\";\r\n  });\r\n}\r\n\r\nfunction onFunction(id, name, listener) {\r\n  var on0, on1, sit = start(name) ? init : set;\r\n  return function() {\r\n    var schedule = sit(this, id),\r\n        on = schedule.on;\r\n\r\n    // If this node shared a dispatch with the previous node,\r\n    // just assign the updated shared dispatch and were done!\r\n    // Otherwise, copy-on-write.\r\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\r\n\r\n    schedule.on = on1;\r\n  };\r\n}\r\n\r\nexport default function(name, listener) {\r\n  var id = this._id;\r\n\r\n  return arguments.length < 2\r\n      ? get(this.node(), id).on.on(name)\r\n      : this.each(onFunction(id, name, listener));\r\n}\r\n","function removeFunction(id) {\r\n  return function() {\r\n    var parent = this.parentNode;\r\n    for (var i in this.__transition) if (+i !== id) return;\r\n    if (parent) parent.removeChild(this);\r\n  };\r\n}\r\n\r\nexport default function() {\r\n  return this.on(\"end.remove\", removeFunction(this._id));\r\n}\r\n","import {dispatch} from \"d3-dispatch\";\r\nimport {timer, timeout} from \"d3-timer\";\r\n\r\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\r\nvar emptyTween = [];\r\n\r\nexport var CREATED = 0;\r\nexport var SCHEDULED = 1;\r\nexport var STARTING = 2;\r\nexport var STARTED = 3;\r\nexport var RUNNING = 4;\r\nexport var ENDING = 5;\r\nexport var ENDED = 6;\r\n\r\nexport default function(node, name, id, index, group, timing) {\r\n  var schedules = node.__transition;\r\n  if (!schedules) node.__transition = {};\r\n  else if (id in schedules) return;\r\n  create(node, id, {\r\n    name: name,\r\n    index: index, // For context during callback.\r\n    group: group, // For context during callback.\r\n    on: emptyOn,\r\n    tween: emptyTween,\r\n    time: timing.time,\r\n    delay: timing.delay,\r\n    duration: timing.duration,\r\n    ease: timing.ease,\r\n    timer: null,\r\n    state: CREATED\r\n  });\r\n}\r\n\r\nexport function init(node, id) {\r\n  var schedule = get(node, id);\r\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\r\n  return schedule;\r\n}\r\n\r\nexport function set(node, id) {\r\n  var schedule = get(node, id);\r\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\r\n  return schedule;\r\n}\r\n\r\nexport function get(node, id) {\r\n  var schedule = node.__transition;\r\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\r\n  return schedule;\r\n}\r\n\r\nfunction create(node, id, self) {\r\n  var schedules = node.__transition,\r\n      tween;\r\n\r\n  // Initialize the self timer when the transition is created.\r\n  // Note the actual delay is not known until the first callback!\r\n  schedules[id] = self;\r\n  self.timer = timer(schedule, 0, self.time);\r\n\r\n  function schedule(elapsed) {\r\n    self.state = SCHEDULED;\r\n    self.timer.restart(start, self.delay, self.time);\r\n\r\n    // If the elapsed delay is less than our first sleep, start immediately.\r\n    if (self.delay <= elapsed) start(elapsed - self.delay);\r\n  }\r\n\r\n  function start(elapsed) {\r\n    var i, j, n, o;\r\n\r\n    // If the state is not SCHEDULED, then we previously errored on start.\r\n    if (self.state !== SCHEDULED) return stop();\r\n\r\n    for (i in schedules) {\r\n      o = schedules[i];\r\n      if (o.name !== self.name) continue;\r\n\r\n      // While this element already has a starting transition during this frame,\r\n      // defer starting an interrupting transition until that transition has a\r\n      // chance to tick (and possibly end); see d3/d3-transition#54!\r\n      if (o.state === STARTED) return timeout(start);\r\n\r\n      // Interrupt the active transition, if any.\r\n      if (o.state === RUNNING) {\r\n        o.state = ENDED;\r\n        o.timer.stop();\r\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\r\n        delete schedules[i];\r\n      }\r\n\r\n      // Cancel any pre-empted transitions.\r\n      else if (+i < id) {\r\n        o.state = ENDED;\r\n        o.timer.stop();\r\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\r\n        delete schedules[i];\r\n      }\r\n    }\r\n\r\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\r\n    // Note the transition may be canceled after start and before the first tick!\r\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\r\n    // Assuming this is successful, subsequent callbacks go straight to tick.\r\n    timeout(function() {\r\n      if (self.state === STARTED) {\r\n        self.state = RUNNING;\r\n        self.timer.restart(tick, self.delay, self.time);\r\n        tick(elapsed);\r\n      }\r\n    });\r\n\r\n    // Dispatch the start event.\r\n    // Note this must be done before the tween are initialized.\r\n    self.state = STARTING;\r\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\r\n    if (self.state !== STARTING) return; // interrupted\r\n    self.state = STARTED;\r\n\r\n    // Initialize the tween, deleting null tween.\r\n    tween = new Array(n = self.tween.length);\r\n    for (i = 0, j = -1; i < n; ++i) {\r\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\r\n        tween[++j] = o;\r\n      }\r\n    }\r\n    tween.length = j + 1;\r\n  }\r\n\r\n  function tick(elapsed) {\r\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\r\n        i = -1,\r\n        n = tween.length;\r\n\r\n    while (++i < n) {\r\n      tween[i].call(node, t);\r\n    }\r\n\r\n    // Dispatch the end event.\r\n    if (self.state === ENDING) {\r\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\r\n      stop();\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    self.state = ENDED;\r\n    self.timer.stop();\r\n    delete schedules[id];\r\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\r\n    delete node.__transition;\r\n  }\r\n}\r\n","import {selector} from \"d3-selection\";\r\nimport {Transition} from \"./index.js\";\r\nimport schedule, {get} from \"./schedule.js\";\r\n\r\nexport default function(select) {\r\n  var name = this._name,\r\n      id = this._id;\r\n\r\n  if (typeof select !== \"function\") select = selector(select);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\r\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\r\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\r\n        subgroup[i] = subnode;\r\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Transition(subgroups, this._parents, name, id);\r\n}\r\n","import {selectorAll} from \"d3-selection\";\r\nimport {Transition} from \"./index.js\";\r\nimport schedule, {get} from \"./schedule.js\";\r\n\r\nexport default function(select) {\r\n  var name = this._name,\r\n      id = this._id;\r\n\r\n  if (typeof select !== \"function\") select = selectorAll(select);\r\n\r\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\r\n      if (node = group[i]) {\r\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\r\n          if (child = children[k]) {\r\n            schedule(child, name, id, k, children, inherit);\r\n          }\r\n        }\r\n        subgroups.push(children);\r\n        parents.push(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Transition(subgroups, parents, name, id);\r\n}\r\n","import {selection} from \"d3-selection\";\r\n\r\nvar Selection = selection.prototype.constructor;\r\n\r\nexport default function() {\r\n  return new Selection(this._groups, this._parents);\r\n}\r\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\r\nimport {style} from \"d3-selection\";\r\nimport {set} from \"./schedule.js\";\r\nimport {tweenValue} from \"./tween.js\";\r\nimport interpolate from \"./interpolate.js\";\r\n\r\nfunction styleNull(name, interpolate) {\r\n  var string00,\r\n      string10,\r\n      interpolate0;\r\n  return function() {\r\n    var string0 = style(this, name),\r\n        string1 = (this.style.removeProperty(name), style(this, name));\r\n    return string0 === string1 ? null\r\n        : string0 === string00 && string1 === string10 ? interpolate0\r\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\r\n  };\r\n}\r\n\r\nfunction styleRemove(name) {\r\n  return function() {\r\n    this.style.removeProperty(name);\r\n  };\r\n}\r\n\r\nfunction styleConstant(name, interpolate, value1) {\r\n  var string00,\r\n      string1 = value1 + \"\",\r\n      interpolate0;\r\n  return function() {\r\n    var string0 = style(this, name);\r\n    return string0 === string1 ? null\r\n        : string0 === string00 ? interpolate0\r\n        : interpolate0 = interpolate(string00 = string0, value1);\r\n  };\r\n}\r\n\r\nfunction styleFunction(name, interpolate, value) {\r\n  var string00,\r\n      string10,\r\n      interpolate0;\r\n  return function() {\r\n    var string0 = style(this, name),\r\n        value1 = value(this),\r\n        string1 = value1 + \"\";\r\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\r\n    return string0 === string1 ? null\r\n        : string0 === string00 && string1 === string10 ? interpolate0\r\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\r\n  };\r\n}\r\n\r\nfunction styleMaybeRemove(id, name) {\r\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\r\n  return function() {\r\n    var schedule = set(this, id),\r\n        on = schedule.on,\r\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\r\n\r\n    // If this node shared a dispatch with the previous node,\r\n    // just assign the updated shared dispatch and were done!\r\n    // Otherwise, copy-on-write.\r\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\r\n\r\n    schedule.on = on1;\r\n  };\r\n}\r\n\r\nexport default function(name, value, priority) {\r\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\r\n  return value == null ? this\r\n      .styleTween(name, styleNull(name, i))\r\n      .on(\"end.style.\" + name, styleRemove(name))\r\n    : typeof value === \"function\" ? this\r\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\r\n      .each(styleMaybeRemove(this._id, name))\r\n    : this\r\n      .styleTween(name, styleConstant(name, i, value), priority)\r\n      .on(\"end.style.\" + name, null);\r\n}\r\n","function styleInterpolate(name, i, priority) {\r\n  return function(t) {\r\n    this.style.setProperty(name, i.call(this, t), priority);\r\n  };\r\n}\r\n\r\nfunction styleTween(name, value, priority) {\r\n  var t, i0;\r\n  function tween() {\r\n    var i = value.apply(this, arguments);\r\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\r\n    return t;\r\n  }\r\n  tween._value = value;\r\n  return tween;\r\n}\r\n\r\nexport default function(name, value, priority) {\r\n  var key = \"style.\" + (name += \"\");\r\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\r\n  if (value == null) return this.tween(key, null);\r\n  if (typeof value !== \"function\") throw new Error;\r\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\r\n}\r\n","import {tweenValue} from \"./tween.js\";\r\n\r\nfunction textConstant(value) {\r\n  return function() {\r\n    this.textContent = value;\r\n  };\r\n}\r\n\r\nfunction textFunction(value) {\r\n  return function() {\r\n    var value1 = value(this);\r\n    this.textContent = value1 == null ? \"\" : value1;\r\n  };\r\n}\r\n\r\nexport default function(value) {\r\n  return this.tween(\"text\", typeof value === \"function\"\r\n      ? textFunction(tweenValue(this, \"text\", value))\r\n      : textConstant(value == null ? \"\" : value + \"\"));\r\n}\r\n","function textInterpolate(i) {\r\n  return function(t) {\r\n    this.textContent = i.call(this, t);\r\n  };\r\n}\r\n\r\nfunction textTween(value) {\r\n  var t0, i0;\r\n  function tween() {\r\n    var i = value.apply(this, arguments);\r\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\r\n    return t0;\r\n  }\r\n  tween._value = value;\r\n  return tween;\r\n}\r\n\r\nexport default function(value) {\r\n  var key = \"text\";\r\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\r\n  if (value == null) return this.tween(key, null);\r\n  if (typeof value !== \"function\") throw new Error;\r\n  return this.tween(key, textTween(value));\r\n}\r\n","import {Transition, newId} from \"./index.js\";\r\nimport schedule, {get} from \"./schedule.js\";\r\n\r\nexport default function() {\r\n  var name = this._name,\r\n      id0 = this._id,\r\n      id1 = newId();\r\n\r\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\r\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\r\n      if (node = group[i]) {\r\n        var inherit = get(node, id0);\r\n        schedule(node, name, id1, i, group, {\r\n          time: inherit.time + inherit.delay + inherit.duration,\r\n          delay: 0,\r\n          duration: inherit.duration,\r\n          ease: inherit.ease\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return new Transition(groups, this._parents, name, id1);\r\n}\r\n","import {get, set} from \"./schedule.js\";\r\n\r\nfunction tweenRemove(id, name) {\r\n  var tween0, tween1;\r\n  return function() {\r\n    var schedule = set(this, id),\r\n        tween = schedule.tween;\r\n\r\n    // If this node shared tween with the previous node,\r\n    // just assign the updated shared tween and were done!\r\n    // Otherwise, copy-on-write.\r\n    if (tween !== tween0) {\r\n      tween1 = tween0 = tween;\r\n      for (var i = 0, n = tween1.length; i < n; ++i) {\r\n        if (tween1[i].name === name) {\r\n          tween1 = tween1.slice();\r\n          tween1.splice(i, 1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n\r\n    schedule.tween = tween1;\r\n  };\r\n}\r\n\r\nfunction tweenFunction(id, name, value) {\r\n  var tween0, tween1;\r\n  if (typeof value !== \"function\") throw new Error;\r\n  return function() {\r\n    var schedule = set(this, id),\r\n        tween = schedule.tween;\r\n\r\n    // If this node shared tween with the previous node,\r\n    // just assign the updated shared tween and were done!\r\n    // Otherwise, copy-on-write.\r\n    if (tween !== tween0) {\r\n      tween1 = (tween0 = tween).slice();\r\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\r\n        if (tween1[i].name === name) {\r\n          tween1[i] = t;\r\n          break;\r\n        }\r\n      }\r\n      if (i === n) tween1.push(t);\r\n    }\r\n\r\n    schedule.tween = tween1;\r\n  };\r\n}\r\n\r\nexport default function(name, value) {\r\n  var id = this._id;\r\n\r\n  name += \"\";\r\n\r\n  if (arguments.length < 2) {\r\n    var tween = get(this.node(), id).tween;\r\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\r\n      if ((t = tween[i]).name === name) {\r\n        return t.value;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\r\n}\r\n\r\nexport function tweenValue(transition, name, value) {\r\n  var id = transition._id;\r\n\r\n  transition.each(function() {\r\n    var schedule = set(this, id);\r\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\r\n  });\r\n\r\n  return function(node) {\r\n    return get(node, id).value[name];\r\n  };\r\n}\r\n","import {RedBlackNode} from \"./RedBlackTree\";\r\nimport {createCell} from \"./Cell\";\r\nimport {attachCircle, detachCircle} from \"./Circle\";\r\nimport {createEdge, setEdgeEnd} from \"./Edge\";\r\nimport {beaches, epsilon} from \"./Diagram\";\r\n\r\nvar beachPool = [];\r\n\r\nfunction Beach() {\r\n  RedBlackNode(this);\r\n  this.edge =\r\n  this.site =\r\n  this.circle = null;\r\n}\r\n\r\nfunction createBeach(site) {\r\n  var beach = beachPool.pop() || new Beach;\r\n  beach.site = site;\r\n  return beach;\r\n}\r\n\r\nfunction detachBeach(beach) {\r\n  detachCircle(beach);\r\n  beaches.remove(beach);\r\n  beachPool.push(beach);\r\n  RedBlackNode(beach);\r\n}\r\n\r\nexport function removeBeach(beach) {\r\n  var circle = beach.circle,\r\n      x = circle.x,\r\n      y = circle.cy,\r\n      vertex = [x, y],\r\n      previous = beach.P,\r\n      next = beach.N,\r\n      disappearing = [beach];\r\n\r\n  detachBeach(beach);\r\n\r\n  var lArc = previous;\r\n  while (lArc.circle\r\n      && Math.abs(x - lArc.circle.x) < epsilon\r\n      && Math.abs(y - lArc.circle.cy) < epsilon) {\r\n    previous = lArc.P;\r\n    disappearing.unshift(lArc);\r\n    detachBeach(lArc);\r\n    lArc = previous;\r\n  }\r\n\r\n  disappearing.unshift(lArc);\r\n  detachCircle(lArc);\r\n\r\n  var rArc = next;\r\n  while (rArc.circle\r\n      && Math.abs(x - rArc.circle.x) < epsilon\r\n      && Math.abs(y - rArc.circle.cy) < epsilon) {\r\n    next = rArc.N;\r\n    disappearing.push(rArc);\r\n    detachBeach(rArc);\r\n    rArc = next;\r\n  }\r\n\r\n  disappearing.push(rArc);\r\n  detachCircle(rArc);\r\n\r\n  var nArcs = disappearing.length,\r\n      iArc;\r\n  for (iArc = 1; iArc < nArcs; ++iArc) {\r\n    rArc = disappearing[iArc];\r\n    lArc = disappearing[iArc - 1];\r\n    setEdgeEnd(rArc.edge, lArc.site, rArc.site, vertex);\r\n  }\r\n\r\n  lArc = disappearing[0];\r\n  rArc = disappearing[nArcs - 1];\r\n  rArc.edge = createEdge(lArc.site, rArc.site, null, vertex);\r\n\r\n  attachCircle(lArc);\r\n  attachCircle(rArc);\r\n}\r\n\r\nexport function addBeach(site) {\r\n  var x = site[0],\r\n      directrix = site[1],\r\n      lArc,\r\n      rArc,\r\n      dxl,\r\n      dxr,\r\n      node = beaches._;\r\n\r\n  while (node) {\r\n    dxl = leftBreakPoint(node, directrix) - x;\r\n    if (dxl > epsilon) node = node.L; else {\r\n      dxr = x - rightBreakPoint(node, directrix);\r\n      if (dxr > epsilon) {\r\n        if (!node.R) {\r\n          lArc = node;\r\n          break;\r\n        }\r\n        node = node.R;\r\n      } else {\r\n        if (dxl > -epsilon) {\r\n          lArc = node.P;\r\n          rArc = node;\r\n        } else if (dxr > -epsilon) {\r\n          lArc = node;\r\n          rArc = node.N;\r\n        } else {\r\n          lArc = rArc = node;\r\n        }\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCell(site);\r\n  var newArc = createBeach(site);\r\n  beaches.insert(lArc, newArc);\r\n\r\n  if (!lArc && !rArc) return;\r\n\r\n  if (lArc === rArc) {\r\n    detachCircle(lArc);\r\n    rArc = createBeach(lArc.site);\r\n    beaches.insert(newArc, rArc);\r\n    newArc.edge = rArc.edge = createEdge(lArc.site, newArc.site);\r\n    attachCircle(lArc);\r\n    attachCircle(rArc);\r\n    return;\r\n  }\r\n\r\n  if (!rArc) { // && lArc\r\n    newArc.edge = createEdge(lArc.site, newArc.site);\r\n    return;\r\n  }\r\n\r\n  // else lArc !== rArc\r\n  detachCircle(lArc);\r\n  detachCircle(rArc);\r\n\r\n  var lSite = lArc.site,\r\n      ax = lSite[0],\r\n      ay = lSite[1],\r\n      bx = site[0] - ax,\r\n      by = site[1] - ay,\r\n      rSite = rArc.site,\r\n      cx = rSite[0] - ax,\r\n      cy = rSite[1] - ay,\r\n      d = 2 * (bx * cy - by * cx),\r\n      hb = bx * bx + by * by,\r\n      hc = cx * cx + cy * cy,\r\n      vertex = [(cy * hb - by * hc) / d + ax, (bx * hc - cx * hb) / d + ay];\r\n\r\n  setEdgeEnd(rArc.edge, lSite, rSite, vertex);\r\n  newArc.edge = createEdge(lSite, site, null, vertex);\r\n  rArc.edge = createEdge(site, rSite, null, vertex);\r\n  attachCircle(lArc);\r\n  attachCircle(rArc);\r\n}\r\n\r\nfunction leftBreakPoint(arc, directrix) {\r\n  var site = arc.site,\r\n      rfocx = site[0],\r\n      rfocy = site[1],\r\n      pby2 = rfocy - directrix;\r\n\r\n  if (!pby2) return rfocx;\r\n\r\n  var lArc = arc.P;\r\n  if (!lArc) return -Infinity;\r\n\r\n  site = lArc.site;\r\n  var lfocx = site[0],\r\n      lfocy = site[1],\r\n      plby2 = lfocy - directrix;\r\n\r\n  if (!plby2) return lfocx;\r\n\r\n  var hl = lfocx - rfocx,\r\n      aby2 = 1 / pby2 - 1 / plby2,\r\n      b = hl / plby2;\r\n\r\n  if (aby2) return (-b + Math.sqrt(b * b - 2 * aby2 * (hl * hl / (-2 * plby2) - lfocy + plby2 / 2 + rfocy - pby2 / 2))) / aby2 + rfocx;\r\n\r\n  return (rfocx + lfocx) / 2;\r\n}\r\n\r\nfunction rightBreakPoint(arc, directrix) {\r\n  var rArc = arc.N;\r\n  if (rArc) return leftBreakPoint(rArc, directrix);\r\n  var site = arc.site;\r\n  return site[1] === directrix ? site[0] : Infinity;\r\n}\r\n","import {createBorderEdge} from \"./Edge\";\r\nimport {cells, edges, epsilon} from \"./Diagram\";\r\n\r\nexport function createCell(site) {\r\n  return cells[site.index] = {\r\n    site: site,\r\n    halfedges: []\r\n  };\r\n}\r\n\r\nfunction cellHalfedgeAngle(cell, edge) {\r\n  var site = cell.site,\r\n      va = edge.left,\r\n      vb = edge.right;\r\n  if (site === vb) vb = va, va = site;\r\n  if (vb) return Math.atan2(vb[1] - va[1], vb[0] - va[0]);\r\n  if (site === va) va = edge[1], vb = edge[0];\r\n  else va = edge[0], vb = edge[1];\r\n  return Math.atan2(va[0] - vb[0], vb[1] - va[1]);\r\n}\r\n\r\nexport function cellHalfedgeStart(cell, edge) {\r\n  return edge[+(edge.left !== cell.site)];\r\n}\r\n\r\nexport function cellHalfedgeEnd(cell, edge) {\r\n  return edge[+(edge.left === cell.site)];\r\n}\r\n\r\nexport function sortCellHalfedges() {\r\n  for (var i = 0, n = cells.length, cell, halfedges, j, m; i < n; ++i) {\r\n    if ((cell = cells[i]) && (m = (halfedges = cell.halfedges).length)) {\r\n      var index = new Array(m),\r\n          array = new Array(m);\r\n      for (j = 0; j < m; ++j) index[j] = j, array[j] = cellHalfedgeAngle(cell, edges[halfedges[j]]);\r\n      index.sort(function(i, j) { return array[j] - array[i]; });\r\n      for (j = 0; j < m; ++j) array[j] = halfedges[index[j]];\r\n      for (j = 0; j < m; ++j) halfedges[j] = array[j];\r\n    }\r\n  }\r\n}\r\n\r\nexport function clipCells(x0, y0, x1, y1) {\r\n  var nCells = cells.length,\r\n      iCell,\r\n      cell,\r\n      site,\r\n      iHalfedge,\r\n      halfedges,\r\n      nHalfedges,\r\n      start,\r\n      startX,\r\n      startY,\r\n      end,\r\n      endX,\r\n      endY,\r\n      cover = true;\r\n\r\n  for (iCell = 0; iCell < nCells; ++iCell) {\r\n    if (cell = cells[iCell]) {\r\n      site = cell.site;\r\n      halfedges = cell.halfedges;\r\n      iHalfedge = halfedges.length;\r\n\r\n      // Remove any dangling clipped edges.\r\n      while (iHalfedge--) {\r\n        if (!edges[halfedges[iHalfedge]]) {\r\n          halfedges.splice(iHalfedge, 1);\r\n        }\r\n      }\r\n\r\n      // Insert any border edges as necessary.\r\n      iHalfedge = 0, nHalfedges = halfedges.length;\r\n      while (iHalfedge < nHalfedges) {\r\n        end = cellHalfedgeEnd(cell, edges[halfedges[iHalfedge]]), endX = end[0], endY = end[1];\r\n        start = cellHalfedgeStart(cell, edges[halfedges[++iHalfedge % nHalfedges]]), startX = start[0], startY = start[1];\r\n        if (Math.abs(endX - startX) > epsilon || Math.abs(endY - startY) > epsilon) {\r\n          halfedges.splice(iHalfedge, 0, edges.push(createBorderEdge(site, end,\r\n              Math.abs(endX - x0) < epsilon && y1 - endY > epsilon ? [x0, Math.abs(startX - x0) < epsilon ? startY : y1]\r\n              : Math.abs(endY - y1) < epsilon && x1 - endX > epsilon ? [Math.abs(startY - y1) < epsilon ? startX : x1, y1]\r\n              : Math.abs(endX - x1) < epsilon && endY - y0 > epsilon ? [x1, Math.abs(startX - x1) < epsilon ? startY : y0]\r\n              : Math.abs(endY - y0) < epsilon && endX - x0 > epsilon ? [Math.abs(startY - y0) < epsilon ? startX : x0, y0]\r\n              : null)) - 1);\r\n          ++nHalfedges;\r\n        }\r\n      }\r\n\r\n      if (nHalfedges) cover = false;\r\n    }\r\n  }\r\n\r\n  // If there werent any edges, have the closest site cover the extent.\r\n  // It doesnt matter which corner of the extent we measure!\r\n  if (cover) {\r\n    var dx, dy, d2, dc = Infinity;\r\n\r\n    for (iCell = 0, cover = null; iCell < nCells; ++iCell) {\r\n      if (cell = cells[iCell]) {\r\n        site = cell.site;\r\n        dx = site[0] - x0;\r\n        dy = site[1] - y0;\r\n        d2 = dx * dx + dy * dy;\r\n        if (d2 < dc) dc = d2, cover = cell;\r\n      }\r\n    }\r\n\r\n    if (cover) {\r\n      var v00 = [x0, y0], v01 = [x0, y1], v11 = [x1, y1], v10 = [x1, y0];\r\n      cover.halfedges.push(\r\n        edges.push(createBorderEdge(site = cover.site, v00, v01)) - 1,\r\n        edges.push(createBorderEdge(site, v01, v11)) - 1,\r\n        edges.push(createBorderEdge(site, v11, v10)) - 1,\r\n        edges.push(createBorderEdge(site, v10, v00)) - 1\r\n      );\r\n    }\r\n  }\r\n\r\n  // Lastly delete any cells with no edges; these were entirely clipped.\r\n  for (iCell = 0; iCell < nCells; ++iCell) {\r\n    if (cell = cells[iCell]) {\r\n      if (!cell.halfedges.length) {\r\n        delete cells[iCell];\r\n      }\r\n    }\r\n  }\r\n}\r\n","import {RedBlackNode} from \"./RedBlackTree\";\r\nimport {circles, epsilon2} from \"./Diagram\";\r\n\r\nvar circlePool = [];\r\n\r\nexport var firstCircle;\r\n\r\nfunction Circle() {\r\n  RedBlackNode(this);\r\n  this.x =\r\n  this.y =\r\n  this.arc =\r\n  this.site =\r\n  this.cy = null;\r\n}\r\n\r\nexport function attachCircle(arc) {\r\n  var lArc = arc.P,\r\n      rArc = arc.N;\r\n\r\n  if (!lArc || !rArc) return;\r\n\r\n  var lSite = lArc.site,\r\n      cSite = arc.site,\r\n      rSite = rArc.site;\r\n\r\n  if (lSite === rSite) return;\r\n\r\n  var bx = cSite[0],\r\n      by = cSite[1],\r\n      ax = lSite[0] - bx,\r\n      ay = lSite[1] - by,\r\n      cx = rSite[0] - bx,\r\n      cy = rSite[1] - by;\r\n\r\n  var d = 2 * (ax * cy - ay * cx);\r\n  if (d >= -epsilon2) return;\r\n\r\n  var ha = ax * ax + ay * ay,\r\n      hc = cx * cx + cy * cy,\r\n      x = (cy * ha - ay * hc) / d,\r\n      y = (ax * hc - cx * ha) / d;\r\n\r\n  var circle = circlePool.pop() || new Circle;\r\n  circle.arc = arc;\r\n  circle.site = cSite;\r\n  circle.x = x + bx;\r\n  circle.y = (circle.cy = y + by) + Math.sqrt(x * x + y * y); // y bottom\r\n\r\n  arc.circle = circle;\r\n\r\n  var before = null,\r\n      node = circles._;\r\n\r\n  while (node) {\r\n    if (circle.y < node.y || (circle.y === node.y && circle.x <= node.x)) {\r\n      if (node.L) node = node.L;\r\n      else { before = node.P; break; }\r\n    } else {\r\n      if (node.R) node = node.R;\r\n      else { before = node; break; }\r\n    }\r\n  }\r\n\r\n  circles.insert(before, circle);\r\n  if (!before) firstCircle = circle;\r\n}\r\n\r\nexport function detachCircle(arc) {\r\n  var circle = arc.circle;\r\n  if (circle) {\r\n    if (!circle.P) firstCircle = circle.N;\r\n    circles.remove(circle);\r\n    circlePool.push(circle);\r\n    RedBlackNode(circle);\r\n    arc.circle = null;\r\n  }\r\n}\r\n","import {addBeach, removeBeach} from \"./Beach\";\r\nimport {sortCellHalfedges, cellHalfedgeStart, clipCells} from \"./Cell\";\r\nimport {firstCircle} from \"./Circle\";\r\nimport {clipEdges} from \"./Edge\";\r\nimport RedBlackTree from \"./RedBlackTree\";\r\n\r\nexport var epsilon = 1e-6;\r\nexport var epsilon2 = 1e-12;\r\nexport var beaches;\r\nexport var cells;\r\nexport var circles;\r\nexport var edges;\r\n\r\nfunction triangleArea(a, b, c) {\r\n  return (a[0] - c[0]) * (b[1] - a[1]) - (a[0] - b[0]) * (c[1] - a[1]);\r\n}\r\n\r\nfunction lexicographic(a, b) {\r\n  return b[1] - a[1]\r\n      || b[0] - a[0];\r\n}\r\n\r\nexport default function Diagram(sites, extent) {\r\n  var site = sites.sort(lexicographic).pop(),\r\n      x,\r\n      y,\r\n      circle;\r\n\r\n  edges = [];\r\n  cells = new Array(sites.length);\r\n  beaches = new RedBlackTree;\r\n  circles = new RedBlackTree;\r\n\r\n  while (true) {\r\n    circle = firstCircle;\r\n    if (site && (!circle || site[1] < circle.y || (site[1] === circle.y && site[0] < circle.x))) {\r\n      if (site[0] !== x || site[1] !== y) {\r\n        addBeach(site);\r\n        x = site[0], y = site[1];\r\n      }\r\n      site = sites.pop();\r\n    } else if (circle) {\r\n      removeBeach(circle.arc);\r\n    } else {\r\n      break;\r\n    }\r\n  }\r\n\r\n  sortCellHalfedges();\r\n\r\n  if (extent) {\r\n    var x0 = +extent[0][0],\r\n        y0 = +extent[0][1],\r\n        x1 = +extent[1][0],\r\n        y1 = +extent[1][1];\r\n    clipEdges(x0, y0, x1, y1);\r\n    clipCells(x0, y0, x1, y1);\r\n  }\r\n\r\n  this.edges = edges;\r\n  this.cells = cells;\r\n\r\n  beaches =\r\n  circles =\r\n  edges =\r\n  cells = null;\r\n}\r\n\r\nDiagram.prototype = {\r\n  constructor: Diagram,\r\n\r\n  polygons: function() {\r\n    var edges = this.edges;\r\n\r\n    return this.cells.map(function(cell) {\r\n      var polygon = cell.halfedges.map(function(i) { return cellHalfedgeStart(cell, edges[i]); });\r\n      polygon.data = cell.site.data;\r\n      return polygon;\r\n    });\r\n  },\r\n\r\n  triangles: function() {\r\n    var triangles = [],\r\n        edges = this.edges;\r\n\r\n    this.cells.forEach(function(cell, i) {\r\n      if (!(m = (halfedges = cell.halfedges).length)) return;\r\n      var site = cell.site,\r\n          halfedges,\r\n          j = -1,\r\n          m,\r\n          s0,\r\n          e1 = edges[halfedges[m - 1]],\r\n          s1 = e1.left === site ? e1.right : e1.left;\r\n\r\n      while (++j < m) {\r\n        s0 = s1;\r\n        e1 = edges[halfedges[j]];\r\n        s1 = e1.left === site ? e1.right : e1.left;\r\n        if (s0 && s1 && i < s0.index && i < s1.index && triangleArea(site, s0, s1) < 0) {\r\n          triangles.push([site.data, s0.data, s1.data]);\r\n        }\r\n      }\r\n    });\r\n\r\n    return triangles;\r\n  },\r\n\r\n  links: function() {\r\n    return this.edges.filter(function(edge) {\r\n      return edge.right;\r\n    }).map(function(edge) {\r\n      return {\r\n        source: edge.left.data,\r\n        target: edge.right.data\r\n      };\r\n    });\r\n  },\r\n\r\n  find: function(x, y, radius) {\r\n    var that = this, i0, i1 = that._found || 0, n = that.cells.length, cell;\r\n\r\n    // Use the previously-found cell, or start with an arbitrary one.\r\n    while (!(cell = that.cells[i1])) if (++i1 >= n) return null;\r\n    var dx = x - cell.site[0], dy = y - cell.site[1], d2 = dx * dx + dy * dy;\r\n\r\n    // Traverse the half-edges to find a closer cell, if any.\r\n    do {\r\n      cell = that.cells[i0 = i1], i1 = null;\r\n      cell.halfedges.forEach(function(e) {\r\n        var edge = that.edges[e], v = edge.left;\r\n        if ((v === cell.site || !v) && !(v = edge.right)) return;\r\n        var vx = x - v[0], vy = y - v[1], v2 = vx * vx + vy * vy;\r\n        if (v2 < d2) d2 = v2, i1 = v.index;\r\n      });\r\n    } while (i1 !== null);\r\n\r\n    that._found = i0;\r\n\r\n    return radius == null || d2 <= radius * radius ? cell.site : null;\r\n  }\r\n}\r\n","import {cells, edges, epsilon} from \"./Diagram\";\r\n\r\nexport function createEdge(left, right, v0, v1) {\r\n  var edge = [null, null],\r\n      index = edges.push(edge) - 1;\r\n  edge.left = left;\r\n  edge.right = right;\r\n  if (v0) setEdgeEnd(edge, left, right, v0);\r\n  if (v1) setEdgeEnd(edge, right, left, v1);\r\n  cells[left.index].halfedges.push(index);\r\n  cells[right.index].halfedges.push(index);\r\n  return edge;\r\n}\r\n\r\nexport function createBorderEdge(left, v0, v1) {\r\n  var edge = [v0, v1];\r\n  edge.left = left;\r\n  return edge;\r\n}\r\n\r\nexport function setEdgeEnd(edge, left, right, vertex) {\r\n  if (!edge[0] && !edge[1]) {\r\n    edge[0] = vertex;\r\n    edge.left = left;\r\n    edge.right = right;\r\n  } else if (edge.left === right) {\r\n    edge[1] = vertex;\r\n  } else {\r\n    edge[0] = vertex;\r\n  }\r\n}\r\n\r\n// LiangBarsky line clipping.\r\nfunction clipEdge(edge, x0, y0, x1, y1) {\r\n  var a = edge[0],\r\n      b = edge[1],\r\n      ax = a[0],\r\n      ay = a[1],\r\n      bx = b[0],\r\n      by = b[1],\r\n      t0 = 0,\r\n      t1 = 1,\r\n      dx = bx - ax,\r\n      dy = by - ay,\r\n      r;\r\n\r\n  r = x0 - ax;\r\n  if (!dx && r > 0) return;\r\n  r /= dx;\r\n  if (dx < 0) {\r\n    if (r < t0) return;\r\n    if (r < t1) t1 = r;\r\n  } else if (dx > 0) {\r\n    if (r > t1) return;\r\n    if (r > t0) t0 = r;\r\n  }\r\n\r\n  r = x1 - ax;\r\n  if (!dx && r < 0) return;\r\n  r /= dx;\r\n  if (dx < 0) {\r\n    if (r > t1) return;\r\n    if (r > t0) t0 = r;\r\n  } else if (dx > 0) {\r\n    if (r < t0) return;\r\n    if (r < t1) t1 = r;\r\n  }\r\n\r\n  r = y0 - ay;\r\n  if (!dy && r > 0) return;\r\n  r /= dy;\r\n  if (dy < 0) {\r\n    if (r < t0) return;\r\n    if (r < t1) t1 = r;\r\n  } else if (dy > 0) {\r\n    if (r > t1) return;\r\n    if (r > t0) t0 = r;\r\n  }\r\n\r\n  r = y1 - ay;\r\n  if (!dy && r < 0) return;\r\n  r /= dy;\r\n  if (dy < 0) {\r\n    if (r > t1) return;\r\n    if (r > t0) t0 = r;\r\n  } else if (dy > 0) {\r\n    if (r < t0) return;\r\n    if (r < t1) t1 = r;\r\n  }\r\n\r\n  if (!(t0 > 0) && !(t1 < 1)) return true; // TODO Better check?\r\n\r\n  if (t0 > 0) edge[0] = [ax + t0 * dx, ay + t0 * dy];\r\n  if (t1 < 1) edge[1] = [ax + t1 * dx, ay + t1 * dy];\r\n  return true;\r\n}\r\n\r\nfunction connectEdge(edge, x0, y0, x1, y1) {\r\n  var v1 = edge[1];\r\n  if (v1) return true;\r\n\r\n  var v0 = edge[0],\r\n      left = edge.left,\r\n      right = edge.right,\r\n      lx = left[0],\r\n      ly = left[1],\r\n      rx = right[0],\r\n      ry = right[1],\r\n      fx = (lx + rx) / 2,\r\n      fy = (ly + ry) / 2,\r\n      fm,\r\n      fb;\r\n\r\n  if (ry === ly) {\r\n    if (fx < x0 || fx >= x1) return;\r\n    if (lx > rx) {\r\n      if (!v0) v0 = [fx, y0];\r\n      else if (v0[1] >= y1) return;\r\n      v1 = [fx, y1];\r\n    } else {\r\n      if (!v0) v0 = [fx, y1];\r\n      else if (v0[1] < y0) return;\r\n      v1 = [fx, y0];\r\n    }\r\n  } else {\r\n    fm = (lx - rx) / (ry - ly);\r\n    fb = fy - fm * fx;\r\n    if (fm < -1 || fm > 1) {\r\n      if (lx > rx) {\r\n        if (!v0) v0 = [(y0 - fb) / fm, y0];\r\n        else if (v0[1] >= y1) return;\r\n        v1 = [(y1 - fb) / fm, y1];\r\n      } else {\r\n        if (!v0) v0 = [(y1 - fb) / fm, y1];\r\n        else if (v0[1] < y0) return;\r\n        v1 = [(y0 - fb) / fm, y0];\r\n      }\r\n    } else {\r\n      if (ly < ry) {\r\n        if (!v0) v0 = [x0, fm * x0 + fb];\r\n        else if (v0[0] >= x1) return;\r\n        v1 = [x1, fm * x1 + fb];\r\n      } else {\r\n        if (!v0) v0 = [x1, fm * x1 + fb];\r\n        else if (v0[0] < x0) return;\r\n        v1 = [x0, fm * x0 + fb];\r\n      }\r\n    }\r\n  }\r\n\r\n  edge[0] = v0;\r\n  edge[1] = v1;\r\n  return true;\r\n}\r\n\r\nexport function clipEdges(x0, y0, x1, y1) {\r\n  var i = edges.length,\r\n      edge;\r\n\r\n  while (i--) {\r\n    if (!connectEdge(edge = edges[i], x0, y0, x1, y1)\r\n        || !clipEdge(edge, x0, y0, x1, y1)\r\n        || !(Math.abs(edge[0][0] - edge[1][0]) > epsilon\r\n            || Math.abs(edge[0][1] - edge[1][1]) > epsilon)) {\r\n      delete edges[i];\r\n    }\r\n  }\r\n}\r\n","function RedBlackTree() {\r\n  this._ = null; // root node\r\n}\r\n\r\nexport function RedBlackNode(node) {\r\n  node.U = // parent node\r\n  node.C = // color - true for red, false for black\r\n  node.L = // left node\r\n  node.R = // right node\r\n  node.P = // previous node\r\n  node.N = null; // next node\r\n}\r\n\r\nRedBlackTree.prototype = {\r\n  constructor: RedBlackTree,\r\n\r\n  insert: function(after, node) {\r\n    var parent, grandpa, uncle;\r\n\r\n    if (after) {\r\n      node.P = after;\r\n      node.N = after.N;\r\n      if (after.N) after.N.P = node;\r\n      after.N = node;\r\n      if (after.R) {\r\n        after = after.R;\r\n        while (after.L) after = after.L;\r\n        after.L = node;\r\n      } else {\r\n        after.R = node;\r\n      }\r\n      parent = after;\r\n    } else if (this._) {\r\n      after = RedBlackFirst(this._);\r\n      node.P = null;\r\n      node.N = after;\r\n      after.P = after.L = node;\r\n      parent = after;\r\n    } else {\r\n      node.P = node.N = null;\r\n      this._ = node;\r\n      parent = null;\r\n    }\r\n    node.L = node.R = null;\r\n    node.U = parent;\r\n    node.C = true;\r\n\r\n    after = node;\r\n    while (parent && parent.C) {\r\n      grandpa = parent.U;\r\n      if (parent === grandpa.L) {\r\n        uncle = grandpa.R;\r\n        if (uncle && uncle.C) {\r\n          parent.C = uncle.C = false;\r\n          grandpa.C = true;\r\n          after = grandpa;\r\n        } else {\r\n          if (after === parent.R) {\r\n            RedBlackRotateLeft(this, parent);\r\n            after = parent;\r\n            parent = after.U;\r\n          }\r\n          parent.C = false;\r\n          grandpa.C = true;\r\n          RedBlackRotateRight(this, grandpa);\r\n        }\r\n      } else {\r\n        uncle = grandpa.L;\r\n        if (uncle && uncle.C) {\r\n          parent.C = uncle.C = false;\r\n          grandpa.C = true;\r\n          after = grandpa;\r\n        } else {\r\n          if (after === parent.L) {\r\n            RedBlackRotateRight(this, parent);\r\n            after = parent;\r\n            parent = after.U;\r\n          }\r\n          parent.C = false;\r\n          grandpa.C = true;\r\n          RedBlackRotateLeft(this, grandpa);\r\n        }\r\n      }\r\n      parent = after.U;\r\n    }\r\n    this._.C = false;\r\n  },\r\n\r\n  remove: function(node) {\r\n    if (node.N) node.N.P = node.P;\r\n    if (node.P) node.P.N = node.N;\r\n    node.N = node.P = null;\r\n\r\n    var parent = node.U,\r\n        sibling,\r\n        left = node.L,\r\n        right = node.R,\r\n        next,\r\n        red;\r\n\r\n    if (!left) next = right;\r\n    else if (!right) next = left;\r\n    else next = RedBlackFirst(right);\r\n\r\n    if (parent) {\r\n      if (parent.L === node) parent.L = next;\r\n      else parent.R = next;\r\n    } else {\r\n      this._ = next;\r\n    }\r\n\r\n    if (left && right) {\r\n      red = next.C;\r\n      next.C = node.C;\r\n      next.L = left;\r\n      left.U = next;\r\n      if (next !== right) {\r\n        parent = next.U;\r\n        next.U = node.U;\r\n        node = next.R;\r\n        parent.L = node;\r\n        next.R = right;\r\n        right.U = next;\r\n      } else {\r\n        next.U = parent;\r\n        parent = next;\r\n        node = next.R;\r\n      }\r\n    } else {\r\n      red = node.C;\r\n      node = next;\r\n    }\r\n\r\n    if (node) node.U = parent;\r\n    if (red) return;\r\n    if (node && node.C) { node.C = false; return; }\r\n\r\n    do {\r\n      if (node === this._) break;\r\n      if (node === parent.L) {\r\n        sibling = parent.R;\r\n        if (sibling.C) {\r\n          sibling.C = false;\r\n          parent.C = true;\r\n          RedBlackRotateLeft(this, parent);\r\n          sibling = parent.R;\r\n        }\r\n        if ((sibling.L && sibling.L.C)\r\n            || (sibling.R && sibling.R.C)) {\r\n          if (!sibling.R || !sibling.R.C) {\r\n            sibling.L.C = false;\r\n            sibling.C = true;\r\n            RedBlackRotateRight(this, sibling);\r\n            sibling = parent.R;\r\n          }\r\n          sibling.C = parent.C;\r\n          parent.C = sibling.R.C = false;\r\n          RedBlackRotateLeft(this, parent);\r\n          node = this._;\r\n          break;\r\n        }\r\n      } else {\r\n        sibling = parent.L;\r\n        if (sibling.C) {\r\n          sibling.C = false;\r\n          parent.C = true;\r\n          RedBlackRotateRight(this, parent);\r\n          sibling = parent.L;\r\n        }\r\n        if ((sibling.L && sibling.L.C)\r\n          || (sibling.R && sibling.R.C)) {\r\n          if (!sibling.L || !sibling.L.C) {\r\n            sibling.R.C = false;\r\n            sibling.C = true;\r\n            RedBlackRotateLeft(this, sibling);\r\n            sibling = parent.L;\r\n          }\r\n          sibling.C = parent.C;\r\n          parent.C = sibling.L.C = false;\r\n          RedBlackRotateRight(this, parent);\r\n          node = this._;\r\n          break;\r\n        }\r\n      }\r\n      sibling.C = true;\r\n      node = parent;\r\n      parent = parent.U;\r\n    } while (!node.C);\r\n\r\n    if (node) node.C = false;\r\n  }\r\n};\r\n\r\nfunction RedBlackRotateLeft(tree, node) {\r\n  var p = node,\r\n      q = node.R,\r\n      parent = p.U;\r\n\r\n  if (parent) {\r\n    if (parent.L === p) parent.L = q;\r\n    else parent.R = q;\r\n  } else {\r\n    tree._ = q;\r\n  }\r\n\r\n  q.U = parent;\r\n  p.U = q;\r\n  p.R = q.L;\r\n  if (p.R) p.R.U = p;\r\n  q.L = p;\r\n}\r\n\r\nfunction RedBlackRotateRight(tree, node) {\r\n  var p = node,\r\n      q = node.L,\r\n      parent = p.U;\r\n\r\n  if (parent) {\r\n    if (parent.L === p) parent.L = q;\r\n    else parent.R = q;\r\n  } else {\r\n    tree._ = q;\r\n  }\r\n\r\n  q.U = parent;\r\n  p.U = q;\r\n  p.L = q.R;\r\n  if (p.L) p.L.U = p;\r\n  q.R = p;\r\n}\r\n\r\nfunction RedBlackFirst(node) {\r\n  while (node.L) node = node.L;\r\n  return node;\r\n}\r\n\r\nexport default RedBlackTree;\r\n","export {default as voronoi} from \"./voronoi\";\r\n","import constant from \"./constant\";\r\nimport {x as pointX, y as pointY} from \"./point\";\r\nimport Diagram, {epsilon} from \"./Diagram\";\r\n\r\nexport default function() {\r\n  var x = pointX,\r\n      y = pointY,\r\n      extent = null;\r\n\r\n  function voronoi(data) {\r\n    return new Diagram(data.map(function(d, i) {\r\n      var s = [Math.round(x(d, i, data) / epsilon) * epsilon, Math.round(y(d, i, data) / epsilon) * epsilon];\r\n      s.index = i;\r\n      s.data = d;\r\n      return s;\r\n    }), extent);\r\n  }\r\n\r\n  voronoi.polygons = function(data) {\r\n    return voronoi(data).polygons();\r\n  };\r\n\r\n  voronoi.links = function(data) {\r\n    return voronoi(data).links();\r\n  };\r\n\r\n  voronoi.triangles = function(data) {\r\n    return voronoi(data).triangles();\r\n  };\r\n\r\n  voronoi.x = function(_) {\r\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), voronoi) : x;\r\n  };\r\n\r\n  voronoi.y = function(_) {\r\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), voronoi) : y;\r\n  };\r\n\r\n  voronoi.extent = function(_) {\r\n    return arguments.length ? (extent = _ == null ? null : [[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]], voronoi) : extent && [[extent[0][0], extent[0][1]], [extent[1][0], extent[1][1]]];\r\n  };\r\n\r\n  voronoi.size = function(_) {\r\n    return arguments.length ? (extent = _ == null ? null : [[0, 0], [+_[0], +_[1]]], voronoi) : extent && [extent[1][0] - extent[0][0], extent[1][1] - extent[0][1]];\r\n  };\r\n\r\n  return voronoi;\r\n}\r\n","export {default as zoom} from \"./zoom.js\";\r\nexport {default as zoomTransform, identity as zoomIdentity} from \"./transform.js\";\r\n","export function Transform(k, x, y) {\r\n  this.k = k;\r\n  this.x = x;\r\n  this.y = y;\r\n}\r\n\r\nTransform.prototype = {\r\n  constructor: Transform,\r\n  scale: function(k) {\r\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\r\n  },\r\n  translate: function(x, y) {\r\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\r\n  },\r\n  apply: function(point) {\r\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\r\n  },\r\n  applyX: function(x) {\r\n    return x * this.k + this.x;\r\n  },\r\n  applyY: function(y) {\r\n    return y * this.k + this.y;\r\n  },\r\n  invert: function(location) {\r\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\r\n  },\r\n  invertX: function(x) {\r\n    return (x - this.x) / this.k;\r\n  },\r\n  invertY: function(y) {\r\n    return (y - this.y) / this.k;\r\n  },\r\n  rescaleX: function(x) {\r\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\r\n  },\r\n  rescaleY: function(y) {\r\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\r\n  },\r\n  toString: function() {\r\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\r\n  }\r\n};\r\n\r\nexport var identity = new Transform(1, 0, 0);\r\n\r\ntransform.prototype = Transform.prototype;\r\n\r\nexport default function transform(node) {\r\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\r\n  return node.__zoom;\r\n}\r\n","import {dispatch} from \"d3-dispatch\";\r\nimport {dragDisable, dragEnable} from \"d3-drag\";\r\nimport {interpolateZoom} from \"d3-interpolate\";\r\nimport {event, customEvent, select, mouse, touch} from \"d3-selection\";\r\nimport {interrupt} from \"d3-transition\";\r\nimport constant from \"./constant.js\";\r\nimport ZoomEvent from \"./event.js\";\r\nimport {Transform, identity} from \"./transform.js\";\r\nimport noevent, {nopropagation} from \"./noevent.js\";\r\n\r\n// Ignore right-click, since that should open the context menu.\r\nfunction defaultFilter() {\r\n  return !event.ctrlKey && !event.button;\r\n}\r\n\r\nfunction defaultExtent() {\r\n  var e = this;\r\n  if (e instanceof SVGElement) {\r\n    e = e.ownerSVGElement || e;\r\n    if (e.hasAttribute(\"viewBox\")) {\r\n      e = e.viewBox.baseVal;\r\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\r\n    }\r\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\r\n  }\r\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\r\n}\r\n\r\nfunction defaultTransform() {\r\n  return this.__zoom || identity;\r\n}\r\n\r\nfunction defaultWheelDelta() {\r\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002);\r\n}\r\n\r\nfunction defaultTouchable() {\r\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\r\n}\r\n\r\nfunction defaultConstrain(transform, extent, translateExtent) {\r\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\r\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\r\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\r\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\r\n  return transform.translate(\r\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\r\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\r\n  );\r\n}\r\n\r\nexport default function() {\r\n  var filter = defaultFilter,\r\n      extent = defaultExtent,\r\n      constrain = defaultConstrain,\r\n      wheelDelta = defaultWheelDelta,\r\n      touchable = defaultTouchable,\r\n      scaleExtent = [0, Infinity],\r\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\r\n      duration = 250,\r\n      interpolate = interpolateZoom,\r\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\r\n      touchstarting,\r\n      touchending,\r\n      touchDelay = 500,\r\n      wheelDelay = 150,\r\n      clickDistance2 = 0;\r\n\r\n  function zoom(selection) {\r\n    selection\r\n        .property(\"__zoom\", defaultTransform)\r\n        .on(\"wheel.zoom\", wheeled)\r\n        .on(\"mousedown.zoom\", mousedowned)\r\n        .on(\"dblclick.zoom\", dblclicked)\r\n      .filter(touchable)\r\n        .on(\"touchstart.zoom\", touchstarted)\r\n        .on(\"touchmove.zoom\", touchmoved)\r\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\r\n        .style(\"touch-action\", \"none\")\r\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\r\n  }\r\n\r\n  zoom.transform = function(collection, transform, point) {\r\n    var selection = collection.selection ? collection.selection() : collection;\r\n    selection.property(\"__zoom\", defaultTransform);\r\n    if (collection !== selection) {\r\n      schedule(collection, transform, point);\r\n    } else {\r\n      selection.interrupt().each(function() {\r\n        gesture(this, arguments)\r\n            .start()\r\n            .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\r\n            .end();\r\n      });\r\n    }\r\n  };\r\n\r\n  zoom.scaleBy = function(selection, k, p) {\r\n    zoom.scaleTo(selection, function() {\r\n      var k0 = this.__zoom.k,\r\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\r\n      return k0 * k1;\r\n    }, p);\r\n  };\r\n\r\n  zoom.scaleTo = function(selection, k, p) {\r\n    zoom.transform(selection, function() {\r\n      var e = extent.apply(this, arguments),\r\n          t0 = this.__zoom,\r\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\r\n          p1 = t0.invert(p0),\r\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\r\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\r\n    }, p);\r\n  };\r\n\r\n  zoom.translateBy = function(selection, x, y) {\r\n    zoom.transform(selection, function() {\r\n      return constrain(this.__zoom.translate(\r\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\r\n        typeof y === \"function\" ? y.apply(this, arguments) : y\r\n      ), extent.apply(this, arguments), translateExtent);\r\n    });\r\n  };\r\n\r\n  zoom.translateTo = function(selection, x, y, p) {\r\n    zoom.transform(selection, function() {\r\n      var e = extent.apply(this, arguments),\r\n          t = this.__zoom,\r\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\r\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\r\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\r\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\r\n      ), e, translateExtent);\r\n    }, p);\r\n  };\r\n\r\n  function scale(transform, k) {\r\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\r\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\r\n  }\r\n\r\n  function translate(transform, p0, p1) {\r\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\r\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\r\n  }\r\n\r\n  function centroid(extent) {\r\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\r\n  }\r\n\r\n  function schedule(transition, transform, point) {\r\n    transition\r\n        .on(\"start.zoom\", function() { gesture(this, arguments).start(); })\r\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).end(); })\r\n        .tween(\"zoom\", function() {\r\n          var that = this,\r\n              args = arguments,\r\n              g = gesture(that, args),\r\n              e = extent.apply(that, args),\r\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\r\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\r\n              a = that.__zoom,\r\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\r\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\r\n          return function(t) {\r\n            if (t === 1) t = b; // Avoid rounding error on end.\r\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\r\n            g.zoom(null, t);\r\n          };\r\n        });\r\n  }\r\n\r\n  function gesture(that, args, clean) {\r\n    return (!clean && that.__zooming) || new Gesture(that, args);\r\n  }\r\n\r\n  function Gesture(that, args) {\r\n    this.that = that;\r\n    this.args = args;\r\n    this.active = 0;\r\n    this.extent = extent.apply(that, args);\r\n    this.taps = 0;\r\n  }\r\n\r\n  Gesture.prototype = {\r\n    start: function() {\r\n      if (++this.active === 1) {\r\n        this.that.__zooming = this;\r\n        this.emit(\"start\");\r\n      }\r\n      return this;\r\n    },\r\n    zoom: function(key, transform) {\r\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\r\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\r\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\r\n      this.that.__zoom = transform;\r\n      this.emit(\"zoom\");\r\n      return this;\r\n    },\r\n    end: function() {\r\n      if (--this.active === 0) {\r\n        delete this.that.__zooming;\r\n        this.emit(\"end\");\r\n      }\r\n      return this;\r\n    },\r\n    emit: function(type) {\r\n      customEvent(new ZoomEvent(zoom, type, this.that.__zoom), listeners.apply, listeners, [type, this.that, this.args]);\r\n    }\r\n  };\r\n\r\n  function wheeled() {\r\n    if (!filter.apply(this, arguments)) return;\r\n    var g = gesture(this, arguments),\r\n        t = this.__zoom,\r\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\r\n        p = mouse(this);\r\n\r\n    // If the mouse is in the same location as before, reuse it.\r\n    // If there were recent wheel events, reset the wheel idle timeout.\r\n    if (g.wheel) {\r\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\r\n        g.mouse[1] = t.invert(g.mouse[0] = p);\r\n      }\r\n      clearTimeout(g.wheel);\r\n    }\r\n\r\n    // If this wheel event wont trigger a transform change, ignore it.\r\n    else if (t.k === k) return;\r\n\r\n    // Otherwise, capture the mouse point and location at the start.\r\n    else {\r\n      g.mouse = [p, t.invert(p)];\r\n      interrupt(this);\r\n      g.start();\r\n    }\r\n\r\n    noevent();\r\n    g.wheel = setTimeout(wheelidled, wheelDelay);\r\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\r\n\r\n    function wheelidled() {\r\n      g.wheel = null;\r\n      g.end();\r\n    }\r\n  }\r\n\r\n  function mousedowned() {\r\n    if (touchending || !filter.apply(this, arguments)) return;\r\n    var g = gesture(this, arguments, true),\r\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\r\n        p = mouse(this),\r\n        x0 = event.clientX,\r\n        y0 = event.clientY;\r\n\r\n    dragDisable(event.view);\r\n    nopropagation();\r\n    g.mouse = [p, this.__zoom.invert(p)];\r\n    interrupt(this);\r\n    g.start();\r\n\r\n    function mousemoved() {\r\n      noevent();\r\n      if (!g.moved) {\r\n        var dx = event.clientX - x0, dy = event.clientY - y0;\r\n        g.moved = dx * dx + dy * dy > clickDistance2;\r\n      }\r\n      g.zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = mouse(g.that), g.mouse[1]), g.extent, translateExtent));\r\n    }\r\n\r\n    function mouseupped() {\r\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\r\n      dragEnable(event.view, g.moved);\r\n      noevent();\r\n      g.end();\r\n    }\r\n  }\r\n\r\n  function dblclicked() {\r\n    if (!filter.apply(this, arguments)) return;\r\n    var t0 = this.__zoom,\r\n        p0 = mouse(this),\r\n        p1 = t0.invert(p0),\r\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\r\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, arguments), translateExtent);\r\n\r\n    noevent();\r\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0);\r\n    else select(this).call(zoom.transform, t1);\r\n  }\r\n\r\n  function touchstarted() {\r\n    if (!filter.apply(this, arguments)) return;\r\n    var touches = event.touches,\r\n        n = touches.length,\r\n        g = gesture(this, arguments, event.changedTouches.length === n),\r\n        started, i, t, p;\r\n\r\n    nopropagation();\r\n    for (i = 0; i < n; ++i) {\r\n      t = touches[i], p = touch(this, touches, t.identifier);\r\n      p = [p, this.__zoom.invert(p), t.identifier];\r\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\r\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\r\n    }\r\n\r\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\r\n\r\n    if (started) {\r\n      if (g.taps < 2) touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\r\n      interrupt(this);\r\n      g.start();\r\n    }\r\n  }\r\n\r\n  function touchmoved() {\r\n    if (!this.__zooming) return;\r\n    var g = gesture(this, arguments),\r\n        touches = event.changedTouches,\r\n        n = touches.length, i, t, p, l;\r\n\r\n    noevent();\r\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\r\n    g.taps = 0;\r\n    for (i = 0; i < n; ++i) {\r\n      t = touches[i], p = touch(this, touches, t.identifier);\r\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\r\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\r\n    }\r\n    t = g.that.__zoom;\r\n    if (g.touch1) {\r\n      var p0 = g.touch0[0], l0 = g.touch0[1],\r\n          p1 = g.touch1[0], l1 = g.touch1[1],\r\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\r\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\r\n      t = scale(t, Math.sqrt(dp / dl));\r\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\r\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\r\n    }\r\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\r\n    else return;\r\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\r\n  }\r\n\r\n  function touchended() {\r\n    if (!this.__zooming) return;\r\n    var g = gesture(this, arguments),\r\n        touches = event.changedTouches,\r\n        n = touches.length, i, t;\r\n\r\n    nopropagation();\r\n    if (touchending) clearTimeout(touchending);\r\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\r\n    for (i = 0; i < n; ++i) {\r\n      t = touches[i];\r\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\r\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\r\n    }\r\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\r\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\r\n    else {\r\n      g.end();\r\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\r\n      if (g.taps === 2) {\r\n        var p = select(this).on(\"dblclick.zoom\");\r\n        if (p) p.apply(this, arguments);\r\n      }\r\n    }\r\n  }\r\n\r\n  zoom.wheelDelta = function(_) {\r\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\r\n  };\r\n\r\n  zoom.filter = function(_) {\r\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\r\n  };\r\n\r\n  zoom.touchable = function(_) {\r\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\r\n  };\r\n\r\n  zoom.extent = function(_) {\r\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\r\n  };\r\n\r\n  zoom.scaleExtent = function(_) {\r\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\r\n  };\r\n\r\n  zoom.translateExtent = function(_) {\r\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\r\n  };\r\n\r\n  zoom.constrain = function(_) {\r\n    return arguments.length ? (constrain = _, zoom) : constrain;\r\n  };\r\n\r\n  zoom.duration = function(_) {\r\n    return arguments.length ? (duration = +_, zoom) : duration;\r\n  };\r\n\r\n  zoom.interpolate = function(_) {\r\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\r\n  };\r\n\r\n  zoom.on = function() {\r\n    var value = listeners.on.apply(listeners, arguments);\r\n    return value === listeners ? zoom : value;\r\n  };\r\n\r\n  zoom.clickDistance = function(_) {\r\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\r\n  };\r\n\r\n  return zoom;\r\n}\r\n","export var name = \"d3\";\r\nexport var version = \"5.12.0\";\r\nexport var description = \"Data-Driven Documents\";\r\nexport var keywords = [\"dom\",\"visualization\",\"svg\",\"animation\",\"canvas\"];\r\nexport var homepage = \"https://d3js.org\";\r\nexport var license = \"BSD-3-Clause\";\r\nexport var author = {\"name\":\"Mike Bostock\",\"url\":\"https://bost.ocks.org/mike\"};\r\nexport var main = \"dist/d3.node.js\";\r\nexport var unpkg = \"dist/d3.min.js\";\r\nexport var jsdelivr = \"dist/d3.min.js\";\r\nexport var module = \"index.js\";\r\nexport var repository = {\"type\":\"git\",\"url\":\"https://github.com/d3/d3.git\"};\r\nexport var files = [\"dist/**/*.js\",\"index.js\"];\r\nexport var scripts = {\"pretest\":\"rimraf dist && mkdir dist && json2module package.json > dist/package.js && rollup -c\",\"test\":\"tape 'test/**/*-test.js'\",\"prepublishOnly\":\"yarn test\",\"postpublish\":\"git push && git push --tags && cd ../d3.github.com && git pull && cp ../d3/dist/d3.js d3.v5.js && cp ../d3/dist/d3.min.js d3.v5.min.js && git add d3.v5.js d3.v5.min.js && git commit -m \\\"d3 ${npm_package_version}\\\" && git push && cd - && cd ../d3-bower && git pull && cp ../d3/LICENSE ../d3/README.md ../d3/dist/d3.js ../d3/dist/d3.min.js . && git add -- LICENSE README.md d3.js d3.min.js && git commit -m \\\"${npm_package_version}\\\" && git tag -am \\\"${npm_package_version}\\\" v${npm_package_version} && git push && git push --tags && cd - && zip -j dist/d3.zip -- LICENSE README.md API.md CHANGES.md dist/d3.js dist/d3.min.js\"};\r\nexport var devDependencies = {\"json2module\":\"0.0\",\"rimraf\":\"2\",\"rollup\":\"1\",\"rollup-plugin-ascii\":\"0.0\",\"rollup-plugin-node-resolve\":\"3\",\"rollup-plugin-terser\":\"5\",\"tape\":\"4\"};\r\nexport var dependencies = {\"d3-array\":\"1\",\"d3-axis\":\"1\",\"d3-brush\":\"1\",\"d3-chord\":\"1\",\"d3-collection\":\"1\",\"d3-color\":\"1\",\"d3-contour\":\"1\",\"d3-dispatch\":\"1\",\"d3-drag\":\"1\",\"d3-dsv\":\"1\",\"d3-ease\":\"1\",\"d3-fetch\":\"1\",\"d3-force\":\"1\",\"d3-format\":\"1\",\"d3-geo\":\"1\",\"d3-hierarchy\":\"1\",\"d3-interpolate\":\"1\",\"d3-path\":\"1\",\"d3-polygon\":\"1\",\"d3-quadtree\":\"1\",\"d3-random\":\"1\",\"d3-scale\":\"2\",\"d3-scale-chromatic\":\"1\",\"d3-selection\":\"1\",\"d3-shape\":\"1\",\"d3-time\":\"1\",\"d3-time-format\":\"2\",\"d3-timer\":\"1\",\"d3-transition\":\"1\",\"d3-voronoi\":\"1\",\"d3-zoom\":\"1\"};\r\n","export {version} from \"./dist/package.js\";\r\nexport * from \"d3-array\";\r\nexport * from \"d3-axis\";\r\nexport * from \"d3-brush\";\r\nexport * from \"d3-chord\";\r\nexport * from \"d3-collection\";\r\nexport * from \"d3-color\";\r\nexport * from \"d3-contour\";\r\nexport * from \"d3-dispatch\";\r\nexport * from \"d3-drag\";\r\nexport * from \"d3-dsv\";\r\nexport * from \"d3-ease\";\r\nexport * from \"d3-fetch\";\r\nexport * from \"d3-force\";\r\nexport * from \"d3-format\";\r\nexport * from \"d3-geo\";\r\nexport * from \"d3-hierarchy\";\r\nexport * from \"d3-interpolate\";\r\nexport * from \"d3-path\";\r\nexport * from \"d3-polygon\";\r\nexport * from \"d3-quadtree\";\r\nexport * from \"d3-random\";\r\nexport * from \"d3-scale\";\r\nexport * from \"d3-scale-chromatic\";\r\nexport * from \"d3-selection\";\r\nexport * from \"d3-shape\";\r\nexport * from \"d3-time\";\r\nexport * from \"d3-time-format\";\r\nexport * from \"d3-timer\";\r\nexport * from \"d3-transition\";\r\nexport * from \"d3-voronoi\";\r\nexport * from \"d3-zoom\";\r\n","export function getValue(object, propertyName, defaultValue) {\r\n    if (!object) {\r\n        return defaultValue;\r\n    }\r\n    let propertyValue = object[propertyName];\r\n    if (propertyValue === undefined) {\r\n        return defaultValue;\r\n    }\r\n    return propertyValue;\r\n}\r\n/** Gets the solid color from a fill property using only a propertyName */\r\nexport function getFillColorByPropertyName(object, propertyName, defaultColor) {\r\n    let value = getValue(object, propertyName);\r\n    if (!value || !value.solid) {\r\n        return defaultColor;\r\n    }\r\n    return value.solid.color;\r\n}\r\n//# sourceMappingURL=dataViewObject.js.map","import * as DataViewObject from \"./dataViewObject\";\r\n/** Gets the value of the given object/property pair. */\r\nexport function getValue(objects, propertyId, defaultValue) {\r\n    if (!objects) {\r\n        return defaultValue;\r\n    }\r\n    return DataViewObject.getValue(objects[propertyId.objectName], propertyId.propertyName, defaultValue);\r\n}\r\n/** Gets an object from objects. */\r\nexport function getObject(objects, objectName, defaultValue) {\r\n    if (objects && objects[objectName]) {\r\n        return objects[objectName];\r\n    }\r\n    return defaultValue;\r\n}\r\n/** Gets the solid color from a fill property. */\r\nexport function getFillColor(objects, propertyId, defaultColor) {\r\n    const value = getValue(objects, propertyId);\r\n    if (!value || !value.solid) {\r\n        return defaultColor;\r\n    }\r\n    return value.solid.color;\r\n}\r\nexport function getCommonValue(objects, propertyId, defaultValue) {\r\n    const value = getValue(objects, propertyId, defaultValue);\r\n    if (value && value.solid) {\r\n        return value.solid.color;\r\n    }\r\n    if (value === undefined\r\n        || value === null\r\n        || (typeof value === \"object\" && !value.solid)) {\r\n        return defaultValue;\r\n    }\r\n    return value;\r\n}\r\n//# sourceMappingURL=dataViewObjects.js.map","import * as DataViewObjects from \"./dataViewObjects\";\r\nexport class DataViewObjectsParser {\r\n    static getDefault() {\r\n        return new this();\r\n    }\r\n    static createPropertyIdentifier(objectName, propertyName) {\r\n        return {\r\n            objectName,\r\n            propertyName\r\n        };\r\n    }\r\n    static parse(dataView) {\r\n        let dataViewObjectParser = this.getDefault(), properties;\r\n        if (!dataView || !dataView.metadata || !dataView.metadata.objects) {\r\n            return dataViewObjectParser;\r\n        }\r\n        properties = dataViewObjectParser.getProperties();\r\n        for (let objectName in properties) {\r\n            for (let propertyName in properties[objectName]) {\r\n                const defaultValue = dataViewObjectParser[objectName][propertyName];\r\n                dataViewObjectParser[objectName][propertyName] = DataViewObjects.getCommonValue(dataView.metadata.objects, properties[objectName][propertyName], defaultValue);\r\n            }\r\n        }\r\n        return dataViewObjectParser;\r\n    }\r\n    static isPropertyEnumerable(propertyName) {\r\n        return !DataViewObjectsParser.InnumerablePropertyPrefix.test(propertyName);\r\n    }\r\n    static enumerateObjectInstances(dataViewObjectParser, options) {\r\n        let dataViewProperties = dataViewObjectParser && dataViewObjectParser[options.objectName];\r\n        if (!dataViewProperties) {\r\n            return [];\r\n        }\r\n        let instance = {\r\n            objectName: options.objectName,\r\n            selector: null,\r\n            properties: {}\r\n        };\r\n        for (let key in dataViewProperties) {\r\n            if (dataViewProperties.hasOwnProperty(key)) {\r\n                instance.properties[key] = dataViewProperties[key];\r\n            }\r\n        }\r\n        return {\r\n            instances: [instance]\r\n        };\r\n    }\r\n    getProperties() {\r\n        let properties = {}, objectNames = Object.keys(this);\r\n        objectNames.forEach((objectName) => {\r\n            if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                let propertyNames = Object.keys(this[objectName]);\r\n                properties[objectName] = {};\r\n                propertyNames.forEach((propertyName) => {\r\n                    if (DataViewObjectsParser.isPropertyEnumerable(objectName)) {\r\n                        properties[objectName][propertyName] =\r\n                            DataViewObjectsParser.createPropertyIdentifier(objectName, propertyName);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n        return properties;\r\n    }\r\n}\r\nDataViewObjectsParser.InnumerablePropertyPrefix = /^_/;\r\n//# sourceMappingURL=dataViewObjectsParser.js.map","!function(t,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(t=\"undefined\"!=typeof globalThis?globalThis:t||self).dayjs=e()}(this,(function(){\"use strict\";var t=1e3,e=6e4,n=36e5,r=\"millisecond\",i=\"second\",s=\"minute\",u=\"hour\",a=\"day\",o=\"week\",f=\"month\",h=\"quarter\",c=\"year\",d=\"date\",$=\"Invalid Date\",l=/^(\\d{4})[-/]?(\\d{1,2})?[-/]?(\\d{0,2})[Tt\\s]*(\\d{1,2})?:?(\\d{1,2})?:?(\\d{1,2})?[.:]?(\\d+)?$/,y=/\\[([^\\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,M={name:\"en\",weekdays:\"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday\".split(\"_\"),months:\"January_February_March_April_May_June_July_August_September_October_November_December\".split(\"_\")},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:\"\"+Array(e+1-r.length).join(n)+t},g={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?\"+\":\"-\")+m(r,2,\"0\")+\":\"+m(i,2,\"0\")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,f),s=n-i<0,u=e.clone().add(r+(s?-1:1),f);return+(-(r+(n-i)/(s?i-u:u-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:f,y:c,w:o,d:a,D:d,h:u,m:s,s:i,ms:r,Q:h}[t]||String(t||\"\").toLowerCase().replace(/s$/,\"\")},u:function(t){return void 0===t}},v=\"en\",D={};D[v]=M;var p=function(t){return t instanceof _},S=function t(e,n,r){var i;if(!e)return v;if(\"string\"==typeof e){var s=e.toLowerCase();D[s]&&(i=s),n&&(D[s]=n,i=s);var u=e.split(\"-\");if(!i&&u.length>1)return t(u[0])}else{var a=e.name;D[a]=e,i=a}return!r&&i&&(v=i),i||!r&&v},w=function(t,e){if(p(t))return t.clone();var n=\"object\"==typeof e?e:{};return n.date=t,n.args=arguments,new _(n)},O=g;O.l=S,O.i=p,O.w=function(t,e){return w(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var _=function(){function M(t){this.$L=S(t.locale,null,!0),this.parse(t)}var m=M.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(O.u(e))return new Date;if(e instanceof Date)return new Date(e);if(\"string\"==typeof e&&!/Z$/i.test(e)){var r=e.match(l);if(r){var i=r[2]-1||0,s=(r[7]||\"0\").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,s)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return O},m.isValid=function(){return!(this.$d.toString()===$)},m.isSame=function(t,e){var n=w(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return w(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<w(t)},m.$g=function(t,e,n){return O.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,r=!!O.u(e)||e,h=O.p(t),$=function(t,e){var i=O.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?i:i.endOf(a)},l=function(t,e){return O.w(n.toDate()[t].apply(n.toDate(\"s\"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,M=this.$M,m=this.$D,g=\"set\"+(this.$u?\"UTC\":\"\");switch(h){case c:return r?$(1,0):$(31,11);case f:return r?$(1,M):$(0,M+1);case o:var v=this.$locale().weekStart||0,D=(y<v?y+7:y)-v;return $(r?m-D:m+(6-D),M);case a:case d:return l(g+\"Hours\",0);case u:return l(g+\"Minutes\",1);case s:return l(g+\"Seconds\",2);case i:return l(g+\"Milliseconds\",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var n,o=O.p(t),h=\"set\"+(this.$u?\"UTC\":\"\"),$=(n={},n[a]=h+\"Date\",n[d]=h+\"Date\",n[f]=h+\"Month\",n[c]=h+\"FullYear\",n[u]=h+\"Hours\",n[s]=h+\"Minutes\",n[i]=h+\"Seconds\",n[r]=h+\"Milliseconds\",n)[o],l=o===a?this.$D+(e-this.$W):e;if(o===f||o===c){var y=this.clone().set(d,1);y.$d[$](l),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else $&&this.$d[$](l);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[O.p(t)]()},m.add=function(r,h){var d,$=this;r=Number(r);var l=O.p(h),y=function(t){var e=w($);return O.w(e.date(e.date()+Math.round(t*r)),$)};if(l===f)return this.set(f,this.$M+r);if(l===c)return this.set(c,this.$y+r);if(l===a)return y(1);if(l===o)return y(7);var M=(d={},d[s]=e,d[u]=n,d[i]=t,d)[l]||1,m=this.$d.getTime()+r*M;return O.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||$;var r=t||\"YYYY-MM-DDTHH:mm:ssZ\",i=O.z(this),s=this.$H,u=this.$m,a=this.$M,o=n.weekdays,f=n.months,h=function(t,n,i,s){return t&&(t[n]||t(e,r))||i[n].slice(0,s)},c=function(t){return O.s(s%12||12,t,\"0\")},d=n.meridiem||function(t,e,n){var r=t<12?\"AM\":\"PM\";return n?r.toLowerCase():r},l={YY:String(this.$y).slice(-2),YYYY:this.$y,M:a+1,MM:O.s(a+1,2,\"0\"),MMM:h(n.monthsShort,a,f,3),MMMM:h(f,a),D:this.$D,DD:O.s(this.$D,2,\"0\"),d:String(this.$W),dd:h(n.weekdaysMin,this.$W,o,2),ddd:h(n.weekdaysShort,this.$W,o,3),dddd:o[this.$W],H:String(s),HH:O.s(s,2,\"0\"),h:c(1),hh:c(2),a:d(s,u,!0),A:d(s,u,!1),m:String(u),mm:O.s(u,2,\"0\"),s:String(this.$s),ss:O.s(this.$s,2,\"0\"),SSS:O.s(this.$ms,3,\"0\"),Z:i};return r.replace(y,(function(t,e){return e||l[t]||i.replace(\":\",\"\")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,d,$){var l,y=O.p(d),M=w(r),m=(M.utcOffset()-this.utcOffset())*e,g=this-M,v=O.m(this,M);return v=(l={},l[c]=v/12,l[f]=v,l[h]=v/3,l[o]=(g-m)/6048e5,l[a]=(g-m)/864e5,l[u]=g/n,l[s]=g/e,l[i]=g/t,l)[y]||g,$?v:O.a(v)},m.daysInMonth=function(){return this.endOf(f).$D},m.$locale=function(){return D[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=S(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return O.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},M}(),T=_.prototype;return w.prototype=T,[[\"$ms\",r],[\"$s\",i],[\"$m\",s],[\"$H\",u],[\"$W\",a],[\"$M\",f],[\"$y\",c],[\"$D\",d]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),w.extend=function(t,e){return t.$i||(t(e,_,w),t.$i=!0),w},w.locale=S,w.isDayjs=p,w.unix=function(t){return w(1e3*t)},w.en=D[v],w.Ls=D,w.p={},w}));","module.exports = Function('return this')();","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Visual } from \"../../src/visual\";\nimport powerbiVisualsApi from \"powerbi-visuals-api\";\nimport IVisualPlugin = powerbiVisualsApi.visuals.plugins.IVisualPlugin;\nimport VisualConstructorOptions = powerbiVisualsApi.extensibility.visual.VisualConstructorOptions;\nimport DialogConstructorOptions = powerbiVisualsApi.extensibility.visual.DialogConstructorOptions;\nvar powerbiKey: any = \"powerbi\";\nvar powerbi: any = window[powerbiKey];\nvar tbhGanttVisual02814EA99E75457B80AA513BCFD5A299_DEBUG: IVisualPlugin = {\n    name: 'tbhGanttVisual02814EA99E75457B80AA513BCFD5A299_DEBUG',\n    displayName: 'Gantt Chart Visual by TBH',\n    class: 'Visual',\n    apiVersion: '3.8.0',\n    create: (options: VisualConstructorOptions) => {\n        if (Visual) {\n            return new Visual(options);\n        }\n        throw 'Visual instance not found';\n    },\n    createModalDialog: (dialogId: string, options: DialogConstructorOptions, initialState: object) => {\n        const dialogRegistry = globalThis.dialogRegistry;\n        if (dialogId in dialogRegistry) {\n            new dialogRegistry[dialogId](options, initialState);\n        }\n    },\n    custom: true\n};\nif (typeof powerbi !== \"undefined\") {\n    powerbi.visuals = powerbi.visuals || {};\n    powerbi.visuals.plugins = powerbi.visuals.plugins || {};\n    powerbi.visuals.plugins[\"tbhGanttVisual02814EA99E75457B80AA513BCFD5A299_DEBUG\"] = tbhGanttVisual02814EA99E75457B80AA513BCFD5A299_DEBUG;\n}\nexport default tbhGanttVisual02814EA99E75457B80AA513BCFD5A299_DEBUG;"],"names":[],"sourceRoot":""}